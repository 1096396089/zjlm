<template>
  <div class="relative w-screen h-screen overflow-hidden ">



    <!-- Three.js 渲染容器 -->
    <div ref="containerRef" class="w-full h-[55%] relative" style="background: transparent;"></div>




    <!-- 主要控制面板 -->
    <div>

      <div class="absolute z-40  left-1/2 transform    -translate-y-32  -translate-x-1/2 flex justify-center mt-8">
        <svg width="140" height="11" viewBox="0 0 140 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M25.1135 5.09359L25.2114 5.8051C24.0854 6.20919 22.9033 6.62708 21.9941 6.94828L21.8018 6.19884C22.6306 5.93289 23.8895 5.51841 25.1135 5.09359ZM25.1485 2.36167V3.0835H21.8892V2.36167H25.1485ZM24.0049 0.0372662V9.54209C24.0049 9.99109 23.9035 10.2087 23.6552 10.333C23.2235 10.4769 22.7656 10.5276 22.3123 10.4816C22.2713 10.228 22.1973 9.98071 22.092 9.7459C22.5711 9.7459 22.9978 9.7459 23.1411 9.7459C23.2845 9.7459 23.3265 9.69755 23.3265 9.53522V0.033809L24.0049 0.0372662ZM27.523 0.189213C27.1478 1.66507 26.4732 3.05038 25.5402 4.26126C25.355 4.09492 25.1574 3.9425 24.9491 3.80533C25.8626 2.70445 26.5064 1.41025 26.8306 0.0234375L27.523 0.189213ZM30.5655 3.90205L30.7753 4.54445L25.4422 6.75835L25.2219 6.11941L30.5655 3.90205ZM26.9984 3.66717V9.1691C26.9984 9.63881 27.1278 9.75281 27.8377 9.75281H30.4536C31.0096 9.75281 31.1075 9.53866 31.153 8.44381C31.3471 8.56908 31.5628 8.65806 31.7895 8.7063C31.681 10.0395 31.4397 10.4332 30.4745 10.4332H27.8203C26.6662 10.4332 26.341 10.188 26.341 9.17255V3.67409L26.9984 3.66717ZM31.7055 1.65708V2.34784H26.5333V1.65708H31.7055ZM29.0302 2.73812V8.60958H28.3903V2.73812H29.0302ZM30.3277 4.06783L30.506 3.89514L30.6354 3.78463L31.1005 3.98839L31.0691 4.11273C31.0691 5.69111 31.0446 7.17626 31.0061 7.49747C31.0144 7.64814 30.9678 7.79678 30.8748 7.9165C30.7818 8.03622 30.6485 8.11913 30.499 8.15024C30.2211 8.2089 29.9365 8.23094 29.6527 8.21584C29.6334 7.97874 29.578 7.74587 29.4884 7.52508C29.7087 7.54581 30.0164 7.52508 30.1248 7.52508C30.2332 7.52508 30.3347 7.49745 30.3696 7.30749C30.4046 7.11753 30.4256 5.74639 30.4256 4.04712L30.3277 4.06783Z"
            fill="#3F2917" />
          <path
            d="M38.6329 3.71579V4.40655H33.9014V3.71579H38.6329ZM34.0378 8.35081C34.2021 8.299 34.342 8.00544 34.5239 7.54609C34.9518 6.38368 35.2805 5.18791 35.5065 3.97137L36.206 4.21662C35.8793 5.72797 35.4001 7.2032 34.7756 8.62021C34.7756 8.62021 34.2616 8.8827 34.2616 9.05194C34.2029 8.81356 34.1281 8.57932 34.0378 8.35081ZM34.2196 8.42678L34.6008 8.14359L38.1364 7.36648C38.1585 7.58912 38.1923 7.81043 38.2378 8.02959C34.912 8.80669 34.5204 8.91721 34.2721 9.06573L34.2196 8.42678ZM38.4371 0.976951V1.66771H34.3V0.976951H38.4371ZM37.6782 5.46689C38.1059 6.51712 38.476 7.58933 38.7868 8.6789L38.1538 8.91378C37.8567 7.80273 37.4983 6.70855 37.0802 5.63613L37.6782 5.46689ZM41.1124 0.234375C41.0879 4.13717 41.032 8.31973 38.8393 10.5129C38.6817 10.3048 38.4902 10.1238 38.2727 9.97754C40.371 7.95361 40.3885 3.91613 40.399 0.234375H41.1124ZM43.1127 2.71422V3.44643H38.7763V2.71422H43.1127ZM43.4624 2.71422C43.4624 2.71422 43.4624 2.9974 43.4624 3.11483C43.3156 7.84654 43.1827 9.45257 42.805 9.94646C42.7231 10.0727 42.6111 10.1772 42.4788 10.2507C42.3464 10.3241 42.1979 10.3643 42.0461 10.3678C41.546 10.3914 41.0448 10.3822 40.5458 10.3402C40.5223 10.0767 40.4449 9.82052 40.3185 9.58725C40.9445 9.64942 41.525 9.64944 41.7523 9.64944C41.8314 9.66352 41.9128 9.65617 41.9879 9.62819C42.063 9.60022 42.1291 9.55268 42.179 9.49058C42.4797 9.12102 42.6336 7.4701 42.7665 2.88346V2.71422H43.4624Z"
            fill="#3F2917" />
          <path
            d="M47.4911 2.32022C47.4526 6.03651 47.3582 8.83063 45.9804 10.5161C45.8325 10.3171 45.6516 10.1443 45.4453 10.0049C46.7287 8.4749 46.7847 5.81892 46.8092 2.32022H47.4911ZM49.9111 1.91611V2.63795H45.6237V1.91611H49.9111ZM47.6345 0.0924967C47.9528 0.599633 48.23 1.13087 48.4633 1.68124L47.7919 1.95064C47.5649 1.38887 47.2949 0.845059 46.984 0.323917L47.6345 0.0924967ZM49.4425 4.20253C49.4425 4.20253 49.4425 4.45811 49.4425 4.54791C49.3725 8.38508 49.2991 9.64226 49.0228 10.0291C48.9612 10.1345 48.8725 10.222 48.7656 10.2826C48.6588 10.3433 48.5376 10.375 48.4143 10.3745C48.0489 10.4046 47.6817 10.4046 47.3163 10.3745C47.298 10.1294 47.2389 9.88906 47.1414 9.66301C47.4633 9.69498 47.7866 9.70993 48.1101 9.70787C48.1728 9.72006 48.2379 9.71266 48.2962 9.68666C48.3545 9.66066 48.4031 9.61739 48.4353 9.56283C48.6242 9.28653 48.7081 8.02243 48.785 4.33032V4.20253H49.4425ZM49.0193 4.20253V4.91403H47.1309V4.20253H49.0193ZM51.2505 5.35263C51.1666 7.42491 50.9427 9.37634 49.9076 10.4816C49.7818 10.2899 49.6204 10.1235 49.432 9.9911C50.3517 9.01713 50.5476 7.20041 50.6035 5.35263H51.2505ZM51.7995 0.171927C51.5054 1.51146 50.93 2.77513 50.1104 3.88131C49.931 3.7043 49.7368 3.54258 49.5299 3.39781C50.3059 2.40616 50.8407 1.25166 51.0931 0.0234375L51.7995 0.171927ZM54.8035 3.53251V4.22327H50.3867V3.53251H54.8035ZM53.9118 9.58699C54.1076 9.58699 55.2442 9.58699 55.5449 9.58699C55.4337 9.81163 55.357 10.0515 55.3176 10.2985H53.8838C52.2681 10.2985 51.1736 9.77353 50.5965 7.15555L51.0861 6.96557C51.5582 9.1691 52.5759 9.58354 53.9118 9.58354V9.58699ZM55.44 1.53275V2.22351H50.8728V1.53275H55.44ZM52.9291 3.89168V9.64572H52.2681V3.89168H52.9291ZM55.0273 6.30934V7.0001H52.5794V6.30934H55.0273ZM54.7791 3.5463L54.884 3.51523L55.3561 3.681C55.1112 4.36112 54.8263 5.02655 54.5028 5.67385L53.9363 5.44589C54.2157 4.86688 54.4563 4.27042 54.6567 3.6603V3.5463H54.7791Z"
            fill="#3F2917" />
          <path
            d="M61.7762 6.93885L61.8111 7.60541C60.3144 7.92662 58.7407 8.27203 57.5831 8.49998L57.4258 7.75049C58.5134 7.56053 60.178 7.24279 61.7762 6.93885ZM61.4265 1.39548V2.11045H57.4852V1.39548H61.4265ZM57.6216 5.10141C57.7965 5.05305 57.9538 4.67316 58.1497 4.17581C58.6348 2.82929 58.9953 1.44209 59.2268 0.03125L59.9437 0.186654C59.5777 1.95822 59.0232 3.68667 58.2896 5.3432C58.2896 5.3432 57.8419 5.60222 57.8419 5.76109C57.7892 5.53661 57.7203 5.31614 57.6356 5.10141H57.6216ZM57.8419 5.13594L58.2616 4.92526H61.4684V5.61602H58.6393C58.3681 5.59256 58.0958 5.64781 57.8559 5.77492L57.8419 5.13594ZM60.2899 3.14659V10.4721H59.5905V3.14659H60.2899ZM67.2456 3.55065V4.27249H61.5768V3.55065H67.2456ZM66.8609 1.39894V2.11386H61.965V1.39894H66.8609ZM64.9725 0.134839C64.4934 2.12768 63.7695 4.86655 63.2904 6.40004H62.5105C63.0526 4.79748 63.808 2.00337 64.2591 0.0347072L64.9725 0.134839ZM63.182 7.60887C64.2558 8.27459 65.2546 9.05151 66.1615 9.9264L65.6824 10.5204C64.7873 9.61029 63.794 8.79958 62.7204 8.10278L63.182 7.60887ZM66.2315 5.67821V6.40004H63.0002V5.67821H66.2315ZM66.179 5.67821L66.2909 5.62985L66.8015 5.8958C66.2175 6.82142 65.3537 8.08205 64.6193 9.08365L63.9933 8.78317C64.7242 7.8092 65.6055 6.48986 66.0601 5.77147V5.67821H66.179Z"
            fill="#3F2917" />
          <path
            d="M97.3658 0.917342L97.4952 0.882812L97.9498 1.02443C97.4882 5.71469 96.0404 8.8231 94.0505 10.5051C93.9067 10.2782 93.7286 10.0744 93.5225 9.90068C95.3899 8.44663 96.8202 5.3175 97.2434 1.10732V0.917342H97.3658ZM97.5231 0.917342V1.65646H93.8302V0.917342H97.5231ZM94.4947 2.91365C95.8725 4.66127 97.4462 7.02021 98.1246 8.51225L97.5162 9.02686C96.8692 7.53136 95.327 5.0999 93.9526 3.34192L94.4947 2.91365ZM102.384 0.917342L102.51 0.882812L102.982 1.02789C102.388 6.03244 100.471 8.99924 97.9323 10.5016C97.8054 10.2625 97.6427 10.0436 97.4497 9.85232C99.8382 8.56406 101.72 5.61106 102.262 1.09695V0.917342H102.384ZM102.503 0.917342V1.65646H98.4324V0.917342H102.503ZM103.465 9.89722C103.259 10.0889 103.082 10.3087 102.94 10.55C100.44 8.98197 99.3207 5.80101 98.7436 1.64609L99.4431 1.53904C99.9327 5.39694 101.052 8.5226 103.465 9.89031V9.89722Z"
            fill="#3F2917" />
          <path
            d="M109.043 4.98053L109.138 5.69545C107.875 6.11681 106.529 6.56237 105.525 6.88012L105.309 6.13755C106.253 5.8716 107.673 5.42607 109.043 4.98053ZM108.984 2.36602V3.09131H105.438V2.36602H108.984ZM107.676 0.03125V9.58443C107.676 10.0369 107.582 10.251 107.326 10.3719C106.873 10.5025 106.398 10.5481 105.928 10.5066C105.878 10.2697 105.804 10.0383 105.707 9.81585C106.207 9.81585 106.658 9.81585 106.788 9.81585C106.917 9.81585 106.994 9.76404 106.994 9.59826V0.0381222L107.676 0.03125ZM110.418 0.0761511V3.35726C110.418 3.74063 110.551 3.8166 111.261 3.8166H113.782C114.387 3.8166 114.481 3.60592 114.548 2.35219C114.75 2.48598 114.975 2.58196 115.212 2.63539C115.1 4.1447 114.863 4.51773 113.814 4.51773H111.236C110.044 4.51773 109.711 4.28979 109.711 3.35381V0.0761511H110.418ZM114.754 5.53313V10.4548H114.055V6.18936H110.393V10.5066H109.694V5.53313H114.754ZM114.544 1.3126C113.144 1.84085 111.697 2.2386 110.222 2.50068C110.167 2.29658 110.089 2.09953 109.988 1.91355C111.357 1.65811 112.697 1.26461 113.985 0.739254L114.544 1.3126ZM114.324 9.3254V9.97126H110.044V9.3254H114.324ZM114.3 7.41202V8.04405H110.065V7.41202H114.3Z"
            fill="#3F2917" />
          <path
            d="M117.233 4.06167C117.426 4.01677 117.608 3.74049 117.838 3.34676C118.429 2.30647 118.916 1.2123 119.293 0.0794728L119.937 0.386824C119.413 1.77784 118.732 3.10572 117.905 4.34491C117.905 4.34491 117.464 4.58665 117.464 4.74898C117.406 4.51424 117.328 4.28443 117.233 4.06167ZM120.486 7.8367L120.608 8.48601L117.461 9.77082L117.286 9.04207C118.094 8.76922 119.279 8.29951 120.486 7.8367ZM117.31 6.83163C117.524 6.80054 117.751 6.50351 118.062 6.0856C118.842 4.97423 119.513 3.79235 120.066 2.55582L120.647 2.9012C119.925 4.39442 119.039 5.80509 118.006 7.10795V7.12865C118.006 7.12865 117.531 7.34627 117.531 7.50515C117.472 7.27614 117.399 7.05113 117.31 6.83163ZM117.454 4.19638L117.803 3.95808L119.685 3.77157C119.654 3.97977 119.638 4.18976 119.636 4.40014C117.919 4.61427 117.632 4.68337 117.464 4.76626L117.454 4.19638ZM117.489 6.8869L117.814 6.62787L120.16 6.07181C120.159 6.28175 120.17 6.49157 120.192 6.70038C118.024 7.27026 117.709 7.39113 117.531 7.50856L117.489 6.8869ZM122.535 2.79416C122.143 4.17568 121.465 5.77132 120.566 6.7971C120.451 6.61808 120.319 6.45039 120.171 6.29631C121.002 5.20716 121.585 3.95367 121.881 2.62147L122.535 2.79416ZM126.994 1.14669V2.82177H126.294V1.81325H121.398V2.98063H120.737V1.1536L126.994 1.14669ZM121.885 4.27581L121.919 4.30346V10.5203H121.297V4.89405L121.885 4.27581ZM126.826 3.12916V3.77502H122.629V3.12916H126.826ZM126.679 4.99423V10.4443H126.022V5.63317H123.434V10.503H122.804V4.97694L126.679 4.99423ZM126.329 7.10104V7.73307H123.109V7.10104H126.329ZM126.329 9.32526V9.95734H123.126V9.32526H126.329ZM123.748 0C123.996 0.405716 124.208 0.830834 124.385 1.27102L123.755 1.53697C123.585 1.08842 123.383 0.652169 123.15 0.23142L123.748 0ZM125.056 3.4987C124.889 4.18946 124.707 4.94585 124.553 5.45011L123.944 5.30503C124.113 4.66037 124.242 4.0065 124.332 3.34676L125.056 3.4987Z"
            fill="#3F2917" />
          <path
            d="M131.096 2.24241V5.03311C131.096 6.93615 130.886 8.88754 129.438 10.5074C129.28 10.3213 129.099 10.1554 128.899 10.0135C130.249 8.51451 130.407 6.67366 130.407 5.0262V2.24241H131.096ZM133.893 1.89703V2.62236H129.095V1.89703H133.893ZM132.953 4.2111V4.92256H130.854V4.20073L132.953 4.2111ZM131.498 0.0112697C131.734 0.504973 131.936 1.01385 132.103 1.53441L131.442 1.78307C131.294 1.24695 131.104 0.722749 130.875 0.215032L131.498 0.0112697ZM133.386 4.2111C133.386 4.2111 133.386 4.47012 133.386 4.5841C133.316 8.38328 133.246 9.63355 132.967 10.0204C132.899 10.1247 132.807 10.2108 132.698 10.2711C132.588 10.3314 132.466 10.3639 132.341 10.3658C131.949 10.3935 131.557 10.3935 131.166 10.3658C131.147 10.1175 131.084 9.87438 130.98 9.64738C131.438 9.69228 131.861 9.69574 132.029 9.69574C132.197 9.69574 132.281 9.675 132.379 9.54375C132.571 9.27436 132.659 8.02063 132.729 4.36305V4.20073L133.386 4.2111ZM138.209 2.62924C137.635 6.58729 136.436 9.0395 133.694 10.535C133.577 10.2983 133.433 10.0758 133.264 9.87189C135.883 8.56635 137.002 6.22119 137.499 2.53943L138.209 2.62924ZM135.992 0.14943C135.586 2.3046 134.942 4.35616 134.009 5.67551C133.835 5.47234 133.646 5.28294 133.442 5.10908C134.32 3.8968 134.918 1.98339 135.254 0.0078125L135.992 0.14943ZM139.051 9.84423C138.854 10.0385 138.683 10.2567 138.541 10.4935C136.285 9.24327 135.184 6.48367 134.621 2.97116L135.247 2.85374C135.747 6.08305 136.862 8.75974 139.037 9.84423H139.051ZM138.957 2.1699V2.88827H134.97V2.1699H138.957Z"
            fill="#3F2917" />
          <path
            d="M7.7224 8.49161C3.3965 8.49161 0.0078125 6.71979 0.0078125 4.45755C0.0078125 2.19531 3.3895 0.40625 7.7224 0.40625C12.0553 0.40625 15.416 2.18148 15.416 4.44372C15.416 6.07737 13.573 7.55215 10.7229 8.16347C10.6302 8.18317 10.5333 8.16567 10.4536 8.11482C10.3739 8.06398 10.318 7.98398 10.298 7.89238C10.2781 7.80078 10.2958 7.70509 10.3473 7.62639C10.3988 7.54769 10.4798 7.49241 10.5725 7.47271C13.052 6.93047 14.7166 5.70784 14.7166 4.42994C14.7166 2.61669 11.5063 1.08318 7.7224 1.08318C3.93855 1.08318 0.707231 2.61669 0.707231 4.42994C0.707231 6.24318 3.92106 7.77319 7.7224 7.77319C7.81515 7.77319 7.9041 7.80961 7.96968 7.87438C8.03526 7.93915 8.07211 8.02697 8.07211 8.11857C8.07211 8.21017 8.03526 8.29804 7.96968 8.36281C7.9041 8.42758 7.81515 8.46395 7.7224 8.46395V8.49161Z"
            fill="#3F2917" />
          <path
            d="M6.23889 9.96086C6.17015 9.96058 6.10301 9.94027 6.04588 9.90251C5.98874 9.86476 5.94413 9.81123 5.91764 9.74858C5.89114 9.68593 5.88394 9.61693 5.89691 9.55026C5.90989 9.48359 5.94247 9.42218 5.99059 9.37369L7.22158 8.1407L5.99059 6.90767C5.92567 6.84218 5.88975 6.75391 5.89073 6.66225C5.89172 6.5706 5.92953 6.48311 5.99584 6.41899C6.06216 6.35487 6.15155 6.31936 6.24435 6.32033C6.33715 6.3213 6.42576 6.35864 6.49069 6.42413L7.96296 7.89891C8.02704 7.96347 8.06293 8.0503 8.06293 8.1407C8.06293 8.23111 8.02704 8.31789 7.96296 8.38245L6.49069 9.86069C6.45759 9.89312 6.41827 9.91866 6.37503 9.93586C6.33179 9.95306 6.2855 9.96158 6.23889 9.96086Z"
            fill="#3F2917" />
          <path
            d="M82.1853 4.04207H82.1503C82.058 4.03333 81.9731 3.98876 81.914 3.91816C81.855 3.84757 81.8268 3.75671 81.8356 3.66558L82.0454 1.5933C82.0543 1.50283 82.0989 1.41948 82.1696 1.36129C82.2403 1.3031 82.3314 1.2748 82.4231 1.28249L84.5213 1.4621C84.5672 1.46595 84.612 1.4787 84.6529 1.49962C84.6938 1.52054 84.7302 1.54918 84.7599 1.58398C84.7896 1.61878 84.8121 1.65903 84.8261 1.70241C84.84 1.74579 84.8452 1.79146 84.8413 1.83682C84.8374 1.88218 84.8245 1.92633 84.8033 1.96676C84.7821 2.00719 84.7531 2.04311 84.7179 2.07246C84.6826 2.1018 84.6419 2.12397 84.598 2.13776C84.554 2.15156 84.5078 2.15671 84.4619 2.15286L82.7133 2.00432L82.535 3.73122C82.5263 3.81671 82.4856 3.89593 82.421 3.95341C82.3563 4.01089 82.2723 4.04251 82.1853 4.04207Z"
            fill="#3F2917" />
          <path
            d="M89.9033 10.9299H89.8718L87.7736 10.7537C87.6813 10.7458 87.596 10.7022 87.5364 10.6322C87.4767 10.5623 87.4476 10.4719 87.4553 10.3807C87.4633 10.2897 87.5076 10.2054 87.5784 10.1465C87.6492 10.0876 87.7408 10.0588 87.833 10.0664L89.5816 10.2115L89.7564 8.48461C89.7608 8.43917 89.7742 8.39504 89.796 8.35476C89.8177 8.31448 89.8473 8.27885 89.8831 8.24995C89.9189 8.22104 89.9601 8.19944 90.0044 8.18637C90.0487 8.17329 90.0951 8.16899 90.1411 8.17376C90.1868 8.1785 90.2311 8.19211 90.2715 8.21377C90.3119 8.23543 90.3475 8.26475 90.3764 8.30003C90.4053 8.33532 90.4269 8.37586 90.44 8.41939C90.453 8.46292 90.4572 8.50854 90.4523 8.55367L90.2425 10.626C90.2324 10.7084 90.1926 10.7846 90.1303 10.8404C90.068 10.8962 89.9874 10.928 89.9033 10.9299Z"
            fill="#3F2917" />
          <path
            d="M89.6304 10.6243C89.5784 10.6248 89.527 10.614 89.4798 10.5925C89.4326 10.571 89.3909 10.5394 89.3576 10.4999L82.6152 2.47329C82.5858 2.43839 82.5636 2.39812 82.55 2.35474C82.5363 2.31136 82.5314 2.26573 82.5357 2.2205C82.5399 2.17526 82.5531 2.13129 82.5746 2.09111C82.596 2.05092 82.6253 2.01529 82.6607 1.98629C82.696 1.95721 82.7368 1.93532 82.7808 1.92183C82.8247 1.90835 82.8709 1.90354 82.9167 1.90771C82.9625 1.91188 83.007 1.92493 83.0477 1.94612C83.0884 1.9673 83.1244 1.99622 83.1538 2.0312L89.9032 10.0717C89.9456 10.1219 89.9726 10.183 89.9812 10.2478C89.9898 10.3127 89.9796 10.3786 89.9518 10.4379C89.9239 10.4973 89.8796 10.5476 89.824 10.583C89.7683 10.6185 89.7036 10.6375 89.6374 10.6381L89.6304 10.6243Z"
            fill="#3F2917" />
        </svg>



      </div>

      <!-- 颜色选择区域 -->
      <div class=" space-y-6">

        <!-- 区域1 颜色选择 -->
        <div>
  


          <div class="relative z-10 w-full bg-[#f7ebdd] py-10 rounded-lg  px-6 -top-[5rem]  pb-[17rem]"
            style="transform: rotate(-2deg); ">
            <div class="-top-[1.2rem]  absolute flex items-end w-full justify-end pr-10">
            <svg width="80" height="21" viewBox="0 0 80 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_721_3986)">
                <path
                  d="M80 18.188L0 21.0003L1.46497 8.99332C1.33653 5.32588 6.48124 2.17293 10.6435 2.04083L68.0547 0.0211127C72.2204 -0.12489 77.57 2.65958 77.6984 6.32355L80 18.188Z"
                  fill="#BA8A91" />
                <path
                  d="M18.6317 7.86233L18.6525 8.44636L14.3548 8.5993L14.334 8.01183L18.6317 7.86233ZM18.7324 13.8589L18.7532 14.4568L14.5145 14.6063L14.4937 14.0084L18.7324 13.8589ZM18.3053 10.5947L18.3921 13.028L14.8374 13.1532L14.754 10.7198L18.3053 10.5947ZM15.7052 7.01067L15.792 9.40233L17.2743 9.35018L17.191 6.95852L17.7707 6.93764L17.8749 9.88549L15.247 9.97935L15.1463 7.03151L15.7052 7.01067ZM15.3754 12.5727L17.8055 12.4892L17.7603 11.1648L15.3303 11.2482L15.3754 12.5727ZM16.83 9.63869L16.8716 10.8693L16.2745 10.8901L16.2329 9.65957L16.83 9.63869ZM16.83 10.918L16.8959 12.7986H16.948L17.073 16.3687L16.4828 16.3896L16.3544 12.8195H16.396L16.3301 10.9388L16.83 10.918ZM23.2244 15.1277L23.2487 15.7708L18.5657 15.9342L18.5449 15.2911L23.2244 15.1277ZM22.9571 10.3652L22.978 11.0049L18.6837 11.1648L18.6594 10.5251L22.9571 10.3652ZM22.6829 8.16128L22.7072 8.79399L18.8886 8.92952L18.8677 8.29686L22.6829 8.16128ZM22.8877 12.6804L22.9085 13.3131L18.9094 13.4521L18.8851 12.8229L22.8877 12.6804ZM21.0096 6.8125L21.145 10.7268L20.5271 10.7476L20.3917 6.83686L21.0096 6.8125ZM21.1693 11.3873L21.3221 15.7291L20.7041 15.7499L20.5514 11.4081L21.1693 11.3873Z"
                  fill="white" />
                <path
                  d="M33.4268 10.3352C31.6911 13.1579 28.8063 14.9899 25.5605 16.137C25.4458 15.9373 25.3096 15.7508 25.1543 15.5808C28.4209 14.5379 31.2919 12.7199 32.8748 10.0501L33.4268 10.3352ZM31.6911 12.1498L31.7119 12.7651L25.4216 12.9875L25.4008 12.3722L31.6911 12.1498ZM31.3439 7.4603L31.3648 8.06864L27.1573 8.21814L27.3135 12.6504L26.6922 12.6712L26.5151 7.63063L31.3439 7.4603ZM31.4967 9.02461V9.55997L26.9629 9.71986L26.9456 9.18107L31.4967 9.02461ZM31.5557 10.5611L31.5765 11.1L27.0428 11.2564L27.0219 10.721L31.5557 10.5611ZM29.5526 6.61908C29.3531 7.1136 29.1212 7.59438 28.8583 8.05825L28.3133 7.92615C28.528 7.46993 28.7011 6.9952 28.8306 6.50781L29.5526 6.61908ZM31.7987 7.44294L32.0556 14.8056C32.0556 15.2992 31.9688 15.5391 31.6425 15.6677C31.0148 15.8151 30.3707 15.8805 29.7262 15.8624C29.667 15.6217 29.5809 15.3885 29.4693 15.1672C30.2504 15.1672 30.9725 15.1359 31.1773 15.122C31.3821 15.1081 31.4446 15.0281 31.4376 14.8195L31.1773 7.4603L31.7987 7.44294Z"
                  fill="white" />
                <path
                  d="M41.6954 12.2836L41.7197 12.9511L35.8182 13.1562L35.7939 12.4922L41.6954 12.2836ZM38.158 6.51309C37.9636 7.9314 37.6512 9.82597 37.429 10.921L36.759 10.9418C37.0159 9.80161 37.3388 7.85839 37.5228 6.46094L38.158 6.51309ZM43.0702 10.0728L43.0945 10.7193L37.2832 10.9245L37.2589 10.2778L43.0702 10.0728ZM43.3409 7.47602L43.3618 8.13303L37.672 8.33464L37.6512 7.67414L43.3409 7.47602ZM43.5527 10.0554C43.5527 10.0554 43.5527 10.2953 43.5527 10.403C43.3756 13.3509 43.1604 14.5397 42.7508 14.9951C42.6448 15.1135 42.5146 15.2077 42.369 15.2713C42.2235 15.3349 42.066 15.3663 41.9072 15.3636C41.5601 15.3914 40.897 15.3984 40.227 15.3636C40.193 15.1212 40.1026 14.8903 39.9632 14.6892C40.7026 14.7344 41.4351 14.717 41.6989 14.6892C41.9627 14.6614 42.0704 14.6684 42.1849 14.5536C42.5494 14.206 42.7681 12.9789 42.9139 10.1701V10.0519L43.5527 10.0554Z"
                  fill="white" />
                <path
                  d="M50.3882 6.74167L50.409 7.32913L46.1113 7.47863V6.8946L50.3882 6.74167ZM50.4888 12.7417L50.5097 13.3396L46.271 13.489L46.2502 12.8911L50.4888 12.7417ZM50.0619 9.47399L50.1486 11.9074L46.5973 12.0325L46.5105 9.59913L50.0619 9.47399ZM47.4652 5.89344L47.5485 8.2851L49.0343 8.23295L48.9475 5.84129L49.5272 5.82045L49.6314 8.7683L47.007 8.85869L46.9028 5.91432L47.4652 5.89344ZM47.118 11.4554L49.5481 11.3685L49.4995 10.0441L47.0695 10.131L47.118 11.4554ZM48.5726 8.51802L48.6177 9.74863L48.0206 9.76946L47.9755 8.53886L48.5726 8.51802ZM48.5726 9.80074L48.6385 11.6779H48.6767L48.8017 15.248L48.2116 15.2689L48.0866 11.6988H48.1248L48.0588 9.81814L48.5726 9.80074ZM54.9705 14.007L54.9914 14.6536L50.3118 14.817L50.2875 14.1704L54.9705 14.007ZM54.6997 9.24455L54.724 9.88416L50.4229 10.0371L50.4021 9.39752L54.6997 9.24455ZM54.429 7.0441L54.4498 7.67328L50.6312 7.80885L50.6069 7.1762L54.429 7.0441ZM54.6303 11.5632L54.6546 12.1924L50.652 12.3349L50.6312 11.7023L54.6303 11.5632ZM52.7522 5.69531L52.8911 9.60609L52.2732 9.6304L52.1343 5.71615L52.7522 5.69531ZM52.9154 10.2701L53.0681 14.6119L52.4468 14.6327L52.294 10.2909L52.9154 10.2701Z"
                  fill="white" />
                <path
                  d="M65.2738 8.30549L65.2981 8.94859L56.845 9.24754L56.8242 8.60097L65.2738 8.30549ZM64.1837 5.85124C62.6667 6.58821 59.8687 6.94976 57.5879 7.09577C57.5534 6.89795 57.4975 6.70446 57.4213 6.5187C59.6153 6.36227 62.3647 6.00768 63.6109 5.375L64.1837 5.85124ZM64.2844 10.6867L64.4233 14.6392L63.7637 14.6635L63.6457 11.3437L58.7266 11.5141L58.8481 14.9416L58.2059 14.966L58.0635 10.9057L64.2844 10.6867ZM64.0067 13.6311L64.031 14.2638L58.56 14.455L58.5357 13.8223L64.0067 13.6311ZM61.2712 6.29273L61.4378 11.0274L60.7886 11.0483L60.622 6.31705L61.2712 6.29273Z"
                  fill="white" />
              </g>
              <defs>
                <clipPath id="clip0_721_3986">
                  <rect width="80" height="21" fill="white" />
                </clipPath>
              </defs>
            </svg>

          </div>
            <div class="grid grid-cols-6 gap-x-4 gap-y-3 justify-items-center" style="transform: rotate(2deg);">
              <div v-for="texture in aTextureNames" :key="texture" class="flex flex-col items-center">
                <button type="button" @click="switchToATexture(texture)" :class="[
                  'w-14 h-14 md:w-16 md:h-16 rounded-[18px] border border-gray-200 shadow-sm transition-transform duration-200',
                  selectedATexture === texture ? 'ring-2 ring-offset-2 ring-blue-400 scale-105' : 'hover:scale-105'
                ]" :style="getSwatchStyle('A', texture)" />
                <div class="text-center leading-tight mt-2">
                  <div class="text-[13px] text-gray-800">{{ getColorName('A', texture) }}</div>
                  <!-- <div class="text-[11px] text-gray-500">{{ getColorEn('A', texture) }}</div> -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 分隔线 -->
        <!-- <div class="border-t border-gray-200"></div> -->

        <!-- 区域2 颜色选择 -->

          <div class="relative z-20 w-full -top-[20rem] bg-[#e7d2ba] py-10 rounded-lg  px-6 pb-52 -mt-12"
            style="transform: rotate(2deg); ">


            <div class="  absolute z-40  flex items-end w-full justify-end pr-10  -top-[1rem]">
              <svg width="82" height="20" viewBox="0 0 82 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_722_4066)">
                  <path
                    d="M81.9971 19.9993L-0.00292969 18.0209L2.23455 6.30431C2.32703 2.69315 7.78729 -0.0999443 12.0488 0.00274272L70.8987 1.41983C75.1673 1.52251 80.4675 4.57917 80.375 8.18691L81.9971 19.9993Z"
                    fill="#50744E" />
                  <path
                    d="M19.607 12.1726V12.7613L15.2637 12.6586V12.0665L19.607 12.1726ZM19.8738 6.27152V6.84655L15.47 6.74046V6.16539L19.8738 6.27152ZM19.3722 8.93793L19.3117 11.334L15.6692 11.245L15.7297 8.84893L19.3722 8.93793ZM16.2526 10.7076L18.7426 10.7692L18.7746 9.46165L16.2846 9.40344L16.2526 10.7076ZM16.9355 5.26174L16.8751 7.6167L18.394 7.65435L18.4544 5.29939H19.0485L18.9738 8.202L16.2846 8.13699L16.3593 5.23438L16.9355 5.26174ZM17.8462 9.16728L17.7964 11.0157H17.8391L17.7466 14.531H17.1383L17.2308 11.0122H17.2557L17.3055 9.16043L17.8462 9.16728ZM17.9209 7.90764L17.8889 9.11936H17.277L17.309 7.90764H17.9209ZM24.1281 13.6992L24.1104 14.3324L19.3153 14.2161L19.3331 13.5828L24.1281 13.6992ZM24.1495 9.00299V9.63279L19.7421 9.52328V8.89686L24.1495 9.00299ZM23.9325 11.2895V11.9125L19.8311 11.8132V11.1902L23.9325 11.2895ZM24.0036 6.81918V7.44213L20.0907 7.3497V6.72675L24.0036 6.81918ZM22.2571 9.91688L22.1432 14.1921H21.5101L21.6239 9.91345L22.2571 9.91688ZM22.3745 5.41237L22.2748 9.26313H21.6381L21.7413 5.40895L22.3745 5.41237Z"
                    fill="white" />
                  <path
                    d="M31.7051 5.71244C31.5699 10.3197 31.5095 13.5338 26.6077 14.7044C26.5185 14.4972 26.3987 14.3035 26.252 14.1293C30.983 13.0511 30.9154 10.1314 31.0541 5.69531L31.7051 5.71244ZM34.9066 10.3299V10.97L26.316 10.7612V10.1246L34.9066 10.3299ZM27.2444 7.82092C28.0331 8.14142 28.768 8.57289 29.425 9.10112L28.991 9.62479C28.3494 9.08322 27.6307 8.63258 26.8567 8.28647L27.2444 7.82092ZM28.123 6.00681C28.9144 6.30552 29.6543 6.71747 30.3178 7.22876L29.923 7.77642C29.2724 7.23955 28.5392 6.80311 27.7495 6.4826L28.123 6.00681ZM31.2569 11.8565C32.5291 12.5131 33.7059 13.3279 34.7572 14.2799L34.3054 14.7797C33.2896 13.8152 32.1419 12.9883 30.8941 12.322L31.2569 11.8565Z"
                    fill="white" />
                  <path
                    d="M43.1908 11.9886V12.6424L37.1436 12.4986L37.1614 11.8414L43.1908 11.9886ZM39.9288 6.10462C39.6443 7.47378 39.2174 9.33239 38.9115 10.3935L38.2285 10.373C38.5593 9.2708 39.0111 7.38136 39.2957 6.01562L39.9288 6.10462ZM44.7346 9.89375V10.5338L38.7763 10.3901V9.74998L44.7346 9.89375ZM45.1721 7.35737L45.1543 8.00773L39.3099 7.88109L39.3277 7.23073L45.1721 7.35737ZM45.229 9.90746C45.229 9.90746 45.229 10.1402 45.1934 10.2497C44.8377 13.1387 44.5354 14.2922 44.0872 14.6995C43.9716 14.8099 43.8327 14.8949 43.6798 14.9486C43.5269 15.0024 43.3637 15.0237 43.2014 15.011C42.6275 15.009 42.0541 14.9793 41.4833 14.922C41.466 14.6794 41.3878 14.4446 41.2556 14.2374C42.0098 14.3264 42.7568 14.3538 43.0342 14.3572C43.1213 14.3734 43.2108 14.3726 43.2976 14.3549C43.3843 14.3373 43.4665 14.3032 43.5394 14.2545C43.9342 13.9328 44.2508 12.7382 44.5532 9.98961V9.8732L45.229 9.90746Z"
                    fill="white" />
                  <path
                    d="M52.1587 12.9616V13.5538L47.8154 13.4477V12.859L52.1587 12.9616ZM52.4255 7.06054V7.63904L48.0218 7.53291V6.95446L52.4255 7.06054ZM51.924 9.727L51.8635 12.123L48.221 12.034L48.285 9.638L51.924 9.727ZM48.8043 11.4967L51.2944 11.5582L51.3264 10.2507L48.8364 10.1925L48.8043 11.4967ZM49.4873 6.05423L49.4268 8.40919L50.9458 8.44341L51.0098 6.08845H51.6038L51.5256 8.99106L48.8364 8.92605L48.911 6.02344L49.4873 6.05423ZM50.3979 9.95635L50.3517 11.8081H50.3908L50.2984 15.3234H49.6936L49.7826 11.8081H49.8252L49.8715 9.95635H50.3979ZM50.4762 8.6967L50.4442 9.90842H49.8288L49.8608 8.6967H50.4762ZM56.6799 14.4711V15.1078L51.8813 14.9914L51.8991 14.3548L56.6799 14.4711ZM56.7013 9.77492V10.4047L52.2939 10.2986V9.66879L56.7013 9.77492ZM56.4843 12.0614V12.6844L52.3829 12.5851V11.9622L56.4843 12.0614ZM56.559 7.61163V8.23462L52.6461 8.13877L52.6639 7.51582L56.559 7.61163ZM54.8088 10.6922L54.6986 14.9674H54.0618L54.1757 10.6888L54.8088 10.6922ZM54.9262 6.18773L54.8266 10.0419H54.1935L54.2931 6.18773H54.9262Z"
                    fill="white" />
                  <path
                    d="M60.4075 6.79249L60.3292 9.74303C60.2865 11.4545 60.0909 13.8813 59.0949 15.5106C58.922 15.3742 58.732 15.2592 58.5293 15.1683C59.4897 13.5972 59.6356 11.3518 59.6747 9.74303L59.7529 6.78906L60.4075 6.79249ZM66.9776 6.94993L66.9135 9.34596L60.1336 9.18509V8.58951L66.2697 8.7401L66.3017 7.5318L60.1656 7.38464V6.78906L66.9776 6.94993ZM67.1483 12.4266L67.2337 12.9845L60.4182 13.9395L60.3328 13.3576L67.1483 12.4266ZM66.4902 10.9616L66.5756 11.5229L60.7988 12.3102L60.7134 11.742L66.4902 10.9616ZM65.9638 9.83541C64.3412 10.3079 62.6724 10.6187 60.9837 10.763C60.9459 10.5914 60.8899 10.4239 60.8166 10.2633C62.4742 10.0784 64.4022 9.75669 65.4409 9.37675L65.9638 9.83541ZM63.7156 10.1058L63.6018 14.4153C63.6018 14.7883 63.6836 14.8705 64.2314 14.8842L66.195 14.9321C66.6361 14.9321 66.7179 14.7644 66.7962 13.7992C66.9712 13.9241 67.1674 14.0191 67.376 14.0798C67.255 15.2504 67.0487 15.5756 66.2163 15.5551L64.1781 15.5038C63.207 15.4798 62.9402 15.2607 62.9615 14.4016L63.0754 10.0921L63.7156 10.1058Z"
                    fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_722_4066">
                    <rect width="82" height="20" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>

            
            <div class="grid grid-cols-6 gap-x-4 gap-y-3 justify-items-center" style="transform: rotate(-2deg);">
              <div v-for="texture in bTextureNames" :key="texture" class="flex flex-col items-center">
                <button type="button" @click="switchToBTexture(texture)" :class="[
                  'w-14 h-14 md:w-16 md:h-16 rounded-[18px] border border-gray-200 shadow-sm transition-transform duration-200',
                  selectedBTexture === texture ? 'ring-2 ring-offset-2 ring-green-500 scale-105' : 'hover:scale-105'
                ]" :style="getSwatchStyle('B', texture)" />
                <div class="text-center leading-tight mt-2">
                  <div class="text-[13px] text-gray-800">{{ getColorName('B', texture) }}</div>
                  <!-- <div class="text-[11px] text-gray-500">{{ getColorEn('B', texture) }}</div> -->
                </div>
              </div>
            </div>
          </div>

        <!-- 定制完成按钮 -->
        <div class="absolute z-40 bottom-10 left-1/2 transform -translate-x-1/2 flex justify-center mt-8"
          @click="showConfirm = true">
          <svg width="124" height="31" viewBox="0 0 124 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M119.806 0.375H4.8047C2.50279 0.375 0.636719 2.24107 0.636719 4.54299V26.0046C0.636719 28.3066 2.50279 30.1726 4.8047 30.1726H119.806C122.108 30.1726 123.974 28.3066 123.974 26.0046V4.54299C123.974 2.24107 122.108 0.375 119.806 0.375Z"
              fill="#F4F1E9" />
            <path
              d="M40.5524 15.4604H41.445C41.4161 16.0881 41.3407 16.7126 41.2192 17.329C41.1229 17.8289 40.9332 18.3062 40.66 18.7358C40.3827 19.1542 40.0086 19.4997 39.5694 19.743C38.9925 20.0538 38.3736 20.2796 37.732 20.4134C37.7034 20.3188 37.6638 20.2278 37.6139 20.1425C37.5584 20.0487 37.5028 19.9549 37.4403 19.8611C37.3867 19.7826 37.3287 19.7073 37.2666 19.6354C37.845 19.5311 38.4053 19.3439 38.9303 19.0796C39.317 18.8827 39.6506 18.5956 39.9029 18.2426C40.1367 17.8843 40.2962 17.4827 40.3718 17.0616C40.4678 16.5325 40.5282 15.9976 40.5524 15.4604ZM37.4055 14.8977H47.7039V15.773H37.3986L37.4055 14.8977ZM37.7077 10.3338H47.3913V13.1125H46.4848V11.2368H38.5761V13.1125H37.7077V10.3338ZM39.3888 12.5706H45.7068V13.4355H39.3888V12.5706ZM41.643 9.05905L42.5148 8.78125C42.6746 9.0487 42.8343 9.35082 42.9906 9.68426C43.1268 9.96275 43.2428 10.2506 43.338 10.5456L42.421 10.8583C42.3369 10.5638 42.2312 10.2759 42.1049 9.99691C41.9676 9.67638 41.8134 9.36328 41.643 9.05905ZM43.4526 15.4222H44.3452V18.899C44.3367 18.9607 44.3413 19.0235 44.3587 19.0833C44.376 19.1432 44.4058 19.1987 44.446 19.2463C44.5883 19.3152 44.7471 19.3429 44.9044 19.3262H46.5299C46.5924 19.3328 46.6555 19.3264 46.7153 19.3073C46.7751 19.2882 46.8303 19.2567 46.8773 19.215C46.9734 19.0744 47.0276 18.9094 47.0336 18.7392C47.0722 18.3816 47.0919 18.0222 47.0926 17.6625C47.1694 17.7188 47.2508 17.7689 47.3358 17.8119C47.4314 17.8642 47.5314 17.9083 47.6345 17.9438L47.895 18.0376C47.8805 18.4843 47.8235 18.9286 47.7248 19.3644C47.681 19.6203 47.5451 19.8513 47.3427 20.0139C47.1233 20.1425 46.8706 20.203 46.6168 20.1876H44.8419C44.5585 20.2004 44.2751 20.1628 44.0049 20.0764C43.9134 20.0431 43.83 19.991 43.76 19.9234C43.6899 19.8557 43.6349 19.7742 43.5985 19.684C43.5105 19.4332 43.4705 19.1681 43.4804 18.9025L43.4526 15.4222Z"
              fill="black" />
            <path
              d="M51.0141 11.0181H51.9172V14.5434C51.9172 14.9846 51.9172 15.4639 51.872 15.9814C51.8269 16.499 51.7817 17.0234 51.6984 17.5583C51.6139 18.0856 51.4897 18.6057 51.3267 19.1143C51.1741 19.5981 50.9555 20.0587 50.6772 20.4829C50.6162 20.4013 50.5476 20.3256 50.4723 20.257C50.3855 20.1737 50.2917 20.0973 50.1944 20.0209C50.1167 19.9582 50.033 19.9035 49.9443 19.8576C50.2731 19.3326 50.5147 18.7579 50.6598 18.1557C50.8096 17.5423 50.9061 16.9171 50.9481 16.2871C50.9898 15.6584 51.0141 15.0749 51.0141 14.5504V11.0181ZM51.5108 13.5813H54.3902V14.4566H51.5108V13.5813ZM51.5803 11.0181H60.5692V11.9489H51.5803V11.0181ZM54.0533 13.5813H54.9008C54.9008 13.6716 54.9008 13.7515 54.9008 13.8175C54.9008 13.8835 54.9008 13.9391 54.9008 13.9808C54.8822 14.907 54.8614 15.6641 54.8383 16.2523C54.8105 16.8289 54.7757 17.27 54.734 17.5687C54.7173 17.7891 54.6508 18.0029 54.5395 18.1939C54.4627 18.2998 54.3614 18.3856 54.2443 18.444C54.118 18.5028 53.9832 18.5415 53.8449 18.5586C53.6436 18.5705 53.4418 18.5705 53.2405 18.5586C52.9928 18.5586 52.7253 18.5482 52.4382 18.5273C52.4284 18.3771 52.404 18.2282 52.3653 18.0827C52.3252 17.9331 52.2681 17.7886 52.195 17.652C52.4415 17.685 52.6897 17.7036 52.9383 17.7077C53.171 17.7077 53.3343 17.7077 53.4281 17.7077C53.4995 17.7098 53.5709 17.7016 53.64 17.6833C53.7022 17.6632 53.7568 17.6243 53.7963 17.5722C53.8757 17.4142 53.9218 17.2416 53.9317 17.0651C53.9664 16.8011 53.9942 16.4017 54.0116 15.8633C54.029 15.325 54.0498 14.606 54.0637 13.7064L54.0533 13.5813ZM58.9889 12.9075L59.8607 13.1437C59.419 14.6618 58.7327 16.0978 57.8288 17.395C57.0043 18.562 55.963 19.5596 54.7618 20.3334C54.7167 20.2674 54.6542 20.1841 54.5778 20.0903C54.5013 19.9965 54.4215 19.8959 54.3381 19.8021C54.2547 19.7083 54.1853 19.6249 54.1228 19.5589C55.3022 18.8892 56.3206 17.9692 57.1063 16.8636C57.9545 15.6617 58.5911 14.3238 58.9889 12.9075ZM55.842 8.90625H56.7486C56.7486 10.064 56.7868 11.1639 56.8632 12.2059C56.95 13.2479 57.0681 14.2031 57.2105 15.0749C57.3376 15.8435 57.5257 16.6008 57.7732 17.3395C57.9397 17.8676 58.1869 18.3667 58.5061 18.8191C58.5944 18.9673 58.7167 19.0925 58.8628 19.1843C59.0089 19.276 59.1747 19.3318 59.3466 19.3471C59.5168 19.3471 59.6419 19.1699 59.7252 18.8156C59.8289 18.2272 59.8847 17.6313 59.8919 17.0338C60.0058 17.1424 60.1277 17.2423 60.2566 17.3325C60.3769 17.4192 60.5076 17.4904 60.6456 17.5444C60.6144 18.1087 60.5389 18.6696 60.4199 19.222C60.3659 19.5378 60.221 19.8312 60.0031 20.0661C59.7995 20.2342 59.5409 20.3208 59.2771 20.3092C58.8797 20.3054 58.4981 20.153 58.2074 19.882C57.8426 19.5437 57.5486 19.1363 57.3425 18.6836C57.0665 18.0943 56.8467 17.4804 56.6861 16.8498C56.4887 16.0818 56.3321 15.3037 56.2172 14.5191C56.0886 13.6681 55.9949 12.7824 55.9323 11.8238C55.8698 10.8652 55.849 9.90657 55.842 8.90625ZM57.3182 9.51756L57.8392 8.94102C58.1036 9.07593 58.361 9.22433 58.6103 9.38561C58.8777 9.55581 59.1278 9.73294 59.3605 9.89966C59.5627 10.0446 59.7564 10.2011 59.9406 10.3685L59.3953 11.0181C59.2174 10.8402 59.0271 10.6753 58.8256 10.5248C58.5929 10.3442 58.3463 10.1775 58.0823 9.99344C57.8184 9.80936 57.5648 9.65996 57.3182 9.51756Z"
              fill="black" />
            <path
              d="M62.959 9.38281H68.169V10.2164H62.959V9.38281ZM63.2507 11.6717H67.8946V20.1744H67.1756V12.4845H63.9593V20.3515H63.2646L63.2507 11.6717ZM63.5981 16.7254H67.5125V17.42H63.6085L63.5981 16.7254ZM63.5981 18.726H67.5125V19.4866H63.6085L63.5981 18.726ZM64.7373 12.2483H65.2236V13.4847C65.2233 13.7617 65.2001 14.0383 65.1541 14.3114C65.1064 14.6112 65.0188 14.9032 64.8936 15.1798C64.7577 15.4779 64.5668 15.7478 64.3309 15.9752C64.2788 15.8991 64.2182 15.8292 64.1503 15.7667C64.0898 15.7036 64.0222 15.6476 63.9489 15.6C64.1614 15.4044 64.3327 15.1682 64.4525 14.9054C64.5618 14.6692 64.6377 14.4191 64.6783 14.1621C64.7153 13.9323 64.735 13.7001 64.7373 13.4674V12.2483ZM64.6227 9.60854H65.2479V12.2586H64.6227V9.60854ZM65.8766 12.2483H66.3732V14.8359C66.3668 14.8893 66.3752 14.9433 66.3976 14.9922C66.3976 15.013 66.4566 15.0235 66.5261 15.0235H66.9568C67.054 15.0235 67.1131 15.0234 67.1304 14.9852C67.1938 15.0346 67.264 15.0744 67.3388 15.1034C67.4179 15.1395 67.4991 15.1708 67.582 15.1971C67.575 15.2521 67.5569 15.305 67.5288 15.3528C67.5007 15.4005 67.4633 15.4421 67.4187 15.4749C67.3023 15.54 67.1697 15.5701 67.0367 15.5618H66.4774C66.3078 15.5799 66.1376 15.5328 66.0016 15.4298C65.8958 15.2561 65.8517 15.0517 65.8766 14.8498V12.2483ZM65.9321 9.60854H66.5747V12.2586H65.9356L65.9321 9.60854ZM68.7108 9.45922H73.0733V15.1485H72.2397V10.3588H68.7316L68.7108 9.45922ZM68.7455 13.3841H69.6034V18.8233C69.5824 18.9851 69.6233 19.1489 69.7181 19.2818C69.8776 19.3706 70.0611 19.407 70.2425 19.3859H72.0417C72.1152 19.3916 72.1891 19.3805 72.2577 19.3534C72.3263 19.3264 72.3878 19.284 72.4377 19.2296C72.5488 19.0443 72.612 18.8342 72.6217 18.6183C72.66 18.3127 72.6878 17.8612 72.7051 17.2603L72.9587 17.4235C73.0501 17.482 73.148 17.5298 73.2504 17.5659L73.5179 17.6632C73.494 18.1938 73.4313 18.722 73.3303 19.2435C73.2849 19.5483 73.1395 19.8293 72.917 20.0424C72.6804 20.2128 72.3916 20.2951 72.1007 20.2751H70.1487C69.8632 20.2862 69.5781 20.2438 69.3082 20.1501C69.2091 20.1112 69.1191 20.0522 69.0438 19.9769C68.9685 19.9016 68.9095 19.8116 68.8706 19.7125C68.7751 19.4262 68.7328 19.1248 68.7455 18.8233V13.3841ZM69.1519 13.3841H72.6252V14.2975H69.1519V13.3841Z"
              fill="black" />
            <path
              d="M79.1685 8.85938L79.9673 9.17194C79.6597 9.80819 79.2946 10.4151 78.8767 10.985C78.4617 11.5569 78.0042 12.0968 77.5082 12.6001C77.045 13.0699 76.5431 13.4997 76.0077 13.8853C75.9752 13.7949 75.9345 13.7077 75.8862 13.6248C75.8306 13.5171 75.7681 13.4025 75.7021 13.2774C75.6495 13.1801 75.5891 13.0871 75.5215 12.9995C76.0164 12.6654 76.4812 12.2889 76.9108 11.8742C77.3698 11.4367 77.7926 10.9627 78.1751 10.4571C78.5595 9.95949 78.8923 9.42421 79.1685 8.85938ZM77.0428 12.3604H77.8903V18.4006C77.8802 18.5989 77.9184 18.7967 78.0014 18.9771C78.0506 19.0507 78.1146 19.1131 78.1894 19.1604C78.2642 19.2076 78.3481 19.2387 78.4356 19.2515C78.7541 19.3088 79.0777 19.3332 79.4012 19.3245H83.9408C84.2368 19.342 84.5327 19.2909 84.8057 19.1751C84.9097 19.11 84.9995 19.0244 85.0693 18.9234C85.1392 18.8225 85.1878 18.7085 85.212 18.5882C85.3109 18.1728 85.3748 17.7498 85.4031 17.3238C85.5352 17.4082 85.6747 17.4803 85.8199 17.5392C85.9588 17.5978 86.1031 17.6432 86.2506 17.6746C86.2076 18.0851 86.138 18.4923 86.0422 18.8938C85.9787 19.1762 85.8529 19.4408 85.674 19.6683C85.5015 19.8666 85.2724 20.0072 85.0175 20.0713C84.6688 20.1573 84.3103 20.1969 83.9512 20.1893H79.4568C78.9709 20.2031 78.4852 20.1541 78.0118 20.0435C77.857 20.0101 77.7105 19.9454 77.5815 19.8534C77.4525 19.7614 77.3437 19.6441 77.2616 19.5085C77.0972 19.1584 77.0221 18.773 77.0428 18.3867V12.3604ZM77.6576 12.3604H85.0662V16.8757H84.1944V13.2496H77.6576V12.3604ZM77.6576 15.4135H84.6042V16.3131H77.6576V15.4135ZM78.9462 9.98473H82.6626V10.8357H78.5502L78.9462 9.98473ZM80.5717 12.6626H81.4192V15.9762H80.5717V12.6626ZM82.3848 9.98473H82.5932L82.7668 9.93605L83.3365 10.3737C83.1489 10.6909 82.9336 11.0174 82.6904 11.3532C82.4543 11.6849 82.1992 12.0027 81.9263 12.3049C81.6588 12.6001 81.4018 12.8606 81.1517 13.0864C81.0783 12.9799 80.9946 12.881 80.9017 12.7911C80.7975 12.6869 80.7071 12.6036 80.6307 12.5376C80.8732 12.3153 81.0984 12.075 81.3046 11.8187C81.5268 11.5373 81.7353 11.2559 81.9263 10.9746C82.0952 10.7214 82.2483 10.4581 82.3848 10.1861V9.98473Z"
              fill="black" />
          </svg>


        </div>

        <!-- 全屏对话框弹窗（覆盖层） -->
        <div v-if="showConfirm" class="fixed inset-0 z-[200]">
          <!-- 背景遮罩 -->
          <div class="absolute inset-0 bg-black bg-opacity-60"></div>
          <!-- 居中内容容器 -->
          <div class="absolute inset-0 flex items-center justify-center">

            <svg width="307" height="143" viewBox="0 0 307 143" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M302.744 0.4375H3.79517C1.88685 0.4375 0.339844 1.98604 0.339844 3.89625V119.419C0.339844 121.329 1.88685 122.877 3.79517 122.877H302.744C304.652 122.877 306.199 121.329 306.199 119.419V3.89625C306.199 1.98604 304.652 0.4375 302.744 0.4375Z"
                fill="#DDCAB5" />
              <path
                d="M122.801 61.5627C122.344 64.9212 121.567 68.034 120.219 70.0955C120.021 69.729 119.79 69.3817 119.528 69.0578C120.738 67.2454 121.377 64.3989 121.74 61.3932L122.801 61.5627ZM125.326 60.9367V62.0262H119.846V60.9367H125.326ZM121.951 65.6683V73.8102H120.962V65.6683H121.951ZM124.825 65.6683V72.482H121.446V71.4133H123.827V66.7474H121.446V65.6855L124.825 65.6683ZM126.957 64.1222V68.3315C126.957 70.3134 126.698 72.9697 125.14 74.7163C124.92 74.422 124.654 74.1651 124.352 73.9554C125.776 72.361 125.938 70.1058 125.938 68.3246V64.1291L126.957 64.1222ZM128.567 60.3383C127.946 62.3012 126.955 64.1268 125.648 65.7167C125.397 65.4305 125.123 65.1656 124.829 64.9246C126.085 63.5235 127.014 61.8599 127.548 60.0547L128.567 60.3383ZM132.168 69.677V70.7146H126.46V69.677H132.168ZM132.168 64.1084V65.146H126.529V64.1084H132.168ZM132.168 66.8754V67.8335H126.529V66.8754H132.168ZM130.513 61.3898V62.3893H127.106L127.562 61.3898H130.513ZM129.756 64.5995V70.1335H128.789V64.5995H129.756ZM130.416 61.3898L130.582 61.331L131.301 61.8533C130.841 62.8727 130.284 63.8446 129.635 64.7552C129.395 64.5634 129.141 64.39 128.875 64.2364C129.413 63.4168 129.85 62.5353 130.178 61.6111V61.3898H130.416ZM132.71 64.1187V73.2983C132.71 73.9554 132.583 74.3082 132.171 74.4881C131.76 74.668 131.069 74.6991 130.053 74.6991C129.988 74.3075 129.872 73.9261 129.708 73.5646C130.451 73.5957 131.173 73.5957 131.38 73.5853C131.587 73.575 131.65 73.5058 131.65 73.2913V64.1187H132.71Z"
                fill="black" />
              <path
                d="M137.645 65.0501V66.2019H134.452V65.0501H137.645ZM136.584 60.3808C137.317 61.0726 138.312 62.0445 138.816 62.629L138.06 63.4937C137.583 62.8849 136.591 61.8508 135.855 61.121L136.584 60.3808ZM136.118 73.1782C136.358 73.0006 136.555 72.7714 136.695 72.5074C136.835 72.2435 136.914 71.9514 136.926 71.6529V65.0501H137.99V72.5106C137.99 72.5106 136.726 73.5725 136.726 74.036C136.567 73.7211 136.362 73.4319 136.118 73.1782ZM136.529 72.9361L136.847 72.4346L139.801 70.2901C139.889 70.631 140.004 70.9642 140.147 71.2863C137.341 73.4099 136.957 73.7489 136.743 74.0533L136.529 72.9361ZM143.992 60.0938C143.961 65.773 143.899 71.6494 140.057 74.6897C139.825 74.364 139.538 74.0809 139.21 73.8526C142.918 71.0407 142.852 65.4687 142.88 60.0938H143.992ZM147.945 73.7904C147.629 74.0349 147.356 74.3307 147.137 74.6655C143.788 72.2098 143.156 66.6688 142.88 65.0259L143.858 64.9291C144.055 66.3748 144.697 71.5215 147.945 73.78V73.7904Z"
                fill="black" />
              <path
                d="M152.806 67.5183C152.406 70.7246 151.49 73.1422 149.835 74.709C149.564 74.4163 149.266 74.151 148.943 73.917C150.581 72.5335 151.362 70.2749 151.708 67.3938L152.806 67.5183ZM161.849 61.8529V65.3116H160.726V62.9804H150.706V65.3116H149.621V61.8529H161.849ZM158.68 73.2252C159.226 73.2252 161.749 73.2252 162.481 73.2045C162.278 73.5818 162.137 73.9894 162.063 74.4116H158.636C155.142 74.4116 152.761 73.6749 151.507 69.8011L152.399 69.431C153.425 72.6615 155.705 73.2183 158.68 73.2252ZM160.042 64.9623V66.1071H151.5V64.9623H160.042ZM155.726 59.9609C156.088 60.5774 156.379 61.233 156.593 61.9151L155.46 62.2956C155.257 61.6021 154.984 60.9311 154.645 60.293L155.726 59.9609ZM156.279 65.4949V73.5331L155.142 73.3636V65.4949H156.279ZM160.65 68.7012V69.8253H155.719V68.7012H160.65Z"
                fill="black" />
              <path
                d="M166.158 60.6689C165.853 62.204 165.337 63.6893 164.624 65.0823C164.31 64.9127 163.984 64.7659 163.649 64.643C164.32 63.5742 164.824 61.9832 165.128 60.4441L166.158 60.6689ZM171.894 65.1168V66.2202H163.705V65.1168H171.894ZM170.774 67.8285V68.9077H165.374V73.3625H164.378V67.8285H170.774ZM171.313 62.3602V63.4532H164.911L165.111 62.3602H171.313ZM168.331 60.1328V74.6596H167.295V60.1328H168.331ZM171.376 67.8285V72.1866C171.376 72.7261 171.293 73.034 170.93 73.2242C170.567 73.4144 170.021 73.4179 169.202 73.411C169.148 73.052 169.044 72.7026 168.891 72.3733C169.315 72.3981 169.739 72.3981 170.163 72.3733C170.315 72.3733 170.36 72.3214 170.36 72.1623V67.8216L171.376 67.8285ZM173.981 61.5232V70.3223H172.944V61.5232H173.981ZM176.628 60.2331V73.0305C176.628 73.8225 176.455 74.1753 176.006 74.3898C175.556 74.6042 174.758 74.6215 173.663 74.6215C173.586 74.1933 173.471 73.7731 173.317 73.366C174.181 73.3971 175.004 73.3971 175.27 73.3867C175.536 73.3764 175.574 73.3072 175.574 73.0409V60.2435L176.628 60.2331Z"
                fill="black" />
              <path
                d="M185.239 64.4125C185.239 63.316 184.513 62.5205 183.02 62.5205C182.018 62.5205 181.099 62.9943 180.256 63.9559L179.472 63.1673C180.436 62.0571 181.579 61.3203 183.165 61.3203C185.239 61.3203 186.555 62.4686 186.555 64.2914C186.555 66.7125 183.058 67.1829 183.445 69.566H182.25C181.794 66.9235 185.239 66.2145 185.239 64.4125ZM181.925 72.4368C181.909 72.3036 181.921 72.1686 181.961 72.0405C182.001 71.9125 182.067 71.7944 182.156 71.694C182.245 71.5937 182.354 71.5133 182.476 71.4583C182.598 71.4032 182.731 71.3748 182.865 71.3748C182.999 71.3748 183.131 71.4032 183.253 71.4583C183.376 71.5133 183.485 71.5937 183.574 71.694C183.662 71.7944 183.729 71.9125 183.769 72.0405C183.809 72.1686 183.821 72.3036 183.805 72.4368C183.816 72.5671 183.8 72.6983 183.758 72.8221C183.716 72.9459 183.648 73.0596 183.56 73.156C183.471 73.2524 183.364 73.3293 183.244 73.3819C183.125 73.4345 182.995 73.4618 182.865 73.4618C182.734 73.4618 182.605 73.4345 182.485 73.3819C182.366 73.3293 182.258 73.2524 182.17 73.156C182.082 73.0596 182.014 72.9459 181.972 72.8221C181.93 72.6983 181.914 72.5671 181.925 72.4368Z"
                fill="black" />
              <path
                d="M126.681 107.617H29.6073C27.3173 107.617 25.4609 109.475 25.4609 111.768V137.968C25.4609 140.26 27.3173 142.118 29.6073 142.118H126.681C128.971 142.118 130.828 140.26 130.828 137.968V111.768C130.828 109.475 128.971 107.617 126.681 107.617Z"
                fill="#9C7D5E" @click=" $router.push({ path: `/result/${selectedATexture}/${selectedBTexture}` })" />
              <path
                d="M55.6637 126.759C55.4944 130.021 54.869 131.688 51.3998 132.487C51.277 132.157 51.0955 131.852 50.8643 131.587C54.0397 130.923 54.4993 129.588 54.6444 126.745L55.6637 126.759ZM62.8543 126.105V127.143H51.0301V126.105H62.8543ZM62.4915 120.831V124.04H61.4549V121.879H52.3673V124.04H51.3687V120.831H62.4915ZM60.5565 123.418V124.421H53.3003V123.418H60.5565ZM56.9007 119.039C57.2769 119.687 57.5893 120.371 57.8337 121.08L56.7729 121.426C56.5466 120.707 56.2516 120.012 55.8918 119.35L56.9007 119.039ZM58.9739 126.714V130.747C58.9739 131.169 59.0707 131.238 59.6201 131.238H61.486C61.987 131.238 62.0699 130.989 62.1148 129.318C62.3938 129.516 62.7048 129.663 63.0339 129.754C62.913 131.743 62.6331 132.245 61.5654 132.245H59.5164C58.2898 132.245 57.9684 131.899 57.9684 130.75V126.714H58.9739Z"
                fill="white" />
              <path
                d="M67.1597 121.628V125.706C67.1597 127.754 66.9593 130.673 65.7361 132.572C65.4938 132.291 65.2107 132.049 64.8965 131.853C66.0056 130.075 66.1231 127.578 66.1231 125.693V121.628H67.1597ZM70.0035 124.593V125.603H66.6933V124.593H70.0035ZM77.0903 121.628V122.69H66.7693V121.628H77.0903ZM70.5805 124.593C70.5805 124.593 70.5805 124.914 70.5805 125.06C70.5148 128.314 70.4388 129.556 70.1624 129.933C70.0663 130.056 69.9444 130.157 69.8054 130.228C69.6663 130.299 69.5134 130.339 69.3573 130.345C68.8224 130.381 68.2855 130.381 67.7506 130.345C67.7252 129.992 67.6313 129.648 67.4742 129.331C68.0823 129.393 68.6593 129.4 68.8874 129.4C68.9645 129.411 69.0432 129.403 69.1162 129.376C69.1893 129.349 69.2543 129.303 69.3055 129.245C69.499 128.989 69.5646 127.903 69.6165 124.776V124.596L70.5805 124.593ZM76.2749 124.091C75.1346 127.858 73.1478 130.663 70.4181 132.392C70.1992 132.076 69.9541 131.779 69.6856 131.503C72.3842 129.947 74.2708 127.301 75.2728 123.811L76.2749 124.091ZM72.7021 119.18C72.6744 125.841 73.9805 131.247 75.7082 131.247C76.0883 131.247 76.2576 130.5 76.3302 128.577C76.5774 128.83 76.8722 129.031 77.1975 129.169C77.0178 131.645 76.6446 132.358 75.6287 132.358C72.9163 132.358 71.7139 126.104 71.662 119.18H72.7021ZM73.9633 119.221C74.8295 119.679 75.641 120.233 76.382 120.874L75.7531 121.615C75.028 120.949 74.2293 120.369 73.3724 119.885L73.9633 119.221Z"
                fill="white" />
              <path
                d="M85.4868 119.789V120.716H79.167V119.789H85.4868ZM85.2277 122.594V132.234H84.3915V123.521H80.2209V132.427H79.4123V122.594H85.2277ZM84.5677 130.518V131.4H79.7475V130.518H84.5677ZM81.8691 123.255V124.614C81.9003 125.137 81.8123 125.661 81.6117 126.145C81.4112 126.629 81.1034 127.061 80.7115 127.409C80.5668 127.228 80.3942 127.071 80.2001 126.945C80.5469 126.666 80.8219 126.308 81.0022 125.9C81.1825 125.493 81.2629 125.048 81.2367 124.604V123.255H81.8691ZM83.8455 128.187V129.052H80.7737V128.187H83.8455ZM81.8483 120.111V123.272H81.0467V120.111H81.8483ZM83.576 120.111V123.272H82.7744V120.111H83.576ZM83.4412 123.251V125.776C83.4412 125.963 83.4723 125.987 83.6313 125.987H84.1772C84.3362 125.987 84.3707 125.987 84.3984 125.946C84.5729 126.076 84.7731 126.168 84.9858 126.215C84.9028 126.561 84.7024 126.713 84.2947 126.713H83.5725C82.9782 126.713 82.802 126.551 82.802 125.787V123.251H83.4412ZM90.9255 119.837V125.589H86.2297V124.552H89.9649V120.868H86.0189V119.831L90.9255 119.837ZM87.0348 124.555V130.684C87.0348 131.21 87.1454 131.314 87.7431 131.314H89.7541C90.3381 131.314 90.4452 130.94 90.5005 128.868C90.7767 129.074 91.09 129.224 91.4231 129.311C91.3021 131.67 91.0188 132.334 89.8267 132.334H87.636C86.4197 132.334 86.0535 131.988 86.0535 130.681V124.555H87.0348Z"
                fill="white" />
              <path
                d="M98.2958 119.492C97.2256 121.637 95.6711 123.503 93.7555 124.943C93.6052 124.587 93.4188 124.247 93.1992 123.929C94.9872 122.718 96.4303 121.062 97.3871 119.125L98.2958 119.492ZM95.9116 123.179V130.152C95.9116 131.023 96.1846 131.227 97.6393 131.227H102.86C104.173 131.227 104.381 130.826 104.536 128.906C104.832 129.099 105.159 129.237 105.504 129.314C105.272 131.573 104.861 132.23 102.864 132.23H97.7153C95.5938 132.23 94.9338 131.826 94.9338 130.155V123.192L95.9116 123.179ZM104.153 123.179V128.388H103.161V124.196H95.656V123.179H104.153ZM103.638 126.707V127.744H95.656V126.707H103.638ZM101.388 120.436V121.411H96.6718L97.1279 120.436H101.388ZM99.9717 123.521V127.357H98.9869V123.521H99.9717ZM101.312 120.436L101.516 120.37L102.169 120.882C101.475 122.033 100.632 123.087 99.6607 124.016C99.4802 123.783 99.279 123.568 99.0595 123.372C99.8704 122.581 100.552 121.667 101.081 120.664V120.436H101.312Z"
                fill="white" />
              <path
                d="M271.543 107.617H174.469C172.179 107.617 170.322 109.475 170.322 111.768V137.968C170.322 140.26 172.179 142.118 174.469 142.118H271.543C273.833 142.118 275.689 140.26 275.689 137.968V111.768C275.689 109.475 273.833 107.617 271.543 107.617Z"
                fill="#50744E" @click="showConfirm = false" />
              <path
                d="M207.967 127.957V128.97H195.67V127.957H207.967ZM207.473 120.047V121.064H196.164V120.047H207.473ZM205.77 122.468V123.468H198.237V132.488H197.252V122.458L205.77 122.468ZM205.742 125.2V126.152H197.909V125.2H205.742ZM202.256 120.358V128.313H201.25V120.358H202.256ZM206.35 122.465V131.111C206.35 131.776 206.205 132.104 205.763 132.27C205.321 132.436 204.581 132.46 203.431 132.46C203.35 132.101 203.227 131.753 203.064 131.423C203.945 131.457 204.792 131.443 205.034 131.423C205.276 131.402 205.359 131.343 205.359 131.077V122.43L206.35 122.465Z"
                fill="white" />
              <path
                d="M214.543 128.343L214.654 129.301C212.995 129.817 211.24 130.339 209.948 130.733L209.72 129.696C210.915 129.377 212.76 128.862 214.543 128.343ZM214.367 120.284V121.322H209.903V120.284H214.367ZM214.17 124.507V125.521H210.1V124.507H214.17ZM212.629 120.703V129.488L211.658 129.689V120.696L212.629 120.703ZM217.235 125.033C217.093 128.869 216.655 131.259 213.614 132.508C213.464 132.206 213.265 131.932 213.026 131.695C215.843 130.598 216.136 128.499 216.257 125.033H217.235ZM222.041 124.376V125.414H214.44V124.376H222.041ZM221.35 120.188V121.225H215.037V120.188H221.35ZM219.726 125.03V130.91C219.726 131.318 219.771 131.383 220.072 131.383H220.988C221.267 131.383 221.333 131.11 221.354 129.398C221.62 129.61 221.927 129.766 222.256 129.855C222.169 131.85 221.91 132.411 221.077 132.411H219.916C218.973 132.411 218.742 132.065 218.742 130.917V125.037L219.726 125.03Z"
                fill="white" />
              <path d="M236.19 125.086V126.272H223.993V125.086H236.19Z" fill="white" />
              <path
                d="M242.411 127.418V128.491H238.195V127.418H242.411ZM242 121.449V122.486H238.489V121.449H242ZM245.987 123.316V124.465C245.987 126.858 245.617 130.223 241.523 132.524C241.316 132.202 241.063 131.912 240.773 131.662C244.633 129.546 244.937 126.53 244.937 124.44V123.33L245.987 123.316ZM244.695 119.398C244.215 121.878 243.42 124.24 242.421 125.779C242.111 125.544 241.781 125.334 241.436 125.153C242.456 123.745 243.195 121.487 243.603 119.18L244.695 119.398ZM249.187 121.653V122.725H243.016L243.461 121.653H249.187ZM250.396 131.434C250.119 131.714 249.886 132.035 249.705 132.385C247.041 131.199 245.714 128.556 245.054 124.907L245.911 124.748C246.498 127.989 247.836 130.462 250.386 131.434H250.396ZM249.035 121.653L249.228 121.59L249.964 122.026C249.624 123.381 249.155 124.7 248.565 125.966C248.351 125.841 247.957 125.62 247.718 125.513C248.236 124.362 248.627 123.158 248.886 121.922V121.653H249.035Z"
                fill="white" />
            </svg>


          </div>
        </div>




      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted, nextTick } from 'vue'
import * as THREE from 'three'
import { getClonedGLTF } from '@/util/gltfCache'
import { loadTextureFromCandidates } from '@/util/textureCache'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'
import { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js'


// 基础路径适配（改为使用 OSS 加速）
const withBase = (path: string): string => {
  const base = 'https://steppy-dev.oss-cn-guangzhou.aliyuncs.com'
  const cleaned = path.replace(/^\/+/, '')
  return `${base}/${cleaned}`
}

// 贴图路径（A/B）
const getTexturePath = (folder: 'A' | 'B', filename: string): string => {
  const base = 'https://steppy-dev.oss-cn-guangzhou.aliyuncs.com'
  return `${base}/tietu/${folder}/${filename}`
}

// 响应式数据
const containerRef = ref<HTMLElement>()
const loading = ref(true)
const loadingProgress = ref(0)
const error = ref('')
const selectedEnvironment = ref('studio')
const isAnimating = ref(true)
const showGestureHint = ref(true)
const showControlPanel = ref(false)
const cameraPosition = ref({ x: 0, y: 0, z: 5 })
// 确认弹窗
const showConfirm = ref(false)

// A和B贴图文件名数组
const aTextureNames = ['A1.png', 'A2.png', 'A3.png', 'A4.png', 'A5.png', 'A6.png',]
const bTextureNames = ['B2.png', 'B1.png', 'B3.png', 'B4.png', 'B5.png', 'B6.png',]

// 当前选中的贴图
const selectedATexture = ref('A2.png')
const selectedBTexture = ref('B3.png')

// 贴图缓存
const textureCache: Record<string, THREE.Texture> = {}

// 添加灯光强度控制
const lightingIntensity = ref({
  ambient: 3.0,
  directional: 3.0,
  fill: 2.0,
  additional: 1.5
})

// 添加Mesh列表
const meshList = ref<Array<{ name: string, index: number, mesh: THREE.Mesh }>>([])



// Three.js 相关变量
let scene: THREE.Scene
let camera: THREE.PerspectiveCamera
let renderer: THREE.WebGLRenderer
let controls: OrbitControls
let shoeModel: THREE.Group
let mixer: THREE.AnimationMixer
let animationId: number

// 添加灯光对象引用
let ambientLight: THREE.AmbientLight
let directionalLight: THREE.DirectionalLight
let fillLight: THREE.DirectionalLight
let topLight: THREE.DirectionalLight
let bottomLight: THREE.DirectionalLight
let leftLight: THREE.DirectionalLight
let rightLight: THREE.DirectionalLight
let spotLight: THREE.SpotLight

// 切换控制面板显示
const toggleControlPanel = () => {
  showControlPanel.value = !showControlPanel.value
}

// 更新相机位置
const updateCameraPosition = () => {
  if (camera) {
    camera.position.set(cameraPosition.value.x, cameraPosition.value.y, cameraPosition.value.z)
    camera.updateProjectionMatrix()
  }
}

// 更新灯光强度
const updateLightingIntensity = () => {
  if (ambientLight) ambientLight.intensity = lightingIntensity.value.ambient
  if (directionalLight) directionalLight.intensity = lightingIntensity.value.directional
  if (fillLight) fillLight.intensity = lightingIntensity.value.fill
  if (topLight) topLight.intensity = lightingIntensity.value.additional
  if (bottomLight) bottomLight.intensity = lightingIntensity.value.additional * 0.8
  if (leftLight) leftLight.intensity = lightingIntensity.value.additional
  if (rightLight) rightLight.intensity = lightingIntensity.value.additional
  if (spotLight) spotLight.intensity = lightingIntensity.value.directional * 0.8
}

// 获取指定Mesh的函数
const getMeshByName = (name: string): THREE.Mesh | null => {
  const found = meshList.value.find(item => item.name === name)
  return found ? found.mesh : null
}

const getMeshByIndex = (index: number): THREE.Mesh | null => {
  const found = meshList.value.find(item => item.index === index)
  return found ? found.mesh : null
}

// 控制台打印 Mesh 名称/索引/父级
const logMeshNames = (limit: number = 200) => {
  if (!meshList.value.length) {
    console.warn('[Mesh] 当前 meshList 为空')
    return
  }
  const rows = meshList.value.slice(0, limit).map(({ name, index, mesh }) => {
    const parents: string[] = []
    let p: any = mesh.parent
    let depth = 0
    while (p && depth < 5) {
      parents.push(String(p.name || ''))
      p = p.parent
      depth++
    }
    return {
      index,
      name,
      parentChain: parents.join(' > '),
      materialType: Array.isArray(mesh.material) ? 'Array' : (mesh.material as any)?.type || 'Unknown'
    }
  })
  console.log(`[Mesh] 共 ${meshList.value.length} 个，以下展示前 ${rows.length} 个：`)
  // @ts-ignore console.table 在浏览器存在
  console.table(rows)
}



const switchToATexture = (textureName: string) => {
  if (!aTextureNames.includes(textureName)) {
    return
  }

  selectedATexture.value = textureName

  // 使用环境适配的路径
  const texturePath = getTexturePath('A', textureName)
  applyTextureToMeshA(texturePath)
}



const switchToBTexture = (textureName: string) => {
  if (!bTextureNames.includes(textureName)) {
    return
  }

  selectedBTexture.value = textureName


  // 使用环境适配的路径
  const texturePath = getTexturePath('B', textureName)
  applyTextureToMeshB(texturePath)
}

// 应用贴图到A mesh
const applyTextureToMeshA = (texturePath: string) => {
  if (!shoeModel) return

  const fileName = texturePath.split('/').pop()!
  const candidates = [
    texturePath,
    `/assets/tietu/A/${fileName}`,
    `./tietu/A/${fileName}`,
    `./src/assets/tietu/A/${fileName}`,
  ]

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      texture.wrapS = THREE.ClampToEdgeWrapping
      texture.wrapT = THREE.ClampToEdgeWrapping
      texture.repeat.set(1, 1)
      texture.offset.set(0, 0)
      texture.minFilter = THREE.LinearMipmapLinearFilter
      texture.magFilter = THREE.LinearFilter
      texture.flipY = false

      let appliedCount = 0
      shoeModel!.traverse((child) => {
        if (child instanceof THREE.Mesh) {
          const meshName = child.name.trim()
          if (meshName === 'A') {
            if (child.material instanceof THREE.MeshStandardMaterial) {
              const newMaterial = child.material.clone()
              newMaterial.map = texture
              newMaterial.needsUpdate = true
              child.material = newMaterial
              appliedCount++
            } else if (Array.isArray(child.material)) {
              child.material = child.material.map((mat) => {
                if (mat instanceof THREE.MeshStandardMaterial) {
                  const newMat = mat.clone()
                  newMat.map = texture
                  newMat.needsUpdate = true
                  return newMat
                }
                return mat
              })
              appliedCount++
            }
          }
        }
      })
    })
    .catch(() => { })
}

// 应用贴图到B mesh
const applyTextureToMeshB = (texturePath: string) => {
  if (!shoeModel) return

  const fileName = texturePath.split('/').pop()!
  const candidates = [
    texturePath,
    `/assets/tietu/B/${fileName}`,
    `./tietu/B/${fileName}`,
    `./src/assets/tietu/B/${fileName}`,
  ]

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      texture.wrapS = THREE.ClampToEdgeWrapping
      texture.wrapT = THREE.ClampToEdgeWrapping
      texture.repeat.set(1, 1)
      texture.offset.set(0, 0)
      texture.minFilter = THREE.LinearMipmapLinearFilter
      texture.magFilter = THREE.LinearFilter
      texture.flipY = false

      let appliedCount = 0
      shoeModel!.traverse((child) => {
        if (child instanceof THREE.Mesh) {
          const meshName = child.name.trim()
          if (meshName === 'B') {
            if (child.material instanceof THREE.MeshStandardMaterial) {
              const newMaterial = child.material.clone()
              newMaterial.map = texture
              newMaterial.needsUpdate = true
              child.material = newMaterial
              appliedCount++
            } else if (Array.isArray(child.material)) {
              child.material = child.material.map((mat) => {
                if (mat instanceof THREE.MeshStandardMaterial) {
                  const newMat = mat.clone()
                  newMat.map = texture
                  newMat.needsUpdate = true
                  return newMat
                }
                return mat
              })
              appliedCount++
            }
          }
        }
      })
    })
    .catch(() => { })
}




// 初始化Three.js
const initThree = async () => {
  if (!containerRef.value) return

  try {
    // 创建场景
    scene = new THREE.Scene()
    // 移除场景背景，保持透明
    scene.background = null
    // 确保没有雾效
    scene.fog = null
    // 确保没有环境贴图
    scene.environment = null

    // 创建相机
    const container = containerRef.value
    camera = new THREE.PerspectiveCamera(
      50, // 减小视野角度，让模型看起来更合适
      container.clientWidth / container.clientHeight,
      0.1,
      1000
    )
    camera.position.set(cameraPosition.value.x, cameraPosition.value.y, cameraPosition.value.z) // 使用响应式数据中的相机位置

    // 创建渲染器
    renderer = new THREE.WebGLRenderer({
      antialias: true,
      alpha: true, // 启用透明背景
      preserveDrawingBuffer: true, // 用于截图
      premultipliedAlpha: false // 确保透明度正确处理
    })


    renderer.setSize(container.clientWidth, container.clientHeight)
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))
    renderer.shadowMap.enabled = true
    renderer.shadowMap.type = THREE.PCFSoftShadowMap
    // 禁用色调映射，避免颜色偏移
    renderer.toneMapping = THREE.ACESFilmicToneMapping
    renderer.toneMappingExposure = 2.0  // 标准曝光度
    renderer.outputColorSpace = THREE.SRGBColorSpace
    // 设置完全透明背景
    renderer.setClearColor(0x000000, 0) // 完全透明


    // 禁用任何可能的颜色处理
    renderer.autoClear = true
    renderer.autoClearColor = true
    renderer.autoClearDepth = true
    renderer.autoClearStencil = true
    // 确保canvas元素也是透明的
    renderer.domElement.style.background = 'transparent'
    renderer.domElement.style.opacity = '1'

    // 确保canvas能接收鼠标事件
    renderer.domElement.style.pointerEvents = 'auto'
    renderer.domElement.style.touchAction = 'none'
    renderer.domElement.style.userSelect = 'none'


    container.appendChild(renderer.domElement)

    // 创建控制器
    controls = new OrbitControls(camera, renderer.domElement)
    controls.enableDamping = true
    controls.dampingFactor = 0.05
    controls.enableZoom = true
    controls.enablePan = false
    controls.enableRotate = true

    // 设置旋转中心点
    controls.target.set(0, 0, 0)

    // 设置距离限制
    controls.maxDistance = 10
    controls.minDistance = 2

    // 设置垂直旋转角度范围（重要！）
    // controls.minPolarAngle = 0 // 允许从顶部看
    // controls.maxPolarAngle = Math.PI // 允许从底部看

    const fixedPolarAngle = Math.PI / 2 // 固定为水平角度（90°）

    controls.minPolarAngle = fixedPolarAngle
    controls.maxPolarAngle = fixedPolarAngle


    // 设置水平旋转范围（无限制）
    controls.minAzimuthAngle = -Infinity
    controls.maxAzimuthAngle = Infinity

    // 确保鼠标/触摸事件正确处理
    controls.mouseButtons = {
      LEFT: THREE.MOUSE.ROTATE,
      MIDDLE: THREE.MOUSE.DOLLY,
      RIGHT: THREE.MOUSE.PAN
    }

    // 触摸事件设置
    controls.touches = {
      ONE: THREE.TOUCH.ROTATE,
      TWO: THREE.TOUCH.DOLLY_PAN
    }

    // 添加光照
    setupLighting()

    // 加载模型
    await loadShoeModel()

    // 加载完成后，给 AB 区和 public 下的默认贴图先贴上
    applyInitialDefaultTextures()

    // 开始渲染循环
    animate()

    // 设置响应式
    setupResponsive()

    loading.value = false

    // 3秒后隐藏手势提示
    setTimeout(() => {
      showGestureHint.value = false
    }, 3000)

  } catch (err) {
    console.error('初始化Three.js失败:', err)
    error.value = '初始化失败，请刷新页面重试'
    loading.value = false
  }
}

// 设置光照
const setupLighting = () => {
  // 环境光 - 使用白光，避免色彩偏移
  ambientLight = new THREE.AmbientLight(0xffffff, lightingIntensity.value.ambient)
  scene.add(ambientLight)

  // 主光源 - 使用纯白光
  directionalLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.directional)
  directionalLight.position.set(5, 5, 5)
  directionalLight.castShadow = true
  directionalLight.shadow.mapSize.width = 2048
  directionalLight.shadow.mapSize.height = 2048
  scene.add(directionalLight)

  // 补充光源 - 使用纯白光
  fillLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.fill)
  fillLight.position.set(-5, 0, -5)
  scene.add(fillLight)

  // 添加顶部光源
  topLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  topLight.position.set(0, 10, 0)
  scene.add(topLight)

  // 添加底部光源
  bottomLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional * 0.8)
  bottomLight.position.set(0, -10, 0)
  scene.add(bottomLight)

  // 添加左侧光源
  leftLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  leftLight.position.set(-10, 0, 0)
  scene.add(leftLight)

  // 添加右侧光源
  rightLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  rightLight.position.set(10, 0, 0)
  scene.add(rightLight)

  // 添加前方聚光灯
  spotLight = new THREE.SpotLight(0xffffff, lightingIntensity.value.directional * 0.8, 100, Math.PI / 6, 0.5)
  spotLight.position.set(0, 0, 15)
  spotLight.target.position.set(0, 0, 0)
  spotLight.castShadow = true
  scene.add(spotLight)
  scene.add(spotLight.target)
}

// 修改加载鞋子模型函数
const loadShoeModel = async () => {
  try {
    const { scene: clonedScene, animations } = await getClonedGLTF(withBase('xie.gltf'))
    shoeModel = clonedScene

    // 设置模型属性 - 放大3倍
    shoeModel.scale.set(11, 11, 11)
    shoeModel.position.set(0, 0, 0)

    // 遍历模型，设置材质和阴影
    let meshIndex = 0
    shoeModel.traverse((child) => {
      if (child instanceof THREE.Mesh) {
        // 保存原始材质到userData（克隆后取一个代表材质）
        if (child.material) {
          child.userData.originalMaterial = (Array.isArray(child.material)
            ? child.material[0]
            : child.material
          )?.clone?.()
        }

        child.castShadow = true
        child.receiveShadow = true

        // 确保材质没有额外的颜色偏移
        if (child.material) {
          if (Array.isArray(child.material)) {
            child.material.forEach((mat) => {
              if (mat instanceof THREE.MeshStandardMaterial) {
                mat.envMapIntensity = 0
              }
            })
          } else if (child.material instanceof THREE.MeshStandardMaterial) {
            child.material.envMapIntensity = 0
          }
          ; (child.material as any).needsUpdate = true
        }

        meshList.value.push({ name: child.name || `Mesh ${meshIndex}`, index: meshIndex, mesh: child })
        meshIndex++
      }
    })

    scene.add(shoeModel)

    // 如果有动画，设置动画混合器
    if (animations && animations.length > 0) {
      mixer = new THREE.AnimationMixer(shoeModel)
      animations.forEach((clip) => {
        const action = mixer.clipAction(clip)
        action.play()
      })
    }

    // 打印 Mesh 列表，方便定位名称
    logMeshNames(300)
  } catch (err) {
    console.error('模型加载失败:', err)
    throw err
  }
}

// 根据关键词集合匹配 Mesh（支持包含匹配和父级节点名匹配）并应用贴图
const applyTextureToMeshesByKeywords = (keywords: string[], texturePath: string) => {
  if (!shoeModel) return

  const tryApply = (texture: THREE.Texture) => {
    // 确保颜色空间正确
    // @ts-ignore - 兼容不同 three 版本
    texture.colorSpace = (THREE as any).SRGBColorSpace || (THREE as any).sRGBEncoding
    texture.wrapS = THREE.ClampToEdgeWrapping
    texture.wrapT = THREE.ClampToEdgeWrapping
    texture.repeat.set(1, 1)
    texture.offset.set(0, 0)
    texture.minFilter = THREE.LinearMipmapLinearFilter
    texture.magFilter = THREE.LinearFilter
    texture.flipY = false

    let appliedCount = 0
    const lowers = keywords.map(k => k.trim().toLowerCase()).filter(Boolean)

    shoeModel.traverse((child) => {
      if (child instanceof THREE.Mesh) {
        const meshName = (child.name || '').trim()
        const meshLower = meshName.toLowerCase()

        const parentNames: string[] = []
        let p: any = child.parent
        while (p && p !== shoeModel && parentNames.length < 4) {
          if (p.name) parentNames.push(String(p.name).toLowerCase())
          p = p.parent
        }

        const matched = lowers.some(k =>
          meshLower.includes(k) || parentNames.some(n => n.includes(k))
        )

        if (matched) {
          if (child.material instanceof THREE.MeshStandardMaterial) {
            const newMaterial = child.material.clone()
            newMaterial.map = texture
            newMaterial.needsUpdate = true
            child.material = newMaterial
            appliedCount++
          } else if (Array.isArray(child.material)) {
            child.material = child.material.map((mat) => {
              if (mat instanceof THREE.MeshStandardMaterial) {
                const newMat = mat.clone()
                newMat.map = texture
                newMat.needsUpdate = true
                return newMat
              }
              return mat
            })
            appliedCount++
          }
        }
      }
    })
    if (appliedCount === 0) {
      console.warn('[贴图未匹配] 未找到匹配的 Mesh：', keywords, ' 当前可用Mesh示例：', meshList.value.slice(0, 10))
    } else {
      console.info('[贴图已应用]', texturePath, ' 匹配关键词：', keywords, ' 数量：', appliedCount)
    }
    return appliedCount
  }

  const candidates: string[] = Array.from(new Set([
    texturePath,
    withBase(texturePath.replace(/^\//, '')),
    `/` + texturePath.replace(/^\//, ''),
    texturePath.replace(/^\//, ''),
    `./` + texturePath.replace(/^\//, ''),
    `${window.location.origin}${withBase(texturePath.replace(/^\//, ''))}`
  ]))

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      const key = candidates[0]
      if (key) textureCache[key] = texture
      tryApply(texture)
    })
    .catch((err) => {
      console.error('[贴图加载失败-所有候选均失败]', texturePath, err)
    })
}

// 移除指定网格的材质
const removeMaterialFromMesh = (keywords: string[]) => {
  if (!shoeModel) return

  const lowers = keywords.map(k => k.trim().toLowerCase()).filter(Boolean)
  let removedCount = 0

  shoeModel.traverse((child) => {
    if (child instanceof THREE.Mesh) {
      const meshName = (child.name || '').trim()
      const meshLower = meshName.toLowerCase()

      const parentNames: string[] = []
      let p: any = child.parent
      while (p && p !== shoeModel && parentNames.length < 4) {
        if (p.name) parentNames.push(String(p.name).toLowerCase())
        p = p.parent
      }

      const matched = lowers.some(k =>
        meshLower.includes(k) || parentNames.some(n => n.includes(k))
      )

      if (matched) {
        child.material = new THREE.MeshBasicMaterial({ visible: false })
        removedCount++
      }
    }
  })

  if (removedCount > 0) {
    console.info('[材质已移除]', keywords, '数量：', removedCount)
  } else {
    console.warn('[材质移除失败] 未找到匹配的 Mesh：', keywords)
  }
}

// 应用默认贴图：AB + public 根目录的 xiedai/xiedi/xiedian
const applyInitialDefaultTextures = () => {
  // A/B 默认
  applyTextureToMeshA(getTexturePath('A', selectedATexture.value))
  applyTextureToMeshB(getTexturePath('B', selectedBTexture.value))

  // public 根目录（Vite 会以站点根路径提供）
  const publicDefaults: Array<{ keywords: string[]; path: string }> = [
    {
      path: withBase('tietu/xiedai.png'),
      keywords: ['xiedai']
    },
    {
      path: withBase('tietu/xiedi.png'),
      keywords: ['xiedi', 'logoai']
    },
    {
      path: withBase('tietu/xian.png'),
      keywords: ['xian']
    },
    {
      path: withBase('tietu/xian2.png'),
      keywords: ['xian2']
    },
    {
      path: withBase('tietu/xiedian.png'),
      keywords: ['xiedian']
    }
  ]

  publicDefaults.forEach(({ keywords, path }) => applyTextureToMeshesByKeywords(keywords, path))

  // 兜底：对已知精确名称再匹配一次（避免关键词不命中）
  const applyExact = (meshName: string, path: string) => applyTextureToMeshesByKeywords([meshName], path)
  applyExact('xiedai', withBase('tietu/xiedai.png'))
  applyExact('xian', withBase('tietu/xian.png'))     // xian 用专属的 xian.png 贴图
  applyExact('xiedian', withBase('tietu/xiedian.png'))

  // 兜底2：如果仍未命中，尝试按常见索引（基于你提供的清单顺序，安全起见仅当索引存在时）
  const byIndex = (idx: number, path: string) => {
    const item = meshList.value.find(m => m.index === idx)
    if (item) {
      applyTextureToMeshesByKeywords([item.name], path)
    }
  }
  byIndex(2, withBase('tietu/xiedai.png'))  // index 2: xiedai
  byIndex(3, withBase('tietu/xian.png'))    // index 3: xian 用专属的 xian.png 贴图
  byIndex(7, withBase('tietu/xiedian.png')) // index 7: xiedian


}

// 渲染循环
const animate = () => {
  animationId = requestAnimationFrame(animate)

  // 更新控制器
  controls.update()

  // 更新动画
  if (mixer && isAnimating.value) {
    mixer.update(0.016)
  }

  // 自动旋转
  if (shoeModel && isAnimating.value) {
    shoeModel.rotation.y += 0.005
  }

  // 渲染
  renderer.render(scene, camera)
}


// 改变环境
const changeEnvironment = () => {
  const environments: { [key: string]: number } = {
    studio: 0xf0f0f0,
    outdoor: 0x87CEEB,
    dark: 0x222222
  }

  scene.background = new THREE.Color(environments[selectedEnvironment.value])
}

// 切换动画
const toggleAnimation = () => {
  isAnimating.value = !isAnimating.value
}

// 重置视角
const resetView = () => {
  cameraPosition.value = { x: 0, y: 0, z: 5 }
  updateCameraPosition()
  controls.reset()
  if (shoeModel) {
    shoeModel.rotation.set(0, 0, 0)
  }

  // 重置灯光强度
  lightingIntensity.value = {
    ambient: 3.0,
    directional: 3.0,
    fill: 2.0,
    additional: 1.5
  }
  updateLightingIntensity()
}

// 截图
const takeScreenshot = () => {
  const canvas = renderer.domElement
  const link = document.createElement('a')
  link.download = 'shoe-screenshot.png'
  link.href = canvas.toDataURL()
  link.click()
}

// 全屏
const toggleFullscreen = () => {
  if (!document.fullscreenElement) {
    containerRef.value?.requestFullscreen()
  } else {
    document.exitFullscreen()
  }
}

// 重试加载
const retryLoad = () => {
  error.value = ''
  loading.value = true
  loadingProgress.value = 0
  initThree()
}

// 响应式设置
const setupResponsive = () => {
  const handleResize = () => {
    if (!containerRef.value) return

    const container = containerRef.value
    camera.aspect = container.clientWidth / container.clientHeight
    camera.updateProjectionMatrix()
    renderer.setSize(container.clientWidth, container.clientHeight)
  }

  window.addEventListener('resize', handleResize)

  // 监听容器大小变化
  const resizeObserver = new ResizeObserver(handleResize)
  resizeObserver.observe(containerRef.value!)

  // 监听屏幕方向变化
  window.addEventListener('orientationchange', () => {
    setTimeout(handleResize, 100) // 延迟处理，确保新尺寸生效
  })
}



// 颜色映射表
const colorMapping: Record<string, { name: string, color: string }> = {
  // A区域颜色
  'A1.png': { name: '雀茶', color: '#8B572A' },
  'A2.png': { name: '樱落', color: '#BA6A74' },
  'A3.png': { name: '衰柳', color: '#C4D69B' },
  'A4.png': { name: '盈盈', color: '#D9A1B3' },
  'A5.png': { name: '唐茶', color: '#A57A68' },
  'A6.png': { name: '古檀', color: '#2B1B12' },

  // B区域颜色
  'B2.png': { name: '金豹', color: '#C49D4D' },
  'B1.png': { name: '凝露', color: '#5C0A1D' },
  'B3.png': { name: '木檀', color: '#9B738F' },
  'B4.png': { name: '柳染', color: '#B4B24B' },
  'B5.png': { name: '胡杏', color: '#FFF1E5' },
  'B6.png': { name: '常春', color: '#C98E85' }
}

// 获取颜色名称
const getColorName = (folder: 'A' | 'B', textureName: string) => {
  const mapping = colorMapping[textureName]
  return mapping ? mapping.name : textureName.replace('.png', '')
}





// 获取颜色
const getColorForTexture = (folder: 'A' | 'B', textureName: string) => {
  const mapping = colorMapping[textureName]
  return mapping ? mapping.color : '#CCCCCC'
}

// 颜色选择器缩略图样式（支持图片预览）
const getSwatchStyle = (folder: 'A' | 'B', textureName: string) => {
  if (folder === 'B' && textureName === 'B2.png') {
    const url = getTexturePath('B', 'B2.png')
    return {
      backgroundImage: `url(${url})`,
      backgroundSize: 'cover',
      backgroundPosition: 'center',
      backgroundRepeat: 'no-repeat'
    } as Record<string, string>
  }
  return { backgroundColor: getColorForTexture(folder, textureName) } as Record<string, string>
}

// 定制完成
const completeCustomization = () => {
  alert('定制完成！')
  // 可以选择保存当前的鞋子模型或贴图设置
  // 例如，将当前的贴图应用到实际的鞋子模型
  // 或者将当前的贴图保存为新的模型
  console.log('当前选中的A贴图:', selectedATexture.value)
  console.log('当前选中的B贴图:', selectedBTexture.value)
  console.log('当前相机位置:', cameraPosition.value)
  console.log('当前灯光强度:', lightingIntensity.value)
  console.log('当前动画状态:', isAnimating.value)

}

const onConfirm = () => {
  showConfirm.value = false
  completeCustomization()
}





// 生命周期
onMounted(async () => {
  await nextTick()
  initThree()

    // 将Mesh操作函数添加到全局，方便控制台调用
    ; (window as any).getMeshByIndex = getMeshByIndex
    ; (window as any).getMeshByName = getMeshByName
    ; (window as any).meshList = meshList
    ; (window as any).switchToATexture = switchToATexture
    ; (window as any).switchToBTexture = switchToBTexture
    ; (window as any).getColorName = getColorName
    ; (window as any).getColorForTexture = getColorForTexture
    ; (window as any).completeCustomization = completeCustomization
    ; (window as any).dumpMeshNames = (limit?: number) => logMeshNames(limit)

})

onUnmounted(() => {
  if (animationId) {
    cancelAnimationFrame(animationId)
  }
  if (renderer) {
    renderer.dispose()
  }
  if (controls) {
    controls.dispose()
  }

})
</script>

<style>
/* 控制面板滚动条样式 */
.control-panel::-webkit-scrollbar {
  width: 6px;
}

.control-panel::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.control-panel::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
  transition: background 0.2s;
}

.control-panel::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

/* 滑块样式 */
.slider::-webkit-slider-thumb {
  appearance: none;
  height: 16px;
  width: 16px;
  border-radius: 50%;
  background: #3498db;
  cursor: pointer;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
}

.slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3498db;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
}

.slider::-webkit-slider-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: #ddd;
  border-radius: 4px;
}

.slider::-moz-range-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: #ddd;
  border-radius: 4px;
  border: none;
}

/* 移动端适配 */
@media (max-width: 768px) {

  /* 确保3D视窗在移动端有合适的高度 */
  .relative>div[ref="containerRef"] {
    height: calc(100vh - 300px) !important;
    min-height: 300px !important;
  }

  /* 底部面板在移动端的样式调整 */
  .absolute.bottom-0 {
    max-height: 60vh !important;
    overflow-y: auto !important;
  }

  /* 颜色选择器在移动端稍小一些 */
  .w-12.h-12 {
    width: 2.5rem !important;
    height: 2.5rem !important;
  }

  /* 调整颜色选择器间距 */
  .space-x-4>*+* {
    margin-left: 0.75rem !important;
  }

  /* 调整按钮高度 */
  .py-4 {
    padding-top: 0.75rem !important;
    padding-bottom: 0.75rem !important;
  }
}

/* 小屏幕适配 */
@media (max-width: 480px) {

  /* 进一步减小3D视窗高度 */
  .relative>div[ref="containerRef"] {
    height: calc(100vh - 350px) !important;
    min-height: 250px !important;
  }

  /* 颜色选择器更小 */
  .w-12.h-12 {
    width: 2rem !important;
    height: 2rem !important;
  }

  /* 减小间距 */
  .space-x-4>*+* {
    margin-left: 0.5rem !important;
  }

  .space-y-6>*+* {
    margin-top: 1rem !important;
  }

  /* 调整内边距 */
  .p-6 {
    padding: 1rem !important;
  }

  /* 调整字体大小 */
  .text-lg {
    font-size: 1rem !important;
  }

  /* 调整按钮文字大小 */
  .text-lg.font-semibold {
    font-size: 1rem !important;
  }
}

/* 横屏适配 */
@media (orientation: landscape) and (max-height: 600px) {
  .relative>div[ref="containerRef"] {
    height: 50vh !important;
    min-height: 200px !important;
  }

  .absolute.bottom-0 {
    max-height: 45vh !important;
  }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {

  /* 触摸设备上的按钮反馈 */
  .cursor-pointer:active {
    transform: scale(0.95) !important;
    transition: transform 0.1s !important;
  }

  /* 颜色选择器的触摸反馈 */
  .w-12.h-12:active {
    transform: scale(0.9) !important;
  }

  /* 移除hover效果 */
  .hover\:border-gray-400:hover {
    border-color: inherit !important;
  }

  .hover\:from-orange-500:hover {
    background-image: inherit !important;
  }
}

/* 确保滚动条样式 */
.overflow-y-auto::-webkit-scrollbar {
  width: 4px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

/* 确保白色颜色有边框可见性 */
.w-12.h-12[style*="background-color: rgb(255, 255, 255)"],
.w-12.h-12[style*="background-color: #FFFFFF"],
.w-12.h-12[style*="background-color: #FDF5E6"] {
  border: 4px solid #e5e5e5 !important;
}

/* 无障碍适配 */
@media (prefers-reduced-motion: reduce) {
  .animate-spin {
    animation: none !important;
  }

  .transition-all {
    transition: none !important;
  }

  .transform {
    transform: none !important;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .bg-gradient-to-b {
    background: #f5f5f5 !important;
  }

  .text-gray-600 {
    color: #000000 !important;
  }

  .border-gray-300 {
    border-color: #000000 !important;
  }
}
</style>