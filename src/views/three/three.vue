<template>
  <div class="relative w-screen h-screen overflow-hidden ">

    <div class="absolute z-10 left-1/2 top-[2%] transform -translate-x-1/2">
      <svg width="149" height="20" viewBox="0 0 149 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_721_3922)">
          <path
            d="M32.9507 15.5312H31.9854C32.8448 16.9166 33.9051 18.1665 35.1314 19.24L35.4266 19.4763V17.7037L35.3849 17.6793C34.4265 17.1499 33.5956 16.4166 32.9507 15.5312Z"
            fill="#0C0C0C" />
          <path
            d="M30.6274 8.15953H35.7146V6.83871H30.7837V5.41361H34.6902V4.18664H30.7837V2.87277H35.1382V1.62494H30.7837V0.015625H29.5024V1.62494H25.4292V2.8971H29.5024V4.21097H25.9327V5.43794H29.5024V6.83871H25.1965V8.15257H28.912C27.596 9.03544 27.1758 9.46644 25.5715 10.3702V11.4546L29.2176 11.2982C26.4396 12.7164 27.3633 12.2784 25.1826 13.3003V14.3709H29.4294V18.3333C29.4294 18.5071 29.3843 18.5558 29.2072 18.5766C28.6794 18.5766 28.3183 18.5766 28.1655 18.5766V19.8592C28.7627 19.8592 29.669 19.887 30.1691 19.6229C30.6691 19.3587 30.7177 18.9764 30.7177 18.3437V14.3813H33.9679C34.3547 14.8018 34.7651 15.1998 35.1972 15.5735L35.4889 15.8099V14.0337L35.4472 14.0094C34.4917 13.4788 33.6624 12.7471 33.0165 11.8648H32.0512C32.3599 12.372 32.6949 12.8628 33.0547 13.3351H27.1515C29.36 12.4765 32.2838 10.603 32.7977 10.2902C31.947 8.96939 32.4956 9.8036 32.0824 9.14319C32.0824 9.14319 31.2837 9.76536 30.5059 10.2902L27.214 10.4188C28.6516 9.74451 30.6101 8.16996 30.6274 8.15953Z"
            fill="#0C0C0C" />
          <path
            d="M12.2577 13.3785H15.9871V11.9881H11.8653V10.2502H15.9871V8.92593H8.55605V3.95547H10.1846V6.68749C10.1683 6.91933 10.2435 7.14834 10.3942 7.32518C10.5449 7.50202 10.7589 7.61253 10.9902 7.63292H13.7057C13.9364 7.61167 14.1496 7.50079 14.2995 7.32405C14.4495 7.14731 14.5243 6.91878 14.5078 6.68749V3.95547H16.2232V2.65203H14.5078V0.0521042H13.3029V2.65203H11.3549V0.03125H10.1846V2.65203H8.55605V0.271084H7.33027V2.65203H6.22949V3.95547H7.33027V9.204C7.31288 9.45502 7.39435 9.70288 7.55725 9.89452C7.72015 10.0862 7.95152 10.2064 8.20185 10.2294H10.5597V11.9673H6.66009V13.3576H10.2194C9.93809 13.8095 8.83037 15.4431 6.4552 17.6538L6.4309 17.6781V19.8748L7.02121 19.204C8.25587 17.7405 9.40265 16.205 10.4555 14.6055L10.5701 14.3934V19.8401H11.8479V14.2787L11.9625 14.4873C12.9487 16.3156 14.2821 18.1126 15.3586 19.0684L16.2788 19.7636V17.8206L16.2441 17.7963C14.6347 16.604 13.2795 15.102 12.2577 13.3785ZM11.3618 6.4268V3.95547H13.3099V6.4268H11.3618Z"
            fill="#0C0C0C" />
          <path
            d="M3.72248 12.3236H5.49344V10.8151H3.72248V8.14567H5.22259V2.05251C5.24473 1.74651 5.14567 1.44407 4.94684 1.21058C4.74801 0.97708 4.46537 0.83128 4.16002 0.804688H0.468785V8.14567H1.37857C2.04528 8.14567 2.44114 8.49325 2.44114 9.48387V17.3706L1.514 17.7598V10.2277H0.506988V18.1387L0 18.3785V19.9983L0.111121 19.9531C0.201406 19.9218 2.36823 19.098 5.44483 16.5225L5.83027 16.1749L5.865 15.6709L3.72248 16.9187V12.3236ZM3.90306 2.20545V6.72405H1.77444V2.20545H3.90306Z"
            fill="#0C0C0C" />
          <path d="M22.4464 0.539062H21.165V19.8613H22.4464V0.539062Z" fill="#0C0C0C" />
          <path
            d="M19.46 3.27344V3.36729C19.4688 5.65442 19.2654 7.93743 18.8523 10.1869L18.835 10.2773L19.3211 10.3711L19.3454 10.3016C20.0955 8.34817 20.6476 4.19454 20.6476 3.36729V3.27692L19.46 3.27344Z"
            fill="#0C0C0C" />
          <path
            d="M23.5433 4.2544L23.5225 4.19531H22.9287L22.9843 4.49771C23.3072 6.05141 23.6232 9.14491 23.6232 9.16229L24.6858 8.74519C24.4318 7.21876 24.0497 5.7165 23.5433 4.2544Z"
            fill="#0C0C0C" />
          <path
            d="M24.5368 17.6619L24.4951 17.6863V19.459L24.7903 19.2226C26.0121 18.1502 27.0729 16.907 27.9398 15.5312H26.9745C26.3257 16.4098 25.4939 17.1368 24.5368 17.6619Z"
            fill="#0C0C0C" />
          <path
            d="M52.934 1.625V3.36292H47.5864V19.3518H45.4439V5.90029C45.4443 5.56633 45.379 5.23555 45.2516 4.92688C45.1243 4.61821 44.9374 4.3377 44.7016 4.10139C44.4659 3.86509 44.1859 3.67762 43.8777 3.54971C43.5695 3.42181 43.2391 3.35597 42.9055 3.35597H39.8115V1.625H52.934Z"
            fill="#0C0C0C" />
          <path d="M58.4628 1.625V19.3796H56.3203V1.625H58.4628Z" fill="#0C0C0C" />
          <path d="M99.6738 1.625V19.3796H97.5312V1.625H99.6738Z" fill="#0C0C0C" />
          <path
            d="M71.0778 12.1906H74.7308V16.7092C73.0363 18.3186 69.7478 18.2351 67.7407 17.1159C65.6573 15.9515 64.4523 13.0109 64.4523 10.6161C64.4448 9.36955 64.7386 8.13968 65.3088 7.03146C65.879 5.92324 66.7087 4.96956 67.7269 4.25182C70.2722 2.56951 73.0606 2.71549 75.5364 4.10931V2.68769C74.1791 1.88824 72.6378 1.45515 71.0631 1.43078C69.4885 1.40641 67.9345 1.79159 66.5532 2.54865C63.8308 4.02588 62.0146 6.89346 62.0146 10.8246C62.0146 14.0398 63.5113 16.8587 66.4073 18.4263C67.913 19.2119 69.5921 19.6052 71.2896 19.5699C73.3118 19.6069 75.285 18.9453 76.8768 17.6964V10.7899H71.0778V12.1906Z"
            fill="#0C0C0C" />
          <path
            d="M140.507 2.71403C143.913 2.71403 146.681 6.18987 146.681 10.4895C146.681 14.7891 143.903 18.2649 140.507 18.2649C137.111 18.2649 134.333 14.7891 134.333 10.4895C134.333 6.18987 137.111 2.71403 140.507 2.71403ZM140.507 1.41406C135.819 1.41406 132.017 5.47732 132.017 10.4895C132.017 15.5017 135.836 19.5684 140.507 19.5684C145.177 19.5684 148.983 15.5051 148.983 10.4895C148.983 5.47385 145.184 1.41406 140.493 1.41406H140.507Z"
            fill="#0C0C0C" />
          <path
            d="M124.675 9.20144C122.894 8.53756 120.942 7.81111 120.828 5.99324C120.799 5.56176 120.86 5.1291 121.007 4.72228C121.153 4.31545 121.382 3.9432 121.678 3.62877C121.975 3.31433 122.333 3.06447 122.73 2.89478C123.128 2.72509 123.556 2.63922 123.988 2.64253C125.856 2.64253 126.634 3.36898 128.047 4.52992L128.089 3.07354C125.943 0.925465 121.956 0.915036 119.827 2.79547C117.998 4.41173 118.025 7.17503 119.077 8.57232C120.13 9.96961 121.564 10.5223 123.293 11.1757C125.297 11.9647 126.724 12.7329 126.724 14.7037C126.724 16.6745 125.467 18.0475 123.196 18.0475C121.06 18.0475 118.362 15.6457 118.362 15.6457V17.2967C120.359 19.2988 123.658 20.3207 126.463 18.9025C127.295 18.5072 127.997 17.8811 128.483 17.0986C128.97 16.316 129.223 15.41 129.21 14.4882C129.21 11.4677 127.453 10.1955 124.675 9.20144Z"
            fill="#0C0C0C" />
          <path
            d="M110.487 9.20144C108.706 8.53756 106.754 7.81111 106.64 5.99324C106.612 5.56176 106.673 5.1291 106.819 4.72228C106.965 4.31545 107.194 3.9432 107.491 3.62877C107.787 3.31433 108.145 3.06447 108.543 2.89478C108.94 2.72509 109.368 2.63922 109.8 2.64253C111.668 2.64253 112.446 3.36898 113.859 4.52992L113.901 3.07354C111.755 0.925465 107.765 0.915036 105.64 2.79547C103.81 4.40826 103.841 7.18893 104.883 8.57927C105.925 9.96961 107.369 10.5292 109.098 11.1827C111.102 11.9717 112.526 12.7399 112.526 14.7107C112.526 16.6815 111.272 18.0544 109.001 18.0544C106.866 18.0544 104.167 15.6526 104.167 15.6526V17.3036C106.164 19.3057 109.46 20.3276 112.269 18.9095C113.104 18.5148 113.807 17.8882 114.296 17.1043C114.785 16.3204 115.038 15.4122 115.026 14.4882C115.026 11.4503 113.269 10.1955 110.487 9.20144Z"
            fill="#0C0C0C" />
          <path
            d="M93.8507 19.3362L89.1212 11.7797C90.2402 11.2998 91.1594 10.4479 91.7235 9.36792C92.2875 8.28798 92.4618 7.04624 92.2168 5.85255C91.9718 4.65886 91.3227 3.58642 90.3791 2.81647C89.4354 2.04652 88.2551 1.62628 87.0377 1.62676C84.9126 1.62676 83.6868 1.62675 81.5651 1.60938C81.5651 1.60938 81.5234 19.3118 81.5234 19.3918H83.6694V12.2003H86.9335L91.861 19.3327L93.8507 19.3362ZM86.4787 10.7891H83.7007V3.02057H86.4787C87.4877 3.05078 88.4454 3.47326 89.1484 4.19841C89.8515 4.92355 90.2448 5.89432 90.2448 6.90482C90.2448 7.91533 89.8515 8.88609 89.1484 9.61123C88.4454 10.3364 87.4877 10.7589 86.4787 10.7891Z"
            fill="#0C0C0C" />
        </g>
        <defs>
          <clipPath id="clip0_721_3922">
            <rect width="149" height="20" fill="white" />
          </clipPath>
        </defs>
      </svg>

    </div>

    <!-- Three.js 渲染容器 -->
    <div ref="containerRef" class="w-full h-[55%] pt-10 relative" style="background: transparent;"></div>

    <!-- 字体 -->
    <div class="absolute z-10 left-1/2 top-[30%] transform -translate-x-1/2">
      <svg width="323" height="11" viewBox="0 0 323 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_721_3940)">
          <path
            d="M1.87809 0C1.6768 0.351818 1.50372 0.71731 1.3603 1.09342C1.19262 1.5234 1.05587 1.96351 0.950967 2.41078C0.831482 2.92178 0.741551 3.43849 0.681574 3.95867C0.616326 4.48889 0.583618 5.02222 0.583614 5.55599C0.58291 6.08649 0.61562 6.61656 0.681574 7.14341C0.741156 7.64514 0.831101 8.14324 0.950967 8.63532C1.05539 9.0723 1.19336 9.50158 1.3638 9.91976C1.51036 10.2856 1.68456 10.6411 1.88509 10.9835H1.53523C1.29635 10.6408 1.08469 10.2819 0.901987 9.90987C0.699085 9.49456 0.534056 9.06378 0.408685 8.62215C0.268187 8.13208 0.16299 7.63364 0.0938113 7.13023C0.0211212 6.60827 -0.0151078 6.0824 -0.014644 5.55599C-0.0145629 5.02192 0.0216617 4.4884 0.0938113 3.95867C0.164227 3.43893 0.270578 2.92406 0.412184 2.41735C0.54224 1.96749 0.707113 1.52719 0.905483 1.09999C1.08267 0.718586 1.29331 0.351763 1.53523 0.00329663L1.87809 0Z"
            fill="black" />
          <path
            d="M7.4798 7.44283C7.33757 7.95242 7.07306 8.4245 6.70662 8.82277C6.56385 8.98091 6.38644 9.10811 6.18655 9.19565C5.98667 9.2832 5.76904 9.32901 5.54858 9.32995C5.02321 9.32797 4.52005 9.13022 4.14915 8.77996C3.6973 8.35754 3.36217 7.83741 3.17304 7.26499C2.69492 5.85196 2.69492 4.33401 3.17304 2.92098C3.36435 2.34777 3.70049 1.82677 4.15265 1.4027C4.50958 1.0589 4.99601 0.861305 5.5066 0.852707C5.93219 0.837164 6.34709 0.980382 6.66113 1.25122C6.93851 1.4855 7.1695 1.76428 7.34336 2.07457L7.66173 0.875764H7.7387V4.44583H7.66173C7.52179 3.24703 7.27455 2.36879 6.92003 1.8111C6.79104 1.56427 6.59207 1.35579 6.3451 1.20874C6.09814 1.0617 5.81279 0.981795 5.52059 0.977859C4.88618 0.977859 4.41971 1.34233 4.12116 2.07127C3.77288 3.04871 3.6164 4.07763 3.65935 5.10779C3.6285 6.08291 3.78252 7.05541 4.11416 7.97966C4.41504 8.73714 4.92583 9.11589 5.64654 9.11589C5.84767 9.11198 6.04554 9.0673 6.22667 8.98489C6.40779 8.90248 6.56791 8.78428 6.69612 8.63834C7.03367 8.25559 7.27309 7.80483 7.39583 7.32098C7.57189 6.72125 7.66248 6.10215 7.66523 5.47995H7.75619C7.75992 6.14306 7.66692 6.80353 7.4798 7.44283Z"
            fill="black" />
          <path
            d="M10.121 1.41321C10.2957 1.23835 10.5066 1.09901 10.7406 1.00376C10.9747 0.908514 11.227 0.859375 11.482 0.859375C11.737 0.859375 11.9892 0.908514 12.2233 1.00376C12.4574 1.09901 12.6682 1.23835 12.8429 1.41321C13.2969 1.84143 13.6384 2.36359 13.84 2.93806C14.3393 4.34004 14.3393 5.85703 13.84 7.25902C13.6401 7.83422 13.2984 8.35673 12.8429 8.78387C12.6682 8.95873 12.4574 9.09807 12.2233 9.19331C11.9892 9.28856 11.737 9.3377 11.482 9.3377C11.227 9.3377 10.9747 9.28856 10.7406 9.19331C10.5066 9.09807 10.2957 8.95873 10.121 8.78387C9.66206 8.35814 9.31781 7.83534 9.11692 7.25902C8.62248 5.8563 8.62248 4.34078 9.11692 2.93806C9.31951 2.36249 9.66353 1.84004 10.121 1.41321ZM11.482 9.20544C12.1327 9.20544 12.612 8.85742 12.9199 8.16141C13.2278 7.4654 13.3805 6.44335 13.3782 5.09524C13.3782 3.74714 13.2254 2.72618 12.9199 2.03237C12.612 1.33417 12.1327 0.988366 11.482 0.988366C10.8312 0.988366 10.3484 1.33417 10.044 2.03237C9.73967 2.73058 9.58223 3.74824 9.58223 5.09524C9.58223 6.44225 9.73617 7.46321 10.044 8.16141C10.3519 8.85961 10.8312 9.20544 11.482 9.20544Z"
            fill="black" />
          <path
            d="M19.1935 9.17218H14.8238V9.08984L15.0617 9.06678C15.185 9.06038 15.3049 9.02652 15.4116 8.96799C15.4906 8.91677 15.5457 8.83895 15.5655 8.75061C15.5976 8.6189 15.6117 8.48389 15.6075 8.34882V1.84433C15.6118 1.70817 15.5977 1.57205 15.5655 1.43925C15.5457 1.3509 15.4906 1.27309 15.4116 1.22187C15.3042 1.16587 15.1844 1.1343 15.0617 1.12967L14.8203 1.10661V1.00781H17.2693V1.10661L16.9195 1.12967C16.7913 1.12827 16.6648 1.15775 16.5521 1.2153C16.4693 1.26702 16.4096 1.34553 16.3842 1.43595C16.3488 1.5694 16.3335 1.70687 16.3387 1.84433V8.97458C16.6603 9.02331 16.9856 9.04644 17.3113 9.04373H17.6612C17.8175 9.05029 17.9731 9.02035 18.1141 8.95657C18.2551 8.89278 18.3771 8.79714 18.4693 8.67816C18.6796 8.39334 18.8206 8.06835 18.8822 7.72636C18.9731 7.24297 19.0304 6.75451 19.0536 6.26409L19.0921 5.73715H19.1761L19.1935 9.17218Z"
            fill="black" />
          <path
            d="M21.1699 1.41321C21.3446 1.23835 21.5555 1.09901 21.7896 1.00376C22.0236 0.908514 22.2759 0.859375 22.5309 0.859375C22.7859 0.859375 23.0382 0.908514 23.2722 1.00376C23.5063 1.09901 23.7172 1.23835 23.8918 1.41321C24.3482 1.84031 24.691 2.36275 24.8924 2.93806C25.3869 4.34078 25.3869 5.8563 24.8924 7.25902C24.6927 7.83507 24.3496 8.35787 23.8918 8.78387C23.7172 8.95873 23.5063 9.09807 23.2722 9.19331C23.0382 9.28856 22.7859 9.3377 22.5309 9.3377C22.2759 9.3377 22.0236 9.28856 21.7896 9.19331C21.5555 9.09807 21.3446 8.95873 21.1699 8.78387C20.7122 8.35787 20.3691 7.83507 20.1694 7.25902C19.6701 5.85703 19.6701 4.34004 20.1694 2.93806C20.3708 2.36275 20.7136 1.84031 21.1699 1.41321ZM22.5309 9.20544C23.1863 9.20544 23.6656 8.85742 23.9688 8.16141C24.2767 7.46321 24.4271 6.44225 24.4271 5.09524C24.4271 3.74824 24.2767 2.72728 23.9688 2.03237C23.6609 1.33746 23.1851 0.988366 22.5309 0.988366C21.8767 0.988366 21.4009 1.33417 21.093 2.03237C20.7851 2.73058 20.6312 3.74824 20.6312 5.09524C20.6312 6.44225 20.7851 7.46321 21.093 8.16141C21.4009 8.85961 21.8802 9.20544 22.5309 9.20544Z"
            fill="black" />
          <path
            d="M31.2316 7.32496C31.2412 7.78946 31.1811 8.2529 31.0532 8.70161C30.9307 9.08035 30.7033 9.27138 30.4059 9.27138C30.2637 9.2797 30.1222 9.24693 30.0002 9.17749C29.8783 9.10804 29.7818 9.0052 29.7237 8.88274C29.5605 8.5109 29.4761 8.11261 29.4753 7.71028L29.4403 7.01538C29.4253 6.60549 29.3714 6.19768 29.2794 5.79681C29.2234 5.52579 29.0863 5.27551 28.884 5.07555C28.7808 4.98848 28.6602 4.92154 28.5293 4.87858C28.3984 4.83562 28.2597 4.81751 28.1213 4.82527H27.4006V8.34263C27.3949 8.48574 27.4114 8.62887 27.4496 8.76748C27.4721 8.85473 27.5282 8.93103 27.607 8.98156C27.7147 9.03731 27.8342 9.06992 27.9569 9.07706L28.1948 9.10012V9.19562H25.8857V9.09682L26.1236 9.07376C26.2463 9.06662 26.3658 9.03401 26.4735 8.97826C26.5524 8.92773 26.6085 8.85144 26.6309 8.76418C26.663 8.63023 26.6771 8.49304 26.6729 8.3558V1.85131C26.6776 1.7164 26.6647 1.58147 26.6344 1.44952C26.6118 1.36144 26.5558 1.28414 26.477 1.23215C26.3706 1.17343 26.2504 1.14061 26.1271 1.13665L25.8892 1.107V1.01479H28.3802C28.999 0.972079 29.6151 1.12633 30.1295 1.4528C30.3352 1.6311 30.4946 1.85158 30.5953 2.09715C30.696 2.34272 30.7354 2.60681 30.7103 2.86898C30.72 3.22324 30.6256 3.57312 30.4374 3.88004C30.2542 4.16768 29.9837 4.39709 29.6607 4.53873C29.2893 4.70049 28.8839 4.78154 28.4747 4.77586C28.7374 4.80469 28.9881 4.8952 29.2039 5.03907C29.4197 5.18294 29.5936 5.37555 29.7097 5.59922C30.0367 6.19206 30.2286 6.84268 30.273 7.50939L30.3359 8.16807C30.3489 8.37473 30.3876 8.57925 30.4514 8.77737C30.4646 8.82849 30.4955 8.87403 30.5392 8.90682C30.5829 8.93961 30.6369 8.9578 30.6928 8.9585C30.8467 8.9585 30.9657 8.80042 31.0427 8.48755C31.1279 8.10647 31.1678 7.71764 31.1616 7.32826V5.97467H31.2491L31.2316 7.32496ZM29.8986 2.91178V2.8558C29.9349 2.40311 29.812 1.95178 29.5488 1.57138C29.3988 1.41542 29.2122 1.29459 29.0039 1.21854C28.7955 1.14249 28.5712 1.11333 28.3488 1.13335H28.2753C27.9889 1.13477 27.7028 1.15016 27.4181 1.17946V4.69682H28.3452C29.3703 4.69682 29.8986 4.104 29.8986 2.91178Z"
            fill="black" />
          <path
            d="M32.2151 0.00329663C32.457 0.351763 32.6677 0.718586 32.8448 1.09999C33.0435 1.52674 33.2072 1.96714 33.3346 2.41735C33.4774 2.92399 33.585 3.43887 33.6565 3.95869C33.7287 4.48842 33.7649 5.02192 33.765 5.55599C33.7654 6.0824 33.7292 6.60829 33.6565 7.13025C33.5839 7.63313 33.4788 8.13135 33.3416 8.62215C33.2163 9.06378 33.0512 9.49456 32.8483 9.90987C32.6656 10.2819 32.454 10.6408 32.2151 10.9835H31.8652C32.067 10.6412 32.2423 10.2857 32.39 9.91976C32.5605 9.50158 32.6984 9.0723 32.8029 8.63532C32.921 8.14292 33.011 7.64491 33.0723 7.14341C33.1382 6.61656 33.1709 6.08649 33.1702 5.55599C33.1702 5.02222 33.1375 4.48891 33.0723 3.95869C33.0106 3.43873 32.9206 2.92209 32.8029 2.41078C32.6985 1.96302 32.5605 1.5228 32.39 1.09342C32.2418 0.71966 32.0701 0.35454 31.8757 0L32.2151 0.00329663Z"
            fill="black" />
          <path
            d="M300.028 0C299.803 0.349913 299.607 0.715441 299.441 1.09342C299.252 1.52133 299.096 1.96161 298.975 2.41078C298.842 2.92078 298.741 3.4376 298.671 3.95867C298.598 4.48833 298.56 5.02185 298.559 5.55599C298.56 6.08686 298.597 6.61714 298.671 7.14341C298.74 7.64608 298.842 8.14429 298.975 8.63532C299.096 9.07426 299.253 9.50371 299.444 9.91976C299.615 10.2875 299.813 10.643 300.039 10.9835H299.658C299.387 10.6443 299.146 10.2853 298.937 9.90987C298.708 9.49786 298.521 9.06678 298.377 8.62215C298.221 8.13369 298.105 7.635 298.027 7.13023C297.944 6.60918 297.901 6.08296 297.901 5.55599C297.902 5.02138 297.944 4.48753 298.027 3.95867C298.103 3.4374 298.22 2.92219 298.377 2.41735C298.525 1.96485 298.711 1.5243 298.933 1.09999C299.133 0.716178 299.367 0.349266 299.633 0.00329663L300.028 0Z"
            fill="black" />
          <path
            d="M306.637 2.97189C307.202 4.33709 307.202 5.85191 306.637 7.21711C306.386 7.80058 305.958 8.30128 305.406 8.65633C304.832 9.01086 304.157 9.19133 303.471 9.17339H300.76V9.09106L301.033 9.068C301.17 9.06152 301.305 9.02787 301.428 8.9692C301.513 8.91947 301.575 8.84207 301.603 8.75183C301.64 8.6208 301.656 8.48549 301.652 8.35004V1.84555C301.656 1.71011 301.639 1.57483 301.603 1.44376C301.575 1.35352 301.513 1.27612 301.428 1.22639C301.305 1.16751 301.17 1.1349 301.033 1.13089L300.76 1.10124V1.00903H303.471C304.157 0.991097 304.832 1.17156 305.406 1.5261C305.959 1.88334 306.387 2.3863 306.637 2.97189ZM306.116 5.09285C306.126 4.41377 306.05 3.73602 305.889 3.07399C305.764 2.54163 305.477 2.05512 305.063 1.67429C304.608 1.29985 304.015 1.1083 303.412 1.14075H303.279C303.015 1.13583 302.752 1.16016 302.495 1.21322V8.9725C302.753 9.03082 303.017 9.05848 303.282 9.05484H303.412C304.431 9.05484 305.131 8.69365 305.511 7.97129C305.945 7.06863 306.149 6.08287 306.106 5.09285H306.116Z"
            fill="black" />
          <path
            d="M314.246 1.12016H314.075C313.902 1.13181 313.74 1.20341 313.62 1.32107C313.485 1.48357 313.396 1.67655 313.365 1.88094C313.297 2.23183 313.268 2.58826 313.277 2.94472V9.16596H312.934L308.736 1.36059V7.32166C308.721 7.67563 308.769 8.02946 308.876 8.36896C308.943 8.57601 309.081 8.75652 309.268 8.88274C309.463 8.98645 309.681 9.04726 309.905 9.06059L310.107 9.08035V9.17585H307.595V9.09352L307.735 9.07376C307.919 9.06669 308.096 9.00436 308.239 8.89592C308.386 8.75557 308.484 8.57628 308.519 8.38215C308.592 8.03742 308.623 7.68615 308.614 7.33483V2.53634C308.631 2.18446 308.552 1.83427 308.386 1.51867C308.307 1.4064 308.2 1.31423 308.075 1.25044C307.949 1.18664 307.808 1.15321 307.665 1.1531L307.459 1.13664V1.03782H309.558L313.169 7.68393V2.95459C313.181 2.58855 313.139 2.2227 313.043 1.86777C312.986 1.65053 312.853 1.45779 312.665 1.32107C312.46 1.20283 312.226 1.13697 311.986 1.13005H311.752V1.03125H314.264L314.246 1.12016Z"
            fill="black" />
          <path
            d="M320.463 9.17892H317.759V9.09659H317.962C318.154 9.09096 318.341 9.03384 318.501 8.93191C318.558 8.88104 318.602 8.81892 318.63 8.75002C318.659 8.68112 318.671 8.60714 318.665 8.5334C318.663 8.42275 318.65 8.31252 318.627 8.20406C318.602 8.08221 318.564 7.93401 318.511 7.75616L318.105 6.34H315.6L315.338 7.19958C315.283 7.36778 315.241 7.53948 315.212 7.71335C315.181 7.86646 315.163 8.02182 315.16 8.17773C315.148 8.29765 315.163 8.41858 315.206 8.53226C315.248 8.64594 315.316 8.74969 315.404 8.83641C315.609 8.99842 315.862 9.09628 316.129 9.11634H316.262V9.21185H313.872V9.09659L313.981 9.07683C314.173 9.05057 314.348 8.95923 314.474 8.81993C314.635 8.63991 314.762 8.43487 314.848 8.21395C314.96 7.95707 315.083 7.60795 315.219 7.17322L316.821 1.9433C316.73 1.6436 316.646 1.3867 316.576 1.1825C316.76 1.18465 316.943 1.15566 317.115 1.09689C317.234 1.05759 317.335 0.982248 317.402 0.882812L319.407 7.91754C319.464 8.14291 319.541 8.36328 319.638 8.57622C319.7 8.71674 319.796 8.84187 319.918 8.9418C320.032 9.02862 320.17 9.08238 320.316 9.09659H320.453L320.463 9.17892ZM317.406 3.86994C317.203 3.16186 317.028 2.57892 316.881 2.11455L315.635 6.1852H318.084L317.406 3.86994Z"
            fill="black" />
          <path
            d="M321.236 0.00329663C321.504 0.348469 321.738 0.715489 321.936 1.09999C322.161 1.52358 322.349 1.96425 322.496 2.41735C322.653 2.92219 322.77 3.43742 322.846 3.95869C322.929 4.48755 322.971 5.02138 322.972 5.55599C322.972 6.08296 322.929 6.6092 322.846 7.13025C322.768 7.63503 322.652 8.13369 322.496 8.62215C322.35 9.06627 322.163 9.49722 321.936 9.90987C321.725 10.2846 321.484 10.6436 321.215 10.9835H320.834C321.06 10.6437 321.257 10.288 321.425 9.91976C321.618 9.50427 321.775 9.07471 321.894 8.63532C322.03 8.14472 322.133 7.64641 322.202 7.14341C322.276 6.61714 322.313 6.08686 322.314 5.55599C322.313 5.02185 322.275 4.48835 322.202 3.95869C322.133 3.4373 322.03 2.92037 321.894 2.41078C321.775 1.96066 321.618 1.52015 321.425 1.09342C321.259 0.716144 321.064 0.350715 320.841 0L321.236 0.00329663Z"
            fill="black" />
        </g>
        <defs>
          <clipPath id="clip0_721_3940">
            <rect width="323" height="11" fill="white" />
          </clipPath>
        </defs>
      </svg>


    </div>


    <!-- 主要控制面板 -->
    <div>

      <div class="absolute z-40  left-1/2 transform   -translate-y-14    -translate-x-1/2 flex justify-center mt-8">
        <svg width="140" height="11" viewBox="0 0 140 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M25.1135 5.09359L25.2114 5.8051C24.0854 6.20919 22.9033 6.62708 21.9941 6.94828L21.8018 6.19884C22.6306 5.93289 23.8895 5.51841 25.1135 5.09359ZM25.1485 2.36167V3.0835H21.8892V2.36167H25.1485ZM24.0049 0.0372662V9.54209C24.0049 9.99109 23.9035 10.2087 23.6552 10.333C23.2235 10.4769 22.7656 10.5276 22.3123 10.4816C22.2713 10.228 22.1973 9.98071 22.092 9.7459C22.5711 9.7459 22.9978 9.7459 23.1411 9.7459C23.2845 9.7459 23.3265 9.69755 23.3265 9.53522V0.033809L24.0049 0.0372662ZM27.523 0.189213C27.1478 1.66507 26.4732 3.05038 25.5402 4.26126C25.355 4.09492 25.1574 3.9425 24.9491 3.80533C25.8626 2.70445 26.5064 1.41025 26.8306 0.0234375L27.523 0.189213ZM30.5655 3.90205L30.7753 4.54445L25.4422 6.75835L25.2219 6.11941L30.5655 3.90205ZM26.9984 3.66717V9.1691C26.9984 9.63881 27.1278 9.75281 27.8377 9.75281H30.4536C31.0096 9.75281 31.1075 9.53866 31.153 8.44381C31.3471 8.56908 31.5628 8.65806 31.7895 8.7063C31.681 10.0395 31.4397 10.4332 30.4745 10.4332H27.8203C26.6662 10.4332 26.341 10.188 26.341 9.17255V3.67409L26.9984 3.66717ZM31.7055 1.65708V2.34784H26.5333V1.65708H31.7055ZM29.0302 2.73812V8.60958H28.3903V2.73812H29.0302ZM30.3277 4.06783L30.506 3.89514L30.6354 3.78463L31.1005 3.98839L31.0691 4.11273C31.0691 5.69111 31.0446 7.17626 31.0061 7.49747C31.0144 7.64814 30.9678 7.79678 30.8748 7.9165C30.7818 8.03622 30.6485 8.11913 30.499 8.15024C30.2211 8.2089 29.9365 8.23094 29.6527 8.21584C29.6334 7.97874 29.578 7.74587 29.4884 7.52508C29.7087 7.54581 30.0164 7.52508 30.1248 7.52508C30.2332 7.52508 30.3347 7.49745 30.3696 7.30749C30.4046 7.11753 30.4256 5.74639 30.4256 4.04712L30.3277 4.06783Z"
            fill="#3F2917" />
          <path
            d="M38.6329 3.71579V4.40655H33.9014V3.71579H38.6329ZM34.0378 8.35081C34.2021 8.299 34.342 8.00544 34.5239 7.54609C34.9518 6.38368 35.2805 5.18791 35.5065 3.97137L36.206 4.21662C35.8793 5.72797 35.4001 7.2032 34.7756 8.62021C34.7756 8.62021 34.2616 8.8827 34.2616 9.05194C34.2029 8.81356 34.1281 8.57932 34.0378 8.35081ZM34.2196 8.42678L34.6008 8.14359L38.1364 7.36648C38.1585 7.58912 38.1923 7.81043 38.2378 8.02959C34.912 8.80669 34.5204 8.91721 34.2721 9.06573L34.2196 8.42678ZM38.4371 0.976951V1.66771H34.3V0.976951H38.4371ZM37.6782 5.46689C38.1059 6.51712 38.476 7.58933 38.7868 8.6789L38.1538 8.91378C37.8567 7.80273 37.4983 6.70855 37.0802 5.63613L37.6782 5.46689ZM41.1124 0.234375C41.0879 4.13717 41.032 8.31973 38.8393 10.5129C38.6817 10.3048 38.4902 10.1238 38.2727 9.97754C40.371 7.95361 40.3885 3.91613 40.399 0.234375H41.1124ZM43.1127 2.71422V3.44643H38.7763V2.71422H43.1127ZM43.4624 2.71422C43.4624 2.71422 43.4624 2.9974 43.4624 3.11483C43.3156 7.84654 43.1827 9.45257 42.805 9.94646C42.7231 10.0727 42.6111 10.1772 42.4788 10.2507C42.3464 10.3241 42.1979 10.3643 42.0461 10.3678C41.546 10.3914 41.0448 10.3822 40.5458 10.3402C40.5223 10.0767 40.4449 9.82052 40.3185 9.58725C40.9445 9.64942 41.525 9.64944 41.7523 9.64944C41.8314 9.66352 41.9128 9.65617 41.9879 9.62819C42.063 9.60022 42.1291 9.55268 42.179 9.49058C42.4797 9.12102 42.6336 7.4701 42.7665 2.88346V2.71422H43.4624Z"
            fill="#3F2917" />
          <path
            d="M47.4911 2.32022C47.4526 6.03651 47.3582 8.83063 45.9804 10.5161C45.8325 10.3171 45.6516 10.1443 45.4453 10.0049C46.7287 8.4749 46.7847 5.81892 46.8092 2.32022H47.4911ZM49.9111 1.91611V2.63795H45.6237V1.91611H49.9111ZM47.6345 0.0924967C47.9528 0.599633 48.23 1.13087 48.4633 1.68124L47.7919 1.95064C47.5649 1.38887 47.2949 0.845059 46.984 0.323917L47.6345 0.0924967ZM49.4425 4.20253C49.4425 4.20253 49.4425 4.45811 49.4425 4.54791C49.3725 8.38508 49.2991 9.64226 49.0228 10.0291C48.9612 10.1345 48.8725 10.222 48.7656 10.2826C48.6588 10.3433 48.5376 10.375 48.4143 10.3745C48.0489 10.4046 47.6817 10.4046 47.3163 10.3745C47.298 10.1294 47.2389 9.88906 47.1414 9.66301C47.4633 9.69498 47.7866 9.70993 48.1101 9.70787C48.1728 9.72006 48.2379 9.71266 48.2962 9.68666C48.3545 9.66066 48.4031 9.61739 48.4353 9.56283C48.6242 9.28653 48.7081 8.02243 48.785 4.33032V4.20253H49.4425ZM49.0193 4.20253V4.91403H47.1309V4.20253H49.0193ZM51.2505 5.35263C51.1666 7.42491 50.9427 9.37634 49.9076 10.4816C49.7818 10.2899 49.6204 10.1235 49.432 9.9911C50.3517 9.01713 50.5476 7.20041 50.6035 5.35263H51.2505ZM51.7995 0.171927C51.5054 1.51146 50.93 2.77513 50.1104 3.88131C49.931 3.7043 49.7368 3.54258 49.5299 3.39781C50.3059 2.40616 50.8407 1.25166 51.0931 0.0234375L51.7995 0.171927ZM54.8035 3.53251V4.22327H50.3867V3.53251H54.8035ZM53.9118 9.58699C54.1076 9.58699 55.2442 9.58699 55.5449 9.58699C55.4337 9.81163 55.357 10.0515 55.3176 10.2985H53.8838C52.2681 10.2985 51.1736 9.77353 50.5965 7.15555L51.0861 6.96557C51.5582 9.1691 52.5759 9.58354 53.9118 9.58354V9.58699ZM55.44 1.53275V2.22351H50.8728V1.53275H55.44ZM52.9291 3.89168V9.64572H52.2681V3.89168H52.9291ZM55.0273 6.30934V7.0001H52.5794V6.30934H55.0273ZM54.7791 3.5463L54.884 3.51523L55.3561 3.681C55.1112 4.36112 54.8263 5.02655 54.5028 5.67385L53.9363 5.44589C54.2157 4.86688 54.4563 4.27042 54.6567 3.6603V3.5463H54.7791Z"
            fill="#3F2917" />
          <path
            d="M61.7762 6.93885L61.8111 7.60541C60.3144 7.92662 58.7407 8.27203 57.5831 8.49998L57.4258 7.75049C58.5134 7.56053 60.178 7.24279 61.7762 6.93885ZM61.4265 1.39548V2.11045H57.4852V1.39548H61.4265ZM57.6216 5.10141C57.7965 5.05305 57.9538 4.67316 58.1497 4.17581C58.6348 2.82929 58.9953 1.44209 59.2268 0.03125L59.9437 0.186654C59.5777 1.95822 59.0232 3.68667 58.2896 5.3432C58.2896 5.3432 57.8419 5.60222 57.8419 5.76109C57.7892 5.53661 57.7203 5.31614 57.6356 5.10141H57.6216ZM57.8419 5.13594L58.2616 4.92526H61.4684V5.61602H58.6393C58.3681 5.59256 58.0958 5.64781 57.8559 5.77492L57.8419 5.13594ZM60.2899 3.14659V10.4721H59.5905V3.14659H60.2899ZM67.2456 3.55065V4.27249H61.5768V3.55065H67.2456ZM66.8609 1.39894V2.11386H61.965V1.39894H66.8609ZM64.9725 0.134839C64.4934 2.12768 63.7695 4.86655 63.2904 6.40004H62.5105C63.0526 4.79748 63.808 2.00337 64.2591 0.0347072L64.9725 0.134839ZM63.182 7.60887C64.2558 8.27459 65.2546 9.05151 66.1615 9.9264L65.6824 10.5204C64.7873 9.61029 63.794 8.79958 62.7204 8.10278L63.182 7.60887ZM66.2315 5.67821V6.40004H63.0002V5.67821H66.2315ZM66.179 5.67821L66.2909 5.62985L66.8015 5.8958C66.2175 6.82142 65.3537 8.08205 64.6193 9.08365L63.9933 8.78317C64.7242 7.8092 65.6055 6.48986 66.0601 5.77147V5.67821H66.179Z"
            fill="#3F2917" />
          <path
            d="M97.3658 0.917342L97.4952 0.882812L97.9498 1.02443C97.4882 5.71469 96.0404 8.8231 94.0505 10.5051C93.9067 10.2782 93.7286 10.0744 93.5225 9.90068C95.3899 8.44663 96.8202 5.3175 97.2434 1.10732V0.917342H97.3658ZM97.5231 0.917342V1.65646H93.8302V0.917342H97.5231ZM94.4947 2.91365C95.8725 4.66127 97.4462 7.02021 98.1246 8.51225L97.5162 9.02686C96.8692 7.53136 95.327 5.0999 93.9526 3.34192L94.4947 2.91365ZM102.384 0.917342L102.51 0.882812L102.982 1.02789C102.388 6.03244 100.471 8.99924 97.9323 10.5016C97.8054 10.2625 97.6427 10.0436 97.4497 9.85232C99.8382 8.56406 101.72 5.61106 102.262 1.09695V0.917342H102.384ZM102.503 0.917342V1.65646H98.4324V0.917342H102.503ZM103.465 9.89722C103.259 10.0889 103.082 10.3087 102.94 10.55C100.44 8.98197 99.3207 5.80101 98.7436 1.64609L99.4431 1.53904C99.9327 5.39694 101.052 8.5226 103.465 9.89031V9.89722Z"
            fill="#3F2917" />
          <path
            d="M109.043 4.98053L109.138 5.69545C107.875 6.11681 106.529 6.56237 105.525 6.88012L105.309 6.13755C106.253 5.8716 107.673 5.42607 109.043 4.98053ZM108.984 2.36602V3.09131H105.438V2.36602H108.984ZM107.676 0.03125V9.58443C107.676 10.0369 107.582 10.251 107.326 10.3719C106.873 10.5025 106.398 10.5481 105.928 10.5066C105.878 10.2697 105.804 10.0383 105.707 9.81585C106.207 9.81585 106.658 9.81585 106.788 9.81585C106.917 9.81585 106.994 9.76404 106.994 9.59826V0.0381222L107.676 0.03125ZM110.418 0.0761511V3.35726C110.418 3.74063 110.551 3.8166 111.261 3.8166H113.782C114.387 3.8166 114.481 3.60592 114.548 2.35219C114.75 2.48598 114.975 2.58196 115.212 2.63539C115.1 4.1447 114.863 4.51773 113.814 4.51773H111.236C110.044 4.51773 109.711 4.28979 109.711 3.35381V0.0761511H110.418ZM114.754 5.53313V10.4548H114.055V6.18936H110.393V10.5066H109.694V5.53313H114.754ZM114.544 1.3126C113.144 1.84085 111.697 2.2386 110.222 2.50068C110.167 2.29658 110.089 2.09953 109.988 1.91355C111.357 1.65811 112.697 1.26461 113.985 0.739254L114.544 1.3126ZM114.324 9.3254V9.97126H110.044V9.3254H114.324ZM114.3 7.41202V8.04405H110.065V7.41202H114.3Z"
            fill="#3F2917" />
          <path
            d="M117.233 4.06167C117.426 4.01677 117.608 3.74049 117.838 3.34676C118.429 2.30647 118.916 1.2123 119.293 0.0794728L119.937 0.386824C119.413 1.77784 118.732 3.10572 117.905 4.34491C117.905 4.34491 117.464 4.58665 117.464 4.74898C117.406 4.51424 117.328 4.28443 117.233 4.06167ZM120.486 7.8367L120.608 8.48601L117.461 9.77082L117.286 9.04207C118.094 8.76922 119.279 8.29951 120.486 7.8367ZM117.31 6.83163C117.524 6.80054 117.751 6.50351 118.062 6.0856C118.842 4.97423 119.513 3.79235 120.066 2.55582L120.647 2.9012C119.925 4.39442 119.039 5.80509 118.006 7.10795V7.12865C118.006 7.12865 117.531 7.34627 117.531 7.50515C117.472 7.27614 117.399 7.05113 117.31 6.83163ZM117.454 4.19638L117.803 3.95808L119.685 3.77157C119.654 3.97977 119.638 4.18976 119.636 4.40014C117.919 4.61427 117.632 4.68337 117.464 4.76626L117.454 4.19638ZM117.489 6.8869L117.814 6.62787L120.16 6.07181C120.159 6.28175 120.17 6.49157 120.192 6.70038C118.024 7.27026 117.709 7.39113 117.531 7.50856L117.489 6.8869ZM122.535 2.79416C122.143 4.17568 121.465 5.77132 120.566 6.7971C120.451 6.61808 120.319 6.45039 120.171 6.29631C121.002 5.20716 121.585 3.95367 121.881 2.62147L122.535 2.79416ZM126.994 1.14669V2.82177H126.294V1.81325H121.398V2.98063H120.737V1.1536L126.994 1.14669ZM121.885 4.27581L121.919 4.30346V10.5203H121.297V4.89405L121.885 4.27581ZM126.826 3.12916V3.77502H122.629V3.12916H126.826ZM126.679 4.99423V10.4443H126.022V5.63317H123.434V10.503H122.804V4.97694L126.679 4.99423ZM126.329 7.10104V7.73307H123.109V7.10104H126.329ZM126.329 9.32526V9.95734H123.126V9.32526H126.329ZM123.748 0C123.996 0.405716 124.208 0.830834 124.385 1.27102L123.755 1.53697C123.585 1.08842 123.383 0.652169 123.15 0.23142L123.748 0ZM125.056 3.4987C124.889 4.18946 124.707 4.94585 124.553 5.45011L123.944 5.30503C124.113 4.66037 124.242 4.0065 124.332 3.34676L125.056 3.4987Z"
            fill="#3F2917" />
          <path
            d="M131.096 2.24241V5.03311C131.096 6.93615 130.886 8.88754 129.438 10.5074C129.28 10.3213 129.099 10.1554 128.899 10.0135C130.249 8.51451 130.407 6.67366 130.407 5.0262V2.24241H131.096ZM133.893 1.89703V2.62236H129.095V1.89703H133.893ZM132.953 4.2111V4.92256H130.854V4.20073L132.953 4.2111ZM131.498 0.0112697C131.734 0.504973 131.936 1.01385 132.103 1.53441L131.442 1.78307C131.294 1.24695 131.104 0.722749 130.875 0.215032L131.498 0.0112697ZM133.386 4.2111C133.386 4.2111 133.386 4.47012 133.386 4.5841C133.316 8.38328 133.246 9.63355 132.967 10.0204C132.899 10.1247 132.807 10.2108 132.698 10.2711C132.588 10.3314 132.466 10.3639 132.341 10.3658C131.949 10.3935 131.557 10.3935 131.166 10.3658C131.147 10.1175 131.084 9.87438 130.98 9.64738C131.438 9.69228 131.861 9.69574 132.029 9.69574C132.197 9.69574 132.281 9.675 132.379 9.54375C132.571 9.27436 132.659 8.02063 132.729 4.36305V4.20073L133.386 4.2111ZM138.209 2.62924C137.635 6.58729 136.436 9.0395 133.694 10.535C133.577 10.2983 133.433 10.0758 133.264 9.87189C135.883 8.56635 137.002 6.22119 137.499 2.53943L138.209 2.62924ZM135.992 0.14943C135.586 2.3046 134.942 4.35616 134.009 5.67551C133.835 5.47234 133.646 5.28294 133.442 5.10908C134.32 3.8968 134.918 1.98339 135.254 0.0078125L135.992 0.14943ZM139.051 9.84423C138.854 10.0385 138.683 10.2567 138.541 10.4935C136.285 9.24327 135.184 6.48367 134.621 2.97116L135.247 2.85374C135.747 6.08305 136.862 8.75974 139.037 9.84423H139.051ZM138.957 2.1699V2.88827H134.97V2.1699H138.957Z"
            fill="#3F2917" />
          <path
            d="M7.7224 8.49161C3.3965 8.49161 0.0078125 6.71979 0.0078125 4.45755C0.0078125 2.19531 3.3895 0.40625 7.7224 0.40625C12.0553 0.40625 15.416 2.18148 15.416 4.44372C15.416 6.07737 13.573 7.55215 10.7229 8.16347C10.6302 8.18317 10.5333 8.16567 10.4536 8.11482C10.3739 8.06398 10.318 7.98398 10.298 7.89238C10.2781 7.80078 10.2958 7.70509 10.3473 7.62639C10.3988 7.54769 10.4798 7.49241 10.5725 7.47271C13.052 6.93047 14.7166 5.70784 14.7166 4.42994C14.7166 2.61669 11.5063 1.08318 7.7224 1.08318C3.93855 1.08318 0.707231 2.61669 0.707231 4.42994C0.707231 6.24318 3.92106 7.77319 7.7224 7.77319C7.81515 7.77319 7.9041 7.80961 7.96968 7.87438C8.03526 7.93915 8.07211 8.02697 8.07211 8.11857C8.07211 8.21017 8.03526 8.29804 7.96968 8.36281C7.9041 8.42758 7.81515 8.46395 7.7224 8.46395V8.49161Z"
            fill="#3F2917" />
          <path
            d="M6.23889 9.96086C6.17015 9.96058 6.10301 9.94027 6.04588 9.90251C5.98874 9.86476 5.94413 9.81123 5.91764 9.74858C5.89114 9.68593 5.88394 9.61693 5.89691 9.55026C5.90989 9.48359 5.94247 9.42218 5.99059 9.37369L7.22158 8.1407L5.99059 6.90767C5.92567 6.84218 5.88975 6.75391 5.89073 6.66225C5.89172 6.5706 5.92953 6.48311 5.99584 6.41899C6.06216 6.35487 6.15155 6.31936 6.24435 6.32033C6.33715 6.3213 6.42576 6.35864 6.49069 6.42413L7.96296 7.89891C8.02704 7.96347 8.06293 8.0503 8.06293 8.1407C8.06293 8.23111 8.02704 8.31789 7.96296 8.38245L6.49069 9.86069C6.45759 9.89312 6.41827 9.91866 6.37503 9.93586C6.33179 9.95306 6.2855 9.96158 6.23889 9.96086Z"
            fill="#3F2917" />
          <path
            d="M82.1853 4.04207H82.1503C82.058 4.03333 81.9731 3.98876 81.914 3.91816C81.855 3.84757 81.8268 3.75671 81.8356 3.66558L82.0454 1.5933C82.0543 1.50283 82.0989 1.41948 82.1696 1.36129C82.2403 1.3031 82.3314 1.2748 82.4231 1.28249L84.5213 1.4621C84.5672 1.46595 84.612 1.4787 84.6529 1.49962C84.6938 1.52054 84.7302 1.54918 84.7599 1.58398C84.7896 1.61878 84.8121 1.65903 84.8261 1.70241C84.84 1.74579 84.8452 1.79146 84.8413 1.83682C84.8374 1.88218 84.8245 1.92633 84.8033 1.96676C84.7821 2.00719 84.7531 2.04311 84.7179 2.07246C84.6826 2.1018 84.6419 2.12397 84.598 2.13776C84.554 2.15156 84.5078 2.15671 84.4619 2.15286L82.7133 2.00432L82.535 3.73122C82.5263 3.81671 82.4856 3.89593 82.421 3.95341C82.3563 4.01089 82.2723 4.04251 82.1853 4.04207Z"
            fill="#3F2917" />
          <path
            d="M89.9033 10.9299H89.8718L87.7736 10.7537C87.6813 10.7458 87.596 10.7022 87.5364 10.6322C87.4767 10.5623 87.4476 10.4719 87.4553 10.3807C87.4633 10.2897 87.5076 10.2054 87.5784 10.1465C87.6492 10.0876 87.7408 10.0588 87.833 10.0664L89.5816 10.2115L89.7564 8.48461C89.7608 8.43917 89.7742 8.39504 89.796 8.35476C89.8177 8.31448 89.8473 8.27885 89.8831 8.24995C89.9189 8.22104 89.9601 8.19944 90.0044 8.18637C90.0487 8.17329 90.0951 8.16899 90.1411 8.17376C90.1868 8.1785 90.2311 8.19211 90.2715 8.21377C90.3119 8.23543 90.3475 8.26475 90.3764 8.30003C90.4053 8.33532 90.4269 8.37586 90.44 8.41939C90.453 8.46292 90.4572 8.50854 90.4523 8.55367L90.2425 10.626C90.2324 10.7084 90.1926 10.7846 90.1303 10.8404C90.068 10.8962 89.9874 10.928 89.9033 10.9299Z"
            fill="#3F2917" />
          <path
            d="M89.6304 10.6243C89.5784 10.6248 89.527 10.614 89.4798 10.5925C89.4326 10.571 89.3909 10.5394 89.3576 10.4999L82.6152 2.47329C82.5858 2.43839 82.5636 2.39812 82.55 2.35474C82.5363 2.31136 82.5314 2.26573 82.5357 2.2205C82.5399 2.17526 82.5531 2.13129 82.5746 2.09111C82.596 2.05092 82.6253 2.01529 82.6607 1.98629C82.696 1.95721 82.7368 1.93532 82.7808 1.92183C82.8247 1.90835 82.8709 1.90354 82.9167 1.90771C82.9625 1.91188 83.007 1.92493 83.0477 1.94612C83.0884 1.9673 83.1244 1.99622 83.1538 2.0312L89.9032 10.0717C89.9456 10.1219 89.9726 10.183 89.9812 10.2478C89.9898 10.3127 89.9796 10.3786 89.9518 10.4379C89.9239 10.4973 89.8796 10.5476 89.824 10.583C89.7683 10.6185 89.7036 10.6375 89.6374 10.6381L89.6304 10.6243Z"
            fill="#3F2917" />
        </svg>



      </div>

      <!-- 颜色选择区域 -->
      <div class=" space-y-6">

        <!-- 区域1 颜色选择 -->
        <div>

          <div class="relative z-10 w-full bg-[#f7ebdd]  py-6 rounded-lg  px-6 top-[1rem]  pb-[17rem]"
            style="transform: rotate(-2deg); ">
            <div class="-top-[1.2rem]  absolute flex items-end w-full justify-end pr-10">
              <svg width="80" height="21" viewBox="0 0 80 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_721_3986)">
                  <path
                    d="M80 18.188L0 21.0003L1.46497 8.99332C1.33653 5.32588 6.48124 2.17293 10.6435 2.04083L68.0547 0.0211127C72.2204 -0.12489 77.57 2.65958 77.6984 6.32355L80 18.188Z"
                    fill="#BA8A91" />
                  <path
                    d="M18.6317 7.86233L18.6525 8.44636L14.3548 8.5993L14.334 8.01183L18.6317 7.86233ZM18.7324 13.8589L18.7532 14.4568L14.5145 14.6063L14.4937 14.0084L18.7324 13.8589ZM18.3053 10.5947L18.3921 13.028L14.8374 13.1532L14.754 10.7198L18.3053 10.5947ZM15.7052 7.01067L15.792 9.40233L17.2743 9.35018L17.191 6.95852L17.7707 6.93764L17.8749 9.88549L15.247 9.97935L15.1463 7.03151L15.7052 7.01067ZM15.3754 12.5727L17.8055 12.4892L17.7603 11.1648L15.3303 11.2482L15.3754 12.5727ZM16.83 9.63869L16.8716 10.8693L16.2745 10.8901L16.2329 9.65957L16.83 9.63869ZM16.83 10.918L16.8959 12.7986H16.948L17.073 16.3687L16.4828 16.3896L16.3544 12.8195H16.396L16.3301 10.9388L16.83 10.918ZM23.2244 15.1277L23.2487 15.7708L18.5657 15.9342L18.5449 15.2911L23.2244 15.1277ZM22.9571 10.3652L22.978 11.0049L18.6837 11.1648L18.6594 10.5251L22.9571 10.3652ZM22.6829 8.16128L22.7072 8.79399L18.8886 8.92952L18.8677 8.29686L22.6829 8.16128ZM22.8877 12.6804L22.9085 13.3131L18.9094 13.4521L18.8851 12.8229L22.8877 12.6804ZM21.0096 6.8125L21.145 10.7268L20.5271 10.7476L20.3917 6.83686L21.0096 6.8125ZM21.1693 11.3873L21.3221 15.7291L20.7041 15.7499L20.5514 11.4081L21.1693 11.3873Z"
                    fill="white" />
                  <path
                    d="M33.4268 10.3352C31.6911 13.1579 28.8063 14.9899 25.5605 16.137C25.4458 15.9373 25.3096 15.7508 25.1543 15.5808C28.4209 14.5379 31.2919 12.7199 32.8748 10.0501L33.4268 10.3352ZM31.6911 12.1498L31.7119 12.7651L25.4216 12.9875L25.4008 12.3722L31.6911 12.1498ZM31.3439 7.4603L31.3648 8.06864L27.1573 8.21814L27.3135 12.6504L26.6922 12.6712L26.5151 7.63063L31.3439 7.4603ZM31.4967 9.02461V9.55997L26.9629 9.71986L26.9456 9.18107L31.4967 9.02461ZM31.5557 10.5611L31.5765 11.1L27.0428 11.2564L27.0219 10.721L31.5557 10.5611ZM29.5526 6.61908C29.3531 7.1136 29.1212 7.59438 28.8583 8.05825L28.3133 7.92615C28.528 7.46993 28.7011 6.9952 28.8306 6.50781L29.5526 6.61908ZM31.7987 7.44294L32.0556 14.8056C32.0556 15.2992 31.9688 15.5391 31.6425 15.6677C31.0148 15.8151 30.3707 15.8805 29.7262 15.8624C29.667 15.6217 29.5809 15.3885 29.4693 15.1672C30.2504 15.1672 30.9725 15.1359 31.1773 15.122C31.3821 15.1081 31.4446 15.0281 31.4376 14.8195L31.1773 7.4603L31.7987 7.44294Z"
                    fill="white" />
                  <path
                    d="M41.6954 12.2836L41.7197 12.9511L35.8182 13.1562L35.7939 12.4922L41.6954 12.2836ZM38.158 6.51309C37.9636 7.9314 37.6512 9.82597 37.429 10.921L36.759 10.9418C37.0159 9.80161 37.3388 7.85839 37.5228 6.46094L38.158 6.51309ZM43.0702 10.0728L43.0945 10.7193L37.2832 10.9245L37.2589 10.2778L43.0702 10.0728ZM43.3409 7.47602L43.3618 8.13303L37.672 8.33464L37.6512 7.67414L43.3409 7.47602ZM43.5527 10.0554C43.5527 10.0554 43.5527 10.2953 43.5527 10.403C43.3756 13.3509 43.1604 14.5397 42.7508 14.9951C42.6448 15.1135 42.5146 15.2077 42.369 15.2713C42.2235 15.3349 42.066 15.3663 41.9072 15.3636C41.5601 15.3914 40.897 15.3984 40.227 15.3636C40.193 15.1212 40.1026 14.8903 39.9632 14.6892C40.7026 14.7344 41.4351 14.717 41.6989 14.6892C41.9627 14.6614 42.0704 14.6684 42.1849 14.5536C42.5494 14.206 42.7681 12.9789 42.9139 10.1701V10.0519L43.5527 10.0554Z"
                    fill="white" />
                  <path
                    d="M50.3882 6.74167L50.409 7.32913L46.1113 7.47863V6.8946L50.3882 6.74167ZM50.4888 12.7417L50.5097 13.3396L46.271 13.489L46.2502 12.8911L50.4888 12.7417ZM50.0619 9.47399L50.1486 11.9074L46.5973 12.0325L46.5105 9.59913L50.0619 9.47399ZM47.4652 5.89344L47.5485 8.2851L49.0343 8.23295L48.9475 5.84129L49.5272 5.82045L49.6314 8.7683L47.007 8.85869L46.9028 5.91432L47.4652 5.89344ZM47.118 11.4554L49.5481 11.3685L49.4995 10.0441L47.0695 10.131L47.118 11.4554ZM48.5726 8.51802L48.6177 9.74863L48.0206 9.76946L47.9755 8.53886L48.5726 8.51802ZM48.5726 9.80074L48.6385 11.6779H48.6767L48.8017 15.248L48.2116 15.2689L48.0866 11.6988H48.1248L48.0588 9.81814L48.5726 9.80074ZM54.9705 14.007L54.9914 14.6536L50.3118 14.817L50.2875 14.1704L54.9705 14.007ZM54.6997 9.24455L54.724 9.88416L50.4229 10.0371L50.4021 9.39752L54.6997 9.24455ZM54.429 7.0441L54.4498 7.67328L50.6312 7.80885L50.6069 7.1762L54.429 7.0441ZM54.6303 11.5632L54.6546 12.1924L50.652 12.3349L50.6312 11.7023L54.6303 11.5632ZM52.7522 5.69531L52.8911 9.60609L52.2732 9.6304L52.1343 5.71615L52.7522 5.69531ZM52.9154 10.2701L53.0681 14.6119L52.4468 14.6327L52.294 10.2909L52.9154 10.2701Z"
                    fill="white" />
                  <path
                    d="M65.2738 8.30549L65.2981 8.94859L56.845 9.24754L56.8242 8.60097L65.2738 8.30549ZM64.1837 5.85124C62.6667 6.58821 59.8687 6.94976 57.5879 7.09577C57.5534 6.89795 57.4975 6.70446 57.4213 6.5187C59.6153 6.36227 62.3647 6.00768 63.6109 5.375L64.1837 5.85124ZM64.2844 10.6867L64.4233 14.6392L63.7637 14.6635L63.6457 11.3437L58.7266 11.5141L58.8481 14.9416L58.2059 14.966L58.0635 10.9057L64.2844 10.6867ZM64.0067 13.6311L64.031 14.2638L58.56 14.455L58.5357 13.8223L64.0067 13.6311ZM61.2712 6.29273L61.4378 11.0274L60.7886 11.0483L60.622 6.31705L61.2712 6.29273Z"
                    fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_721_3986">
                    <rect width="80" height="21" fill="white" />
                  </clipPath>
                </defs>
              </svg>

            </div>
            <div class="  px-12  flex justify-between items-center" style="transform: rotate(2deg);">


              <div v-for="texture in bTextureNames" :key="texture" class="flex flex-col items-center">
              <button type="button" @click="switchToBTexture(texture)" :class="[
                'w-12 h-12  rounded-[9px] border border-gray-200 shadow-sm transition-transform duration-200 overflow-hidden',
                selectedBTexture === texture ? 'ring-2 ring-offset-2 ring-green-500 scale-105' : 'hover:scale-105'
              ]" :style="getSwatchStyle('B', texture)">
                <img v-if="texture === 'B2.png'" :src="b2Thumb" alt="金豹" class="w-full h-full object-cover" />
              </button>
              <div class="text-center leading-tight mt-2">
                <div class="text-[13px] text-gray-800">{{ getColorName('B', texture) }}</div>
              </div>
            </div>

            </div>
          </div>
        </div>

        <!-- 分隔线 -->
        <!-- <div class="border-t border-gray-200"></div> -->

        <!-- 区域2 颜色选择 -->

        <div class="relative z-20 w-full -top-[15rem] bg-[#e7d2ba] py-6 rounded-lg  px-6 pb-56 -mt-12"
          style="transform: rotate(2deg); ">

          <div class="  absolute z-40  flex items-end w-full justify-end pr-10  -top-[1rem]">
            <svg width="82" height="20" viewBox="0 0 82 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_722_4066)">
                <path
                  d="M81.9971 19.9993L-0.00292969 18.0209L2.23455 6.30431C2.32703 2.69315 7.78729 -0.0999443 12.0488 0.00274272L70.8987 1.41983C75.1673 1.52251 80.4675 4.57917 80.375 8.18691L81.9971 19.9993Z"
                  fill="#50744E" />
                <path
                  d="M19.607 12.1726V12.7613L15.2637 12.6586V12.0665L19.607 12.1726ZM19.8738 6.27152V6.84655L15.47 6.74046V6.16539L19.8738 6.27152ZM19.3722 8.93793L19.3117 11.334L15.6692 11.245L15.7297 8.84893L19.3722 8.93793ZM16.2526 10.7076L18.7426 10.7692L18.7746 9.46165L16.2846 9.40344L16.2526 10.7076ZM16.9355 5.26174L16.8751 7.6167L18.394 7.65435L18.4544 5.29939H19.0485L18.9738 8.202L16.2846 8.13699L16.3593 5.23438L16.9355 5.26174ZM17.8462 9.16728L17.7964 11.0157H17.8391L17.7466 14.531H17.1383L17.2308 11.0122H17.2557L17.3055 9.16043L17.8462 9.16728ZM17.9209 7.90764L17.8889 9.11936H17.277L17.309 7.90764H17.9209ZM24.1281 13.6992L24.1104 14.3324L19.3153 14.2161L19.3331 13.5828L24.1281 13.6992ZM24.1495 9.00299V9.63279L19.7421 9.52328V8.89686L24.1495 9.00299ZM23.9325 11.2895V11.9125L19.8311 11.8132V11.1902L23.9325 11.2895ZM24.0036 6.81918V7.44213L20.0907 7.3497V6.72675L24.0036 6.81918ZM22.2571 9.91688L22.1432 14.1921H21.5101L21.6239 9.91345L22.2571 9.91688ZM22.3745 5.41237L22.2748 9.26313H21.6381L21.7413 5.40895L22.3745 5.41237Z"
                  fill="white" />
                <path
                  d="M31.7051 5.71244C31.5699 10.3197 31.5095 13.5338 26.6077 14.7044C26.5185 14.4972 26.3987 14.3035 26.252 14.1293C30.983 13.0511 30.9154 10.1314 31.0541 5.69531L31.7051 5.71244ZM34.9066 10.3299V10.97L26.316 10.7612V10.1246L34.9066 10.3299ZM27.2444 7.82092C28.0331 8.14142 28.768 8.57289 29.425 9.10112L28.991 9.62479C28.3494 9.08322 27.6307 8.63258 26.8567 8.28647L27.2444 7.82092ZM28.123 6.00681C28.9144 6.30552 29.6543 6.71747 30.3178 7.22876L29.923 7.77642C29.2724 7.23955 28.5392 6.80311 27.7495 6.4826L28.123 6.00681ZM31.2569 11.8565C32.5291 12.5131 33.7059 13.3279 34.7572 14.2799L34.3054 14.7797C33.2896 13.8152 32.1419 12.9883 30.8941 12.322L31.2569 11.8565Z"
                  fill="white" />
                <path
                  d="M43.1908 11.9886V12.6424L37.1436 12.4986L37.1614 11.8414L43.1908 11.9886ZM39.9288 6.10462C39.6443 7.47378 39.2174 9.33239 38.9115 10.3935L38.2285 10.373C38.5593 9.2708 39.0111 7.38136 39.2957 6.01562L39.9288 6.10462ZM44.7346 9.89375V10.5338L38.7763 10.3901V9.74998L44.7346 9.89375ZM45.1721 7.35737L45.1543 8.00773L39.3099 7.88109L39.3277 7.23073L45.1721 7.35737ZM45.229 9.90746C45.229 9.90746 45.229 10.1402 45.1934 10.2497C44.8377 13.1387 44.5354 14.2922 44.0872 14.6995C43.9716 14.8099 43.8327 14.8949 43.6798 14.9486C43.5269 15.0024 43.3637 15.0237 43.2014 15.011C42.6275 15.009 42.0541 14.9793 41.4833 14.922C41.466 14.6794 41.3878 14.4446 41.2556 14.2374C42.0098 14.3264 42.7568 14.3538 43.0342 14.3572C43.1213 14.3734 43.2108 14.3726 43.2976 14.3549C43.3843 14.3373 43.4665 14.3032 43.5394 14.2545C43.9342 13.9328 44.2508 12.7382 44.5532 9.98961V9.8732L45.229 9.90746Z"
                  fill="white" />
                <path
                  d="M52.1587 12.9616V13.5538L47.8154 13.4477V12.859L52.1587 12.9616ZM52.4255 7.06054V7.63904L48.0218 7.53291V6.95446L52.4255 7.06054ZM51.924 9.727L51.8635 12.123L48.221 12.034L48.285 9.638L51.924 9.727ZM48.8043 11.4967L51.2944 11.5582L51.3264 10.2507L48.8364 10.1925L48.8043 11.4967ZM49.4873 6.05423L49.4268 8.40919L50.9458 8.44341L51.0098 6.08845H51.6038L51.5256 8.99106L48.8364 8.92605L48.911 6.02344L49.4873 6.05423ZM50.3979 9.95635L50.3517 11.8081H50.3908L50.2984 15.3234H49.6936L49.7826 11.8081H49.8252L49.8715 9.95635H50.3979ZM50.4762 8.6967L50.4442 9.90842H49.8288L49.8608 8.6967H50.4762ZM56.6799 14.4711V15.1078L51.8813 14.9914L51.8991 14.3548L56.6799 14.4711ZM56.7013 9.77492V10.4047L52.2939 10.2986V9.66879L56.7013 9.77492ZM56.4843 12.0614V12.6844L52.3829 12.5851V11.9622L56.4843 12.0614ZM56.559 7.61163V8.23462L52.6461 8.13877L52.6639 7.51582L56.559 7.61163ZM54.8088 10.6922L54.6986 14.9674H54.0618L54.1757 10.6888L54.8088 10.6922ZM54.9262 6.18773L54.8266 10.0419H54.1935L54.2931 6.18773H54.9262Z"
                  fill="white" />
                <path
                  d="M60.4075 6.79249L60.3292 9.74303C60.2865 11.4545 60.0909 13.8813 59.0949 15.5106C58.922 15.3742 58.732 15.2592 58.5293 15.1683C59.4897 13.5972 59.6356 11.3518 59.6747 9.74303L59.7529 6.78906L60.4075 6.79249ZM66.9776 6.94993L66.9135 9.34596L60.1336 9.18509V8.58951L66.2697 8.7401L66.3017 7.5318L60.1656 7.38464V6.78906L66.9776 6.94993ZM67.1483 12.4266L67.2337 12.9845L60.4182 13.9395L60.3328 13.3576L67.1483 12.4266ZM66.4902 10.9616L66.5756 11.5229L60.7988 12.3102L60.7134 11.742L66.4902 10.9616ZM65.9638 9.83541C64.3412 10.3079 62.6724 10.6187 60.9837 10.763C60.9459 10.5914 60.8899 10.4239 60.8166 10.2633C62.4742 10.0784 64.4022 9.75669 65.4409 9.37675L65.9638 9.83541ZM63.7156 10.1058L63.6018 14.4153C63.6018 14.7883 63.6836 14.8705 64.2314 14.8842L66.195 14.9321C66.6361 14.9321 66.7179 14.7644 66.7962 13.7992C66.9712 13.9241 67.1674 14.0191 67.376 14.0798C67.255 15.2504 67.0487 15.5756 66.2163 15.5551L64.1781 15.5038C63.207 15.4798 62.9402 15.2607 62.9615 14.4016L63.0754 10.0921L63.7156 10.1058Z"
                  fill="white" />
              </g>
              <defs>
                <clipPath id="clip0_722_4066">
                  <rect width="82" height="20" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>


          <div class=" px-12  flex justify-between items-center" style="transform: rotate(-2deg);">
            <div v-for="texture in aTextureNames" :key="texture" class="flex flex-col items-center">
                <button type="button" @click="switchToATexture(texture)" :class="[
                  'w-12 h-12  rounded-[9px] border border-gray-200 shadow-sm transition-transform duration-200',
                  selectedATexture === texture ? 'ring-2 ring-offset-2 ring-blue-400 scale-105' : 'hover:scale-105'
                ]" :style="getSwatchStyle('A', texture)" />
                <div class="text-center leading-tight mt-2">
                  <div class="text-[13px] text-gray-800">{{ getColorName('A', texture) }}</div>
                  <!-- <div class="text-[11px] text-gray-500">{{ getColorEn('A', texture) }}</div> -->
                </div>
              </div>
          </div>
        </div>

        <!-- 定制完成按钮 -->
        <div class="absolute z-40 bottom-10 left-1/2 transform -translate-x-1/2 flex justify-center mt-8"
          @click="showConfirm = true">
          <svg width="124" height="31" viewBox="0 0 124 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M119.806 0.375H4.8047C2.50279 0.375 0.636719 2.24107 0.636719 4.54299V26.0046C0.636719 28.3066 2.50279 30.1726 4.8047 30.1726H119.806C122.108 30.1726 123.974 28.3066 123.974 26.0046V4.54299C123.974 2.24107 122.108 0.375 119.806 0.375Z"
              fill="#F4F1E9" />
            <path
              d="M40.5524 15.4604H41.445C41.4161 16.0881 41.3407 16.7126 41.2192 17.329C41.1229 17.8289 40.9332 18.3062 40.66 18.7358C40.3827 19.1542 40.0086 19.4997 39.5694 19.743C38.9925 20.0538 38.3736 20.2796 37.732 20.4134C37.7034 20.3188 37.6638 20.2278 37.6139 20.1425C37.5584 20.0487 37.5028 19.9549 37.4403 19.8611C37.3867 19.7826 37.3287 19.7073 37.2666 19.6354C37.845 19.5311 38.4053 19.3439 38.9303 19.0796C39.317 18.8827 39.6506 18.5956 39.9029 18.2426C40.1367 17.8843 40.2962 17.4827 40.3718 17.0616C40.4678 16.5325 40.5282 15.9976 40.5524 15.4604ZM37.4055 14.8977H47.7039V15.773H37.3986L37.4055 14.8977ZM37.7077 10.3338H47.3913V13.1125H46.4848V11.2368H38.5761V13.1125H37.7077V10.3338ZM39.3888 12.5706H45.7068V13.4355H39.3888V12.5706ZM41.643 9.05905L42.5148 8.78125C42.6746 9.0487 42.8343 9.35082 42.9906 9.68426C43.1268 9.96275 43.2428 10.2506 43.338 10.5456L42.421 10.8583C42.3369 10.5638 42.2312 10.2759 42.1049 9.99691C41.9676 9.67638 41.8134 9.36328 41.643 9.05905ZM43.4526 15.4222H44.3452V18.899C44.3367 18.9607 44.3413 19.0235 44.3587 19.0833C44.376 19.1432 44.4058 19.1987 44.446 19.2463C44.5883 19.3152 44.7471 19.3429 44.9044 19.3262H46.5299C46.5924 19.3328 46.6555 19.3264 46.7153 19.3073C46.7751 19.2882 46.8303 19.2567 46.8773 19.215C46.9734 19.0744 47.0276 18.9094 47.0336 18.7392C47.0722 18.3816 47.0919 18.0222 47.0926 17.6625C47.1694 17.7188 47.2508 17.7689 47.3358 17.8119C47.4314 17.8642 47.5314 17.9083 47.6345 17.9438L47.895 18.0376C47.8805 18.4843 47.8235 18.9286 47.7248 19.3644C47.681 19.6203 47.5451 19.8513 47.3427 20.0139C47.1233 20.1425 46.8706 20.203 46.6168 20.1876H44.8419C44.5585 20.2004 44.2751 20.1628 44.0049 20.0764C43.9134 20.0431 43.83 19.991 43.76 19.9234C43.6899 19.8557 43.6349 19.7742 43.5985 19.684C43.5105 19.4332 43.4705 19.1681 43.4804 18.9025L43.4526 15.4222Z"
              fill="black" />
            <path
              d="M51.0141 11.0181H51.9172V14.5434C51.9172 14.9846 51.9172 15.4639 51.872 15.9814C51.8269 16.499 51.7817 17.0234 51.6984 17.5583C51.6139 18.0856 51.4897 18.6057 51.3267 19.1143C51.1741 19.5981 50.9555 20.0587 50.6772 20.4829C50.6162 20.4013 50.5476 20.3256 50.4723 20.257C50.3855 20.1737 50.2917 20.0973 50.1944 20.0209C50.1167 19.9582 50.033 19.9035 49.9443 19.8576C50.2731 19.3326 50.5147 18.7579 50.6598 18.1557C50.8096 17.5423 50.9061 16.9171 50.9481 16.2871C50.9898 15.6584 51.0141 15.0749 51.0141 14.5504V11.0181ZM51.5108 13.5813H54.3902V14.4566H51.5108V13.5813ZM51.5803 11.0181H60.5692V11.9489H51.5803V11.0181ZM54.0533 13.5813H54.9008C54.9008 13.6716 54.9008 13.7515 54.9008 13.8175C54.9008 13.8835 54.9008 13.9391 54.9008 13.9808C54.8822 14.907 54.8614 15.6641 54.8383 16.2523C54.8105 16.8289 54.7757 17.27 54.734 17.5687C54.7173 17.7891 54.6508 18.0029 54.5395 18.1939C54.4627 18.2998 54.3614 18.3856 54.2443 18.444C54.118 18.5028 53.9832 18.5415 53.8449 18.5586C53.6436 18.5705 53.4418 18.5705 53.2405 18.5586C52.9928 18.5586 52.7253 18.5482 52.4382 18.5273C52.4284 18.3771 52.404 18.2282 52.3653 18.0827C52.3252 17.9331 52.2681 17.7886 52.195 17.652C52.4415 17.685 52.6897 17.7036 52.9383 17.7077C53.171 17.7077 53.3343 17.7077 53.4281 17.7077C53.4995 17.7098 53.5709 17.7016 53.64 17.6833C53.7022 17.6632 53.7568 17.6243 53.7963 17.5722C53.8757 17.4142 53.9218 17.2416 53.9317 17.0651C53.9664 16.8011 53.9942 16.4017 54.0116 15.8633C54.029 15.325 54.0498 14.606 54.0637 13.7064L54.0533 13.5813ZM58.9889 12.9075L59.8607 13.1437C59.419 14.6618 58.7327 16.0978 57.8288 17.395C57.0043 18.562 55.963 19.5596 54.7618 20.3334C54.7167 20.2674 54.6542 20.1841 54.5778 20.0903C54.5013 19.9965 54.4215 19.8959 54.3381 19.8021C54.2547 19.7083 54.1853 19.6249 54.1228 19.5589C55.3022 18.8892 56.3206 17.9692 57.1063 16.8636C57.9545 15.6617 58.5911 14.3238 58.9889 12.9075ZM55.842 8.90625H56.7486C56.7486 10.064 56.7868 11.1639 56.8632 12.2059C56.95 13.2479 57.0681 14.2031 57.2105 15.0749C57.3376 15.8435 57.5257 16.6008 57.7732 17.3395C57.9397 17.8676 58.1869 18.3667 58.5061 18.8191C58.5944 18.9673 58.7167 19.0925 58.8628 19.1843C59.0089 19.276 59.1747 19.3318 59.3466 19.3471C59.5168 19.3471 59.6419 19.1699 59.7252 18.8156C59.8289 18.2272 59.8847 17.6313 59.8919 17.0338C60.0058 17.1424 60.1277 17.2423 60.2566 17.3325C60.3769 17.4192 60.5076 17.4904 60.6456 17.5444C60.6144 18.1087 60.5389 18.6696 60.4199 19.222C60.3659 19.5378 60.221 19.8312 60.0031 20.0661C59.7995 20.2342 59.5409 20.3208 59.2771 20.3092C58.8797 20.3054 58.4981 20.153 58.2074 19.882C57.8426 19.5437 57.5486 19.1363 57.3425 18.6836C57.0665 18.0943 56.8467 17.4804 56.6861 16.8498C56.4887 16.0818 56.3321 15.3037 56.2172 14.5191C56.0886 13.6681 55.9949 12.7824 55.9323 11.8238C55.8698 10.8652 55.849 9.90657 55.842 8.90625ZM57.3182 9.51756L57.8392 8.94102C58.1036 9.07593 58.361 9.22433 58.6103 9.38561C58.8777 9.55581 59.1278 9.73294 59.3605 9.89966C59.5627 10.0446 59.7564 10.2011 59.9406 10.3685L59.3953 11.0181C59.2174 10.8402 59.0271 10.6753 58.8256 10.5248C58.5929 10.3442 58.3463 10.1775 58.0823 9.99344C57.8184 9.80936 57.5648 9.65996 57.3182 9.51756Z"
              fill="black" />
            <path
              d="M62.959 9.38281H68.169V10.2164H62.959V9.38281ZM63.2507 11.6717H67.8946V20.1744H67.1756V12.4845H63.9593V20.3515H63.2646L63.2507 11.6717ZM63.5981 16.7254H67.5125V17.42H63.6085L63.5981 16.7254ZM63.5981 18.726H67.5125V19.4866H63.6085L63.5981 18.726ZM64.7373 12.2483H65.2236V13.4847C65.2233 13.7617 65.2001 14.0383 65.1541 14.3114C65.1064 14.6112 65.0188 14.9032 64.8936 15.1798C64.7577 15.4779 64.5668 15.7478 64.3309 15.9752C64.2788 15.8991 64.2182 15.8292 64.1503 15.7667C64.0898 15.7036 64.0222 15.6476 63.9489 15.6C64.1614 15.4044 64.3327 15.1682 64.4525 14.9054C64.5618 14.6692 64.6377 14.4191 64.6783 14.1621C64.7153 13.9323 64.735 13.7001 64.7373 13.4674V12.2483ZM64.6227 9.60854H65.2479V12.2586H64.6227V9.60854ZM65.8766 12.2483H66.3732V14.8359C66.3668 14.8893 66.3752 14.9433 66.3976 14.9922C66.3976 15.013 66.4566 15.0235 66.5261 15.0235H66.9568C67.054 15.0235 67.1131 15.0234 67.1304 14.9852C67.1938 15.0346 67.264 15.0744 67.3388 15.1034C67.4179 15.1395 67.4991 15.1708 67.582 15.1971C67.575 15.2521 67.5569 15.305 67.5288 15.3528C67.5007 15.4005 67.4633 15.4421 67.4187 15.4749C67.3023 15.54 67.1697 15.5701 67.0367 15.5618H66.4774C66.3078 15.5799 66.1376 15.5328 66.0016 15.4298C65.8958 15.2561 65.8517 15.0517 65.8766 14.8498V12.2483ZM65.9321 9.60854H66.5747V12.2586H65.9356L65.9321 9.60854ZM68.7108 9.45922H73.0733V15.1485H72.2397V10.3588H68.7316L68.7108 9.45922ZM68.7455 13.3841H69.6034V18.8233C69.5824 18.9851 69.6233 19.1489 69.7181 19.2818C69.8776 19.3706 70.0611 19.407 70.2425 19.3859H72.0417C72.1152 19.3916 72.1891 19.3805 72.2577 19.3534C72.3263 19.3264 72.3878 19.284 72.4377 19.2296C72.5488 19.0443 72.612 18.8342 72.6217 18.6183C72.66 18.3127 72.6878 17.8612 72.7051 17.2603L72.9587 17.4235C73.0501 17.482 73.148 17.5298 73.2504 17.5659L73.5179 17.6632C73.494 18.1938 73.4313 18.722 73.3303 19.2435C73.2849 19.5483 73.1395 19.8293 72.917 20.0424C72.6804 20.2128 72.3916 20.2951 72.1007 20.2751H70.1487C69.8632 20.2862 69.5781 20.2438 69.3082 20.1501C69.2091 20.1112 69.1191 20.0522 69.0438 19.9769C68.9685 19.9016 68.9095 19.8116 68.8706 19.7125C68.7751 19.4262 68.7328 19.1248 68.7455 18.8233V13.3841ZM69.1519 13.3841H72.6252V14.2975H69.1519V13.3841Z"
              fill="black" />
            <path
              d="M79.1685 8.85938L79.9673 9.17194C79.6597 9.80819 79.2946 10.4151 78.8767 10.985C78.4617 11.5569 78.0042 12.0968 77.5082 12.6001C77.045 13.0699 76.5431 13.4997 76.0077 13.8853C75.9752 13.7949 75.9345 13.7077 75.8862 13.6248C75.8306 13.5171 75.7681 13.4025 75.7021 13.2774C75.6495 13.1801 75.5891 13.0871 75.5215 12.9995C76.0164 12.6654 76.4812 12.2889 76.9108 11.8742C77.3698 11.4367 77.7926 10.9627 78.1751 10.4571C78.5595 9.95949 78.8923 9.42421 79.1685 8.85938ZM77.0428 12.3604H77.8903V18.4006C77.8802 18.5989 77.9184 18.7967 78.0014 18.9771C78.0506 19.0507 78.1146 19.1131 78.1894 19.1604C78.2642 19.2076 78.3481 19.2387 78.4356 19.2515C78.7541 19.3088 79.0777 19.3332 79.4012 19.3245H83.9408C84.2368 19.342 84.5327 19.2909 84.8057 19.1751C84.9097 19.11 84.9995 19.0244 85.0693 18.9234C85.1392 18.8225 85.1878 18.7085 85.212 18.5882C85.3109 18.1728 85.3748 17.7498 85.4031 17.3238C85.5352 17.4082 85.6747 17.4803 85.8199 17.5392C85.9588 17.5978 86.1031 17.6432 86.2506 17.6746C86.2076 18.0851 86.138 18.4923 86.0422 18.8938C85.9787 19.1762 85.8529 19.4408 85.674 19.6683C85.5015 19.8666 85.2724 20.0072 85.0175 20.0713C84.6688 20.1573 84.3103 20.1969 83.9512 20.1893H79.4568C78.9709 20.2031 78.4852 20.1541 78.0118 20.0435C77.857 20.0101 77.7105 19.9454 77.5815 19.8534C77.4525 19.7614 77.3437 19.6441 77.2616 19.5085C77.0972 19.1584 77.0221 18.773 77.0428 18.3867V12.3604ZM77.6576 12.3604H85.0662V16.8757H84.1944V13.2496H77.6576V12.3604ZM77.6576 15.4135H84.6042V16.3131H77.6576V15.4135ZM78.9462 9.98473H82.6626V10.8357H78.5502L78.9462 9.98473ZM80.5717 12.6626H81.4192V15.9762H80.5717V12.6626ZM82.3848 9.98473H82.5932L82.7668 9.93605L83.3365 10.3737C83.1489 10.6909 82.9336 11.0174 82.6904 11.3532C82.4543 11.6849 82.1992 12.0027 81.9263 12.3049C81.6588 12.6001 81.4018 12.8606 81.1517 13.0864C81.0783 12.9799 80.9946 12.881 80.9017 12.7911C80.7975 12.6869 80.7071 12.6036 80.6307 12.5376C80.8732 12.3153 81.0984 12.075 81.3046 11.8187C81.5268 11.5373 81.7353 11.2559 81.9263 10.9746C82.0952 10.7214 82.2483 10.4581 82.3848 10.1861V9.98473Z"
              fill="black" />
          </svg>


        </div>






      </div>
    </div>


    <!-- 全屏对话框弹窗（覆盖层） -->
    <div v-if="showConfirm" class="fixed inset-0 z-[200]">
      <!-- 背景遮罩 -->
      <div class="absolute inset-0 bg-black bg-opacity-60" @click="showConfirm = false"></div>
      <!-- 居中内容容器 -->
      <div class="absolute inset-0 flex items-center justify-center p-6">
        <div class="relative w-full max-w-md" @click.stop>
<div
            ref="confirmCardRef"
            class="zaodian bg-[#deccb7] rounded-xl px-6 pt-14 pb-16 shadow-[0_12px_30px_rgba(0,0,0,0.35)] text-center">
            <div class="text-black text-xl">确认定制？</div>
          </div>
          <div class="absolute inset-x-0 -bottom-6 flex justify-between px-6">
            <button type="button"
              class="h-12 w-36 rounded-lg bg-[#9C7D5E] text-white shadow-md active:scale-95 transition-transform"
              @click=" $router.push({ path: `/result/${selectedATexture}/${selectedBTexture}` })">完成配色</button>
            <button type="button"
              class="h-12 w-36 rounded-lg bg-[#50744E] text-white shadow-md active:scale-95 transition-transform"
              @click="showConfirm = false">再玩一次</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted, nextTick, watch } from 'vue'
import * as THREE from 'three'
import { getClonedGLTF } from '@/util/gltfCache'
import { loadTextureFromCandidates } from '@/util/textureCache'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'
import { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js'


// 基础路径适配（改为使用 OSS 加速）
const withBase = (path: string): string => {
  const base = 'https://steppy-dev.oss-cn-guangzhou.aliyuncs.com'
  const cleaned = path.replace(/^\/+/, '')
  return `${base}/${cleaned}`
}

// 贴图路径（A/B）
const getTexturePath = (folder: 'A' | 'B', filename: string): string => {
  const base = 'https://steppy-dev.oss-cn-guangzhou.aliyuncs.com'
  return `${base}/tietu/${folder}/${filename}`
}

// 响应式数据
const containerRef = ref<HTMLElement>()
const loading = ref(true)
const loadingProgress = ref(0)
const error = ref('')
const selectedEnvironment = ref('studio')
const isAnimating = ref(true)
const showGestureHint = ref(true)
const showControlPanel = ref(false)
const cameraPosition = ref({ x: 0, y: 0, z: 5 })
// 确认弹窗
const showConfirm = ref(false)
const confirmCardRef = ref<HTMLElement | null>(null)

// A和B贴图文件名数组
const aTextureNames = ['A1.png', 'A2.png', 'A3.png', 'A4.png', 'A5.png', 'A6.png',]
const bTextureNames = ['B2.png', 'B1.png', 'B3.png', 'B4.png', 'B5.png', 'B6.png',]

// 当前选中的贴图
const selectedATexture = ref('A2.png')
const selectedBTexture = ref('B3.png')

// 贴图缓存
const textureCache: Record<string, THREE.Texture> = {}

// 添加灯光强度控制
const lightingIntensity = ref({
  ambient: 3.0,
  directional: 3.0,
  fill: 2.0,
  additional: 1.5
})

// 添加Mesh列表
const meshList = ref<Array<{ name: string, index: number, mesh: THREE.Mesh }>>([])



// Three.js 相关变量
let scene: THREE.Scene
let camera: THREE.PerspectiveCamera
let renderer: THREE.WebGLRenderer
let controls: OrbitControls
let shoeModel: THREE.Group
let mixer: THREE.AnimationMixer
let animationId: number

// 添加灯光对象引用
let ambientLight: THREE.AmbientLight
let directionalLight: THREE.DirectionalLight
let fillLight: THREE.DirectionalLight
let topLight: THREE.DirectionalLight
let bottomLight: THREE.DirectionalLight
let leftLight: THREE.DirectionalLight
let rightLight: THREE.DirectionalLight
let spotLight: THREE.SpotLight

// 切换控制面板显示
const toggleControlPanel = () => {
  showControlPanel.value = !showControlPanel.value
}

// 更新相机位置
const updateCameraPosition = () => {
  if (camera) {
    camera.position.set(cameraPosition.value.x, cameraPosition.value.y, cameraPosition.value.z)
    camera.updateProjectionMatrix()
  }
}

// 更新灯光强度
const updateLightingIntensity = () => {
  if (ambientLight) ambientLight.intensity = lightingIntensity.value.ambient
  if (directionalLight) directionalLight.intensity = lightingIntensity.value.directional
  if (fillLight) fillLight.intensity = lightingIntensity.value.fill
  if (topLight) topLight.intensity = lightingIntensity.value.additional
  if (bottomLight) bottomLight.intensity = lightingIntensity.value.additional * 0.8
  if (leftLight) leftLight.intensity = lightingIntensity.value.additional
  if (rightLight) rightLight.intensity = lightingIntensity.value.additional
  if (spotLight) spotLight.intensity = lightingIntensity.value.directional * 0.8
}

// 获取指定Mesh的函数
const getMeshByName = (name: string): THREE.Mesh | null => {
  const found = meshList.value.find(item => item.name === name)
  return found ? found.mesh : null
}

const getMeshByIndex = (index: number): THREE.Mesh | null => {
  const found = meshList.value.find(item => item.index === index)
  return found ? found.mesh : null
}

// 控制台打印 Mesh 名称/索引/父级
const logMeshNames = (limit: number = 200) => {
  if (!meshList.value.length) {
    console.warn('[Mesh] 当前 meshList 为空')
    return
  }
  const rows = meshList.value.slice(0, limit).map(({ name, index, mesh }) => {
    const parents: string[] = []
    let p: any = mesh.parent
    let depth = 0
    while (p && depth < 5) {
      parents.push(String(p.name || ''))
      p = p.parent
      depth++
    }
    return {
      index,
      name,
      parentChain: parents.join(' > '),
      materialType: Array.isArray(mesh.material) ? 'Array' : (mesh.material as any)?.type || 'Unknown'
    }
  })
  console.log(`[Mesh] 共 ${meshList.value.length} 个，以下展示前 ${rows.length} 个：`)
  // @ts-ignore console.table 在浏览器存在
  console.table(rows)
}



const switchToATexture = (textureName: string) => {
  if (!aTextureNames.includes(textureName)) {
    return
  }

  selectedATexture.value = textureName

  // 使用环境适配的路径
  const texturePath = getTexturePath('A', textureName)
  applyTextureToMeshA(texturePath)
}



const switchToBTexture = (textureName: string) => {
  if (!bTextureNames.includes(textureName)) {
    return
  }

  selectedBTexture.value = textureName


  // 使用环境适配的路径
  const texturePath = getTexturePath('B', textureName)
  applyTextureToMeshB(texturePath)
}

// 应用贴图到A mesh
const applyTextureToMeshA = (texturePath: string) => {
  if (!shoeModel) return

  const fileName = texturePath.split('/').pop()!
  const candidates = [
    texturePath,
    `/assets/tietu/A/${fileName}`,
    `./tietu/A/${fileName}`,
    `./src/assets/tietu/A/${fileName}`,
  ]

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      texture.wrapS = THREE.ClampToEdgeWrapping
      texture.wrapT = THREE.ClampToEdgeWrapping
      texture.repeat.set(1, 1)
      texture.offset.set(0, 0)
      texture.minFilter = THREE.LinearMipmapLinearFilter
      texture.magFilter = THREE.LinearFilter
      texture.flipY = false

      let appliedCount = 0
      shoeModel!.traverse((child) => {
        if (child instanceof THREE.Mesh) {
          const meshName = child.name.trim()
          if (meshName === 'A') {
            if (child.material instanceof THREE.MeshStandardMaterial) {
              const newMaterial = child.material.clone()
              newMaterial.map = texture
              newMaterial.needsUpdate = true
              child.material = newMaterial
              appliedCount++
            } else if (Array.isArray(child.material)) {
              child.material = child.material.map((mat) => {
                if (mat instanceof THREE.MeshStandardMaterial) {
                  const newMat = mat.clone()
                  newMat.map = texture
                  newMat.needsUpdate = true
                  return newMat
                }
                return mat
              })
              appliedCount++
            }
          }
        }
      })
    })
    .catch(() => { })
}

// 应用贴图到B mesh
const applyTextureToMeshB = (texturePath: string) => {
  if (!shoeModel) return

  const fileName = texturePath.split('/').pop()!
  const candidates = [
    texturePath,
    `/assets/tietu/B/${fileName}`,
    `./tietu/B/${fileName}`,
    `./src/assets/tietu/B/${fileName}`,
  ]

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      texture.wrapS = THREE.ClampToEdgeWrapping
      texture.wrapT = THREE.ClampToEdgeWrapping
      texture.repeat.set(1, 1)
      texture.offset.set(0, 0)
      texture.minFilter = THREE.LinearMipmapLinearFilter
      texture.magFilter = THREE.LinearFilter
      texture.flipY = false

      let appliedCount = 0
      shoeModel!.traverse((child) => {
        if (child instanceof THREE.Mesh) {
          const meshName = child.name.trim()
          if (meshName === 'B') {
            if (child.material instanceof THREE.MeshStandardMaterial) {
              const newMaterial = child.material.clone()
              newMaterial.map = texture
              newMaterial.needsUpdate = true
              child.material = newMaterial
              appliedCount++
            } else if (Array.isArray(child.material)) {
              child.material = child.material.map((mat) => {
                if (mat instanceof THREE.MeshStandardMaterial) {
                  const newMat = mat.clone()
                  newMat.map = texture
                  newMat.needsUpdate = true
                  return newMat
                }
                return mat
              })
              appliedCount++
            }
          }
        }
      })
    })
    .catch(() => { })
}




// 初始化Three.js
const initThree = async () => {
  if (!containerRef.value) return

  try {
    // 创建场景
    scene = new THREE.Scene()
    // 移除场景背景，保持透明
    scene.background = null
    // 确保没有雾效
    scene.fog = null
    // 确保没有环境贴图
    scene.environment = null

    // 创建相机
    const container = containerRef.value
    camera = new THREE.PerspectiveCamera(
      50, // 减小视野角度，让模型看起来更合适
      container.clientWidth / container.clientHeight,
      0.1,
      1000
    )
    camera.position.set(cameraPosition.value.x, cameraPosition.value.y, cameraPosition.value.z) // 使用响应式数据中的相机位置

    // 创建渲染器
    renderer = new THREE.WebGLRenderer({
      antialias: true,
      alpha: true, // 启用透明背景
      preserveDrawingBuffer: true, // 用于截图
      premultipliedAlpha: false // 确保透明度正确处理
    })


    renderer.setSize(container.clientWidth, container.clientHeight)
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))
    renderer.shadowMap.enabled = true
    renderer.shadowMap.type = THREE.PCFSoftShadowMap
    // 禁用色调映射，避免颜色偏移
    renderer.toneMapping = THREE.ACESFilmicToneMapping
    renderer.toneMappingExposure = 2.0  // 标准曝光度
    renderer.outputColorSpace = THREE.SRGBColorSpace
    // 设置完全透明背景
    renderer.setClearColor(0x000000, 0) // 完全透明


    // 禁用任何可能的颜色处理
    renderer.autoClear = true
    renderer.autoClearColor = true
    renderer.autoClearDepth = true
    renderer.autoClearStencil = true
    // 确保canvas元素也是透明的
    renderer.domElement.style.background = 'transparent'
    renderer.domElement.style.opacity = '1'

    // 确保canvas能接收鼠标事件
    renderer.domElement.style.pointerEvents = 'auto'
    renderer.domElement.style.touchAction = 'none'
    renderer.domElement.style.userSelect = 'none'


    container.appendChild(renderer.domElement)

    // 创建控制器
    controls = new OrbitControls(camera, renderer.domElement)
    controls.enableDamping = true
    controls.dampingFactor = 0.05
    controls.enableZoom = true
    controls.enablePan = false
    controls.enableRotate = true

    // 设置旋转中心点
    controls.target.set(0, 0, 0)

    // 设置距离限制
    controls.maxDistance = 10
    controls.minDistance = 2

    // 设置垂直旋转角度范围（重要！）
    // controls.minPolarAngle = 0 // 允许从顶部看
    // controls.maxPolarAngle = Math.PI // 允许从底部看

    const fixedPolarAngle = Math.PI / 2 // 固定为水平角度（90°）

    controls.minPolarAngle = fixedPolarAngle
    controls.maxPolarAngle = fixedPolarAngle


    // 设置水平旋转范围（无限制）
    controls.minAzimuthAngle = -Infinity
    controls.maxAzimuthAngle = Infinity

    // 确保鼠标/触摸事件正确处理
    controls.mouseButtons = {
      LEFT: THREE.MOUSE.ROTATE,
      MIDDLE: THREE.MOUSE.DOLLY,
      RIGHT: THREE.MOUSE.PAN
    }

    // 触摸事件设置
    controls.touches = {
      ONE: THREE.TOUCH.ROTATE,
      TWO: THREE.TOUCH.DOLLY_PAN
    }

    // 添加光照
    setupLighting()

    // 加载模型
    await loadShoeModel()

    // 加载完成后，给 AB 区和 public 下的默认贴图先贴上
    applyInitialDefaultTextures()

    // 开始渲染循环
    animate()

    // 设置响应式
    setupResponsive()

    loading.value = false

    // 3秒后隐藏手势提示
    setTimeout(() => {
      showGestureHint.value = false
    }, 3000)

  } catch (err) {
    console.error('初始化Three.js失败:', err)
    error.value = '初始化失败，请刷新页面重试'
    loading.value = false
  }
}

// 设置光照
const setupLighting = () => {
  // 环境光 - 使用白光，避免色彩偏移
  ambientLight = new THREE.AmbientLight(0xffffff, lightingIntensity.value.ambient)
  scene.add(ambientLight)

  // 主光源 - 使用纯白光
  directionalLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.directional)
  directionalLight.position.set(5, 5, 5)
  directionalLight.castShadow = true
  directionalLight.shadow.mapSize.width = 2048
  directionalLight.shadow.mapSize.height = 2048
  scene.add(directionalLight)

  // 补充光源 - 使用纯白光
  fillLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.fill)
  fillLight.position.set(-5, 0, -5)
  scene.add(fillLight)

  // 添加顶部光源
  topLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  topLight.position.set(0, 10, 0)
  scene.add(topLight)

  // 添加底部光源
  bottomLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional * 0.8)
  bottomLight.position.set(0, -10, 0)
  scene.add(bottomLight)

  // 添加左侧光源
  leftLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  leftLight.position.set(-10, 0, 0)
  scene.add(leftLight)

  // 添加右侧光源
  rightLight = new THREE.DirectionalLight(0xffffff, lightingIntensity.value.additional)
  rightLight.position.set(10, 0, 0)
  scene.add(rightLight)

  // 添加前方聚光灯
  spotLight = new THREE.SpotLight(0xffffff, lightingIntensity.value.directional * 0.8, 100, Math.PI / 6, 0.5)
  spotLight.position.set(0, 0, 15)
  spotLight.target.position.set(0, 0, 0)
  spotLight.castShadow = true
  scene.add(spotLight)
  scene.add(spotLight.target)
}

// 修改加载鞋子模型函数
const loadShoeModel = async () => {
  try {
    const { scene: clonedScene, animations } = await getClonedGLTF(withBase('xie.gltf'))
    shoeModel = clonedScene

    // 设置模型属性 - 放大3倍
    shoeModel.scale.set(11, 11, 11)
    shoeModel.position.set(0, 0, 0)

    // 遍历模型，设置材质和阴影
    let meshIndex = 0
    shoeModel.traverse((child) => {
      if (child instanceof THREE.Mesh) {
        // 保存原始材质到userData（克隆后取一个代表材质）
        if (child.material) {
          child.userData.originalMaterial = (Array.isArray(child.material)
            ? child.material[0]
            : child.material
          )?.clone?.()
        }

        child.castShadow = true
        child.receiveShadow = true

        // 确保材质没有额外的颜色偏移
        if (child.material) {
          if (Array.isArray(child.material)) {
            child.material.forEach((mat) => {
              if (mat instanceof THREE.MeshStandardMaterial) {
                mat.envMapIntensity = 0
              }
            })
          } else if (child.material instanceof THREE.MeshStandardMaterial) {
            child.material.envMapIntensity = 0
          }
          ; (child.material as any).needsUpdate = true
        }

        meshList.value.push({ name: child.name || `Mesh ${meshIndex}`, index: meshIndex, mesh: child })
        meshIndex++
      }
    })

    scene.add(shoeModel)

    // 如果有动画，设置动画混合器
    if (animations && animations.length > 0) {
      mixer = new THREE.AnimationMixer(shoeModel)
      animations.forEach((clip) => {
        const action = mixer.clipAction(clip)
        action.play()
      })
    }

    // 打印 Mesh 列表，方便定位名称
    logMeshNames(300)
  } catch (err) {
    console.error('模型加载失败:', err)
    throw err
  }
}

// 根据关键词集合匹配 Mesh（支持包含匹配和父级节点名匹配）并应用贴图
const applyTextureToMeshesByKeywords = (keywords: string[], texturePath: string) => {
  if (!shoeModel) return

  const tryApply = (texture: THREE.Texture) => {
    // 确保颜色空间正确
    // @ts-ignore - 兼容不同 three 版本
    texture.colorSpace = (THREE as any).SRGBColorSpace || (THREE as any).sRGBEncoding
    texture.wrapS = THREE.ClampToEdgeWrapping
    texture.wrapT = THREE.ClampToEdgeWrapping
    texture.repeat.set(1, 1)
    texture.offset.set(0, 0)
    texture.minFilter = THREE.LinearMipmapLinearFilter
    texture.magFilter = THREE.LinearFilter
    texture.flipY = false

    let appliedCount = 0
    const lowers = keywords.map(k => k.trim().toLowerCase()).filter(Boolean)

    shoeModel.traverse((child) => {
      if (child instanceof THREE.Mesh) {
        const meshName = (child.name || '').trim()
        const meshLower = meshName.toLowerCase()

        const parentNames: string[] = []
        let p: any = child.parent
        while (p && p !== shoeModel && parentNames.length < 4) {
          if (p.name) parentNames.push(String(p.name).toLowerCase())
          p = p.parent
        }

        const matched = lowers.some(k =>
          meshLower.includes(k) || parentNames.some(n => n.includes(k))
        )

        if (matched) {
          if (child.material instanceof THREE.MeshStandardMaterial) {
            const newMaterial = child.material.clone()
            newMaterial.map = texture
            newMaterial.needsUpdate = true
            child.material = newMaterial
            appliedCount++
          } else if (Array.isArray(child.material)) {
            child.material = child.material.map((mat) => {
              if (mat instanceof THREE.MeshStandardMaterial) {
                const newMat = mat.clone()
                newMat.map = texture
                newMat.needsUpdate = true
                return newMat
              }
              return mat
            })
            appliedCount++
          }
        }
      }
    })
    if (appliedCount === 0) {
      console.warn('[贴图未匹配] 未找到匹配的 Mesh：', keywords, ' 当前可用Mesh示例：', meshList.value.slice(0, 10))
    } else {
      console.info('[贴图已应用]', texturePath, ' 匹配关键词：', keywords, ' 数量：', appliedCount)
    }
    return appliedCount
  }

  const candidates: string[] = Array.from(new Set([
    texturePath,
    withBase(texturePath.replace(/^\//, '')),
    `/` + texturePath.replace(/^\//, ''),
    texturePath.replace(/^\//, ''),
    `./` + texturePath.replace(/^\//, ''),
    `${window.location.origin}${withBase(texturePath.replace(/^\//, ''))}`
  ]))

  loadTextureFromCandidates(candidates)
    .then((texture) => {
      const key = candidates[0]
      if (key) textureCache[key] = texture
      tryApply(texture)
    })
    .catch((err) => {
      console.error('[贴图加载失败-所有候选均失败]', texturePath, err)
    })
}

// 移除指定网格的材质
const removeMaterialFromMesh = (keywords: string[]) => {
  if (!shoeModel) return

  const lowers = keywords.map(k => k.trim().toLowerCase()).filter(Boolean)
  let removedCount = 0

  shoeModel.traverse((child) => {
    if (child instanceof THREE.Mesh) {
      const meshName = (child.name || '').trim()
      const meshLower = meshName.toLowerCase()

      const parentNames: string[] = []
      let p: any = child.parent
      while (p && p !== shoeModel && parentNames.length < 4) {
        if (p.name) parentNames.push(String(p.name).toLowerCase())
        p = p.parent
      }

      const matched = lowers.some(k =>
        meshLower.includes(k) || parentNames.some(n => n.includes(k))
      )

      if (matched) {
        child.material = new THREE.MeshBasicMaterial({ visible: false })
        removedCount++
      }
    }
  })

  if (removedCount > 0) {
    console.info('[材质已移除]', keywords, '数量：', removedCount)
  } else {
    console.warn('[材质移除失败] 未找到匹配的 Mesh：', keywords)
  }
}

// 应用默认贴图：AB + public 根目录的 xiedai/xiedi/xiedian
const applyInitialDefaultTextures = () => {
  // A/B 默认
  applyTextureToMeshA(getTexturePath('A', selectedATexture.value))
  applyTextureToMeshB(getTexturePath('B', selectedBTexture.value))

  // public 根目录（Vite 会以站点根路径提供）
  const publicDefaults: Array<{ keywords: string[]; path: string }> = [
    {
      path: withBase('tietu/xiedai.png'),
      keywords: ['xiedai']
    },
    {
      path: withBase('tietu/xiedi.png'),
      keywords: ['xiedi', 'logoai']
    },
    {
      path: withBase('tietu/xian.png'),
      keywords: ['xian']
    },
    {
      path: withBase('tietu/xian2.png'),
      keywords: ['xian2']
    },
    {
      path: withBase('tietu/xiedian.png'),
      keywords: ['xiedian']
    }
  ]

  publicDefaults.forEach(({ keywords, path }) => applyTextureToMeshesByKeywords(keywords, path))

  // 兜底：对已知精确名称再匹配一次（避免关键词不命中）
  const applyExact = (meshName: string, path: string) => applyTextureToMeshesByKeywords([meshName], path)
  applyExact('xiedai', withBase('tietu/xiedai.png'))
  applyExact('xian', withBase('tietu/xian.png'))     // xian 用专属的 xian.png 贴图
  applyExact('xiedian', withBase('tietu/xiedian.png'))

  // 兜底2：如果仍未命中，尝试按常见索引（基于你提供的清单顺序，安全起见仅当索引存在时）
  const byIndex = (idx: number, path: string) => {
    const item = meshList.value.find(m => m.index === idx)
    if (item) {
      applyTextureToMeshesByKeywords([item.name], path)
    }
  }
  byIndex(2, withBase('tietu/xiedai.png'))  // index 2: xiedai
  byIndex(3, withBase('tietu/xian.png'))    // index 3: xian 用专属的 xian.png 贴图
  byIndex(7, withBase('tietu/xiedian.png')) // index 7: xiedian


}

// 渲染循环
const animate = () => {
  animationId = requestAnimationFrame(animate)

  // 更新控制器
  controls.update()

  // 更新动画
  if (mixer && isAnimating.value) {
    mixer.update(0.016)
  }

  // 自动旋转
  if (shoeModel && isAnimating.value) {
    shoeModel.rotation.y += 0.005
  }

  // 渲染
  renderer.render(scene, camera)
}


// 改变环境
const changeEnvironment = () => {
  const environments: { [key: string]: number } = {
    studio: 0xf0f0f0,
    outdoor: 0x87CEEB,
    dark: 0x222222
  }

  scene.background = new THREE.Color(environments[selectedEnvironment.value])
}

// 切换动画
const toggleAnimation = () => {
  isAnimating.value = !isAnimating.value
}

// 重置视角
const resetView = () => {
  cameraPosition.value = { x: 0, y: 0, z: 5 }
  updateCameraPosition()
  controls.reset()
  if (shoeModel) {
    shoeModel.rotation.set(0, 0, 0)
  }

  // 重置灯光强度
  lightingIntensity.value = {
    ambient: 3.0,
    directional: 3.0,
    fill: 2.0,
    additional: 1.5
  }
  updateLightingIntensity()
}

// 截图
const takeScreenshot = () => {
  const canvas = renderer.domElement
  const link = document.createElement('a')
  link.download = 'shoe-screenshot.png'
  link.href = canvas.toDataURL()
  link.click()
}

// 全屏
const toggleFullscreen = () => {
  if (!document.fullscreenElement) {
    containerRef.value?.requestFullscreen()
  } else {
    document.exitFullscreen()
  }
}

// 重试加载
const retryLoad = () => {
  error.value = ''
  loading.value = true
  loadingProgress.value = 0
  initThree()
}

// 响应式设置
const setupResponsive = () => {
  const handleResize = () => {
    if (!containerRef.value) return

    const container = containerRef.value
    camera.aspect = container.clientWidth / container.clientHeight
    camera.updateProjectionMatrix()
    renderer.setSize(container.clientWidth, container.clientHeight)
  }

  window.addEventListener('resize', handleResize)

  // 监听容器大小变化
  const resizeObserver = new ResizeObserver(handleResize)
  resizeObserver.observe(containerRef.value!)

  // 监听屏幕方向变化
  window.addEventListener('orientationchange', () => {
    setTimeout(handleResize, 100) // 延迟处理，确保新尺寸生效
  })
}



// 颜色映射表
const colorMapping: Record<string, { name: string, color: string }> = {
  // A区域颜色
  'A1.png': { name: '雀茶', color: '#8B572A' },
  'A2.png': { name: '樱落', color: '#BA6A74' },
  'A3.png': { name: '裹柳', color: '#C4D69B' },
  'A4.png': { name: '盈盈', color: '#D9A1B3' },
  'A5.png': { name: '唐茶', color: '#A57A68' },
  'A6.png': { name: '古檀', color: '#2B1B12' },

  // B区域颜色
  'B2.png': { name: '金豹', color: '#C49D4D' },
  'B1.png': { name: '凝露', color: '#5C0A1D' },
  'B3.png': { name: '木檀', color: '#9B738F' },
  'B4.png': { name: '柳染', color: '#B4B24B' },
  'B5.png': { name: '胡杏', color: '#FFF1E5' },
  'B6.png': { name: '常春', color: '#C98E85' }
}

// 获取颜色名称
const getColorName = (folder: 'A' | 'B', textureName: string) => {
  const mapping = colorMapping[textureName]
  return mapping ? mapping.name : textureName.replace('.png', '')
}





// 获取颜色
const getColorForTexture = (folder: 'A' | 'B', textureName: string) => {
  const mapping = colorMapping[textureName]
  return mapping ? mapping.color : '#CCCCCC'
}

// 颜色选择器缩略图样式（支持图片预览）
const getSwatchStyle = (folder: 'A' | 'B', textureName: string) => {
  return { backgroundColor: getColorForTexture(folder, textureName) } as Record<string, string>
}

// 金豹(B2)专用缩略图，本地占位，便于你后续直接替换文件
const b2Thumb = new URL('@/assets/tietu/tu.png', import.meta.url).href

// 定制完成
const completeCustomization = () => {
  alert('定制完成！')
  // 可以选择保存当前的鞋子模型或贴图设置
  // 例如，将当前的贴图应用到实际的鞋子模型
  // 或者将当前的贴图保存为新的模型
  console.log('当前选中的A贴图:', selectedATexture.value)
  console.log('当前选中的B贴图:', selectedBTexture.value)
  console.log('当前相机位置:', cameraPosition.value)
  console.log('当前灯光强度:', lightingIntensity.value)
  console.log('当前动画状态:', isAnimating.value)

}


// 生成噪点图片的工具函数
function generateNoise(opacity: number = 0.06, size: number = 100): string {
  const canvas = document.createElement('canvas');
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext('2d');
  if (!ctx) return '';

  const imageData = ctx.createImageData(size, size);
  const buffer = imageData.data;

  for (let i = 0; i < buffer.length; i += 4) {
    const value = Math.random() * 255;
    buffer[i] = value;     // R
    buffer[i + 1] = value; // G
    buffer[i + 2] = value; // B
    buffer[i + 3] = Math.floor(opacity * 255); // Alpha
  }

  ctx.putImageData(imageData, 0, 0);
  return canvas.toDataURL();
}


// 将噪点应用到确认弹窗卡片
const applyNoiseToConfirmCard = () => {
  const el = confirmCardRef.value
  if (!el) return
  const noiseURL = generateNoise(0.08, 1000)
  el.style.backgroundImage = `url(${noiseURL})`
  el.style.backgroundBlendMode = 'multiply'
  el.style.backgroundRepeat = 'repeat'
}

// 监听弹窗显示，等 DOM 渲染后再设置噪点背景
watch(showConfirm, async (visible) => {
  if (visible) {
    await nextTick()
    applyNoiseToConfirmCard()
  }
})

// 生命周期
onMounted(async () => {
  await nextTick()
  initThree()

    // 将Mesh操作函数添加到全局，方便控制台调用
    ; (window as any).getMeshByIndex = getMeshByIndex
    ; (window as any).getMeshByName = getMeshByName
    ; (window as any).meshList = meshList
    ; (window as any).switchToATexture = switchToATexture
    ; (window as any).switchToBTexture = switchToBTexture
    ; (window as any).getColorName = getColorName
    ; (window as any).getColorForTexture = getColorForTexture
    ; (window as any).completeCustomization = completeCustomization
    ; (window as any).dumpMeshNames = (limit?: number) => logMeshNames(limit)


  // 若进入页面时弹窗已显示（极少见），也补一次
  if (showConfirm.value) applyNoiseToConfirmCard()

})

onUnmounted(() => {
  if (animationId) {
    cancelAnimationFrame(animationId)
  }
  if (renderer) {
    renderer.dispose()
  }
  if (controls) {
    controls.dispose()
  }

})
</script>

<style>
/* 控制面板滚动条样式 */
.control-panel::-webkit-scrollbar {
  width: 6px;
}

.control-panel::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.control-panel::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
  transition: background 0.2s;
}

.control-panel::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

/* 滑块样式 */
.slider::-webkit-slider-thumb {
  appearance: none;
  height: 16px;
  width: 16px;
  border-radius: 50%;
  background: #3498db;
  cursor: pointer;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
}

.slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3498db;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
}

.slider::-webkit-slider-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: #ddd;
  border-radius: 4px;
}

.slider::-moz-range-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: #ddd;
  border-radius: 4px;
  border: none;
}

/* 移动端适配 */
@media (max-width: 768px) {

  /* 确保3D视窗在移动端有合适的高度 */
  .relative>div[ref="containerRef"] {
    height: calc(100vh - 300px) !important;
    min-height: 300px !important;
  }

  /* 底部面板在移动端的样式调整 */
  .absolute.bottom-0 {
    max-height: 60vh !important;
    overflow-y: auto !important;
  }

  /* 颜色选择器在移动端稍小一些 */
  .w-12.h-12 {
    width: 2.5rem !important;
    height: 2.5rem !important;
  }

  /* 调整颜色选择器间距 */
  .space-x-4>*+* {
    margin-left: 0.75rem !important;
  }

  /* 调整按钮高度 */
  .py-4 {
    padding-top: 0.75rem !important;
    padding-bottom: 0.75rem !important;
  }
}

/* 小屏幕适配 */
@media (max-width: 480px) {

  /* 进一步减小3D视窗高度 */
  .relative>div[ref="containerRef"] {
    height: calc(100vh - 350px) !important;
    min-height: 250px !important;
  }

  /* 颜色选择器更小 */
  .w-12.h-12 {
    width: 2rem !important;
    height: 2rem !important;
  }

  /* 减小间距 */
  .space-x-4>*+* {
    margin-left: 0.5rem !important;
  }

  .space-y-6>*+* {
    margin-top: 1rem !important;
  }

  /* 调整内边距 */
  .p-6 {
    padding: 1rem !important;
  }

  /* 调整字体大小 */
  .text-lg {
    font-size: 1rem !important;
  }

  /* 调整按钮文字大小 */
  .text-lg.font-semibold {
    font-size: 1rem !important;
  }
}

/* 横屏适配 */
@media (orientation: landscape) and (max-height: 600px) {
  .relative>div[ref="containerRef"] {
    height: 50vh !important;
    min-height: 200px !important;
  }

  .absolute.bottom-0 {
    max-height: 45vh !important;
  }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {

  /* 触摸设备上的按钮反馈 */
  .cursor-pointer:active {
    transform: scale(0.95) !important;
    transition: transform 0.1s !important;
  }

  /* 颜色选择器的触摸反馈 */
  .w-12.h-12:active {
    transform: scale(0.9) !important;
  }

  /* 移除hover效果 */
  .hover\:border-gray-400:hover {
    border-color: inherit !important;
  }

  .hover\:from-orange-500:hover {
    background-image: inherit !important;
  }
}

/* 确保滚动条样式 */
.overflow-y-auto::-webkit-scrollbar {
  width: 4px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

/* 确保白色颜色有边框可见性 */
.w-12.h-12[style*="background-color: rgb(255, 255, 255)"],
.w-12.h-12[style*="background-color: #FFFFFF"],
.w-12.h-12[style*="background-color: #FDF5E6"] {
  border: 4px solid #e5e5e5 !important;
}

/* 无障碍适配 */
@media (prefers-reduced-motion: reduce) {
  .animate-spin {
    animation: none !important;
  }

  .transition-all {
    transition: none !important;
  }

  .transform {
    transform: none !important;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .bg-gradient-to-b {
    background: #f5f5f5 !important;
  }

  .text-gray-600 {
    color: #000000 !important;
  }

  .border-gray-300 {
    border-color: #000000 !important;
  }
}
</style>