<template>
  <div class="min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white overflow-hidden relative">
    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio 
      ref="bgmAudio" 
      loop 
      preload="auto"
      class="hidden"
    >
      <!-- ä½¿ç”¨data URLç”Ÿæˆç®€å•çš„BGM -->
    </audio>

    <!-- åƒç´ é£æ ¼èƒŒæ™¯ -->
    <div class="pixel-bg absolute inset-0"></div>
    
    <!-- é›¨æ»´åŠ¨ç”»èƒŒæ™¯ -->
    <div class="rain-container absolute inset-0 pointer-events-none">
      <div v-for="n in 30" :key="n" class="rain-drop" :style="rainDropStyle(n)"></div>
    </div>

    <!-- éœ“è™¹ç¯æ•ˆæœçš„æ ‡é¢˜ -->
    <div class="relative z-10">
      <header class="text-center py-8 relative">
        <div class="neon-title text-6xl md:text-8xl font-bold mb-4 tracking-wider pixel-font">
          å†è§é»æ˜
        </div>
        <div class="neon-subtitle text-2xl md:text-3xl font-light tracking-widest opacity-80">
          FAREWELL TO DAWN
        </div>
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent animate-pulse"></div>
      </header>

      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <div class="container mx-auto px-4 py-8">
        <!-- æ•…äº‹èƒŒæ™¯ -->
        <section class="mb-16 text-center">
          <div class="backdrop-blur-sm bg-black/30 rounded-lg p-8 border border-red-500/30 fade-in-up pixel-border">
            <h2 class="text-3xl md:text-4xl font-bold mb-6 text-red-400 pixel-font">æ¸¸æˆèƒŒæ™¯</h2>
            <div class="grid md:grid-cols-2 gap-8 items-center">
              <div class="text-left space-y-4 text-lg leading-relaxed">
                <p class="slide-in-left">åœ¨è¿™ä¸ªå……æ»¡å±é™©ä¸æœºé‡çš„åŸå¸‚é‡Œï¼Œé»‘ç™½ä¸¤é“çš„ç•Œé™æ—©å·²æ¨¡ç³Šä¸æ¸…ã€‚</p>
                <p class="slide-in-left delay-1">ä¹åå¹´ä»£çš„é¦™æ¸¯ï¼Œéœ“è™¹é—ªçƒï¼Œäººå¿ƒé™©æ¶ã€‚</p>
                <p class="slide-in-left delay-2">å½“é»æ˜ç ´æ™“æ—¶ï¼Œæœ‰äººä¼šæ°¸è¿œå‘Šåˆ«è¿™ä¸ªä¸–ç•Œ...</p>
              </div>
              <div class="slide-in-right">
                <!-- SVG é¦™æ¸¯å¤œæ™¯ -->
                <div class="pixel-city-animation">
                  <svg viewBox="0 0 400 200" class="w-full h-48 rounded-lg border-2 border-red-500/50">
                    <defs>
                      <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#1a1a2e"/>
                        <stop offset="100%" style="stop-color:#16213e"/>
                      </linearGradient>
                    </defs>
                    <!-- å¤©ç©ºèƒŒæ™¯ -->
                    <rect width="400" height="200" fill="url(#skyGradient)"/>
                    <!-- å»ºç­‘ç‰© -->
                    <rect x="50" y="120" width="40" height="80" fill="#2c3e50" class="building-1"/>
                    <rect x="100" y="100" width="30" height="100" fill="#34495e" class="building-2"/>
                    <rect x="140" y="110" width="50" height="90" fill="#2c3e50" class="building-3"/>
                    <rect x="200" y="90" width="35" height="110" fill="#34495e" class="building-4"/>
                    <rect x="250" y="105" width="45" height="95" fill="#2c3e50" class="building-5"/>
                    <rect x="310" y="85" width="40" height="115" fill="#34495e" class="building-6"/>
                    <!-- çª—æˆ·ç¯å…‰ -->
                    <rect x="55" y="130" width="8" height="8" fill="#ffd700" class="window-light"/>
                    <rect x="70" y="145" width="8" height="8" fill="#ffd700" class="window-light delay-1"/>
                    <rect x="105" y="115" width="6" height="6" fill="#ffd700" class="window-light delay-2"/>
                    <rect x="145" y="125" width="8" height="8" fill="#ffd700" class="window-light delay-3"/>
                    <rect x="205" y="105" width="6" height="6" fill="#ffd700" class="window-light"/>
                    <rect x="255" y="120" width="8" height="8" fill="#ffd700" class="window-light delay-1"/>
                    <rect x="315" y="100" width="6" height="6" fill="#ffd700" class="window-light delay-2"/>
                    <!-- éœ“è™¹æ‹›ç‰Œ -->
                    <rect x="160" y="130" width="20" height="10" fill="#ff0040" class="neon-sign"/>
                    <rect x="270" y="125" width="15" height="8" fill="#00ff88" class="neon-sign delay-1"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- è§’è‰²è£…å¤‡ -->
        <section class="mb-16">
          <h2 class="text-4xl font-bold text-center mb-12 neon-text pixel-font">è§’è‰²è£…å¤‡</h2>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- è£…å¤‡å¡ç‰‡ -->
            <div v-for="(item, index) in equipment" :key="index" 
                 class="equipment-card bg-gradient-to-br from-gray-800/90 to-gray-900/90 rounded-lg p-6 border border-red-500/30 hover:border-red-500 transition-all duration-300 hover:scale-105 pixel-border"
                 :style="{ animationDelay: `${index * 0.2}s` }">
              <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mr-4 pixel-circle">
                  <span class="text-xl font-bold">{{ index + 1 }}</span>
                </div>
                <h3 class="text-xl font-bold pixel-font">{{ item.name }}</h3>
              </div>
              <p class="text-gray-300 leading-relaxed mb-4">{{ item.description }}</p>
              <div class="mt-4 flex justify-center">
                <!-- SVG å›¾æ ‡æ›¿æ¢å›¾ç‰‡ -->
                <div class="w-24 h-24 border border-red-500/30 rounded-lg flex items-center justify-center bg-gray-700/50 pixel-item">
                  <div v-html="item.icon" class="w-16 h-16"></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- æ•…äº‹æƒ…èŠ‚ -->
        <section class="mb-16">
          <h2 class="text-4xl font-bold text-center mb-12 neon-text pixel-font">å‰§æƒ…ç‰‡æ®µ</h2>
          <div class="backdrop-blur-sm bg-black/40 rounded-lg p-8 border border-red-500/30 pixel-border">
            <div class="space-y-6 text-lg leading-relaxed">
              <p class="typewriter">æ¥ä¸‹æ¥ä½ å°±å¯ä»¥å¼€å§‹ä½ çš„è¡¨æ¼”äº†ï¼Œå‰é¢ä½ å°±ä¼šä½“ä¼šåˆ°è¢«äººå›´å›°çš„æ„Ÿè§‰...</p>
              <p class="typewriter delay-3">ä½ è¯´ä»€ä¹ˆéƒ½æ˜¯ä»€ä¹ˆï¼Œå†…å®¹é—®siræ‹¿ä½ ä¸€ç‚¹åŠæ³•éƒ½æ²¡æœ‰ï¼Œæ¸¯éŸ³è…”èµ·æ¥...</p>
              <p class="typewriter delay-6">é©¬é›…èµ·æ¥ï¼Œä¸œå…´å¼Ÿå¼Ÿï¼ŒçƒŸç†çœ¼å¥—è¯·ä¸Šèº«ï¼Œè®°ä½äº†è¦å¤šè··èˆŒåˆå¤šé»éŸ³...</p>
            </div>
          </div>
        </section>

        <!-- æ¸¸æˆè§„åˆ™ -->
        <section class="mb-16">
          <h2 class="text-4xl font-bold text-center mb-12 neon-text pixel-font">æ¸¸æˆé¡»çŸ¥</h2>
          <div class="grid md:grid-cols-2 gap-8">
            <div class="rule-card bg-gradient-to-br from-red-900/30 to-black/50 rounded-lg p-6 border border-red-500/30 pixel-border">
              <h3 class="text-2xl font-bold mb-4 text-red-400 pixel-font">å…¥æˆè¦æ±‚</h3>
              <ul class="space-y-2 text-gray-300">
                <li class="pixel-bullet">â€¢ ä¿æŒè§’è‰²è®¾å®š</li>
                <li class="pixel-bullet">â€¢ ä½“éªŒæ¸¯é£æ–‡åŒ–</li>
                <li class="pixel-bullet">â€¢ æ²‰æµ¸å¼è¡¨æ¼”</li>
                <li class="pixel-bullet">â€¢ å›¢é˜Ÿåä½œ</li>
              </ul>
            </div>
            <div class="rule-card bg-gradient-to-br from-red-900/30 to-black/50 rounded-lg p-6 border border-red-500/30 pixel-border">
              <h3 class="text-2xl font-bold mb-4 text-red-400 pixel-font">æ¸¸æˆç›®æ ‡</h3>
              <ul class="space-y-2 text-gray-300">
                <li class="pixel-bullet">â€¢ æ‰¾å‡ºçœŸç›¸</li>
                <li class="pixel-bullet">â€¢ å®Œæˆä»»åŠ¡</li>
                <li class="pixel-bullet">â€¢ ç”Ÿå­˜åˆ°æœ€å</li>
                <li class="pixel-bullet">â€¢ æ­å¼€è°œåº•</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- æ°›å›´å±•ç¤º -->
        <section class="text-center mb-16">
          <h2 class="text-4xl font-bold mb-12 neon-text pixel-font">æ¸¸æˆæ°›å›´</h2>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div v-for="(item, index) in atmosphereItems" :key="index" 
                 class="atmosphere-card bg-gray-800/50 rounded-lg p-4 border border-red-500/30 hover:border-red-500 transition-all duration-300 hover:scale-110 cursor-pointer pixel-border"
                 @click="playSound(item.sound)">
              <div v-html="item.icon" class="w-16 h-16 mx-auto mb-2"></div>
              <p class="text-sm text-gray-300">{{ item.name }}</p>
            </div>
          </div>
        </section>
      </div>

      <!-- æ§åˆ¶æŒ‰é’® -->
      <div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2 md:gap-4">
        <button 
          @click="toggleMusic" 
          class="control-btn bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center gap-2 pixel-border"
        >
          <span v-if="isPlaying">ğŸ”Š</span>
          <span v-else>ğŸ”‡</span>
          <span class="btn-text">{{ isPlaying ? 'é™éŸ³' : 'BGM' }}</span>
        </button>
        <button 
          @click="toggleFullscreen" 
          class="control-btn bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center gap-2 pixel-border"
        >
          <span>ğŸ–¥ï¸</span>
          <span class="btn-text">å…¨å±</span>
        </button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'

// éŸ³é¢‘æ§åˆ¶
const bgmAudio = ref<HTMLAudioElement>()
const isPlaying = ref(false)

// è£…å¤‡æ•°æ® - ä½¿ç”¨SVGå›¾æ ‡
const equipment = ref([
  {
    name: "é»‘è‰²æ­£è£…",
    description: "æ ‡å‡†çš„é»‘è‰²è¥¿è£…ï¼Œå½°æ˜¾èº«ä»½åœ°ä½ï¼Œè®©ä½ åœ¨å¤œè‰²ä¸­æ›´åŠ ç¥ç§˜ã€‚",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-gray-800">
      <rect x="20" y="20" width="24" height="40" fill="#1a1a1a" stroke="#333" stroke-width="2"/>
      <rect x="22" y="22" width="20" height="8" fill="#333"/>
      <circle cx="32" cy="18" r="6" fill="#f4c2a1"/>
      <rect x="28" y="30" width="8" height="2" fill="#ff0000"/>
    </svg>`
  },
  {
    name: "é›ªèŒ„",
    description: "å¤å·´é›ªèŒ„ï¼Œç‚¹ç‡ƒåçƒŸé›¾ç¼­ç»•ï¼Œå¢æ·»å‡ åˆ†æ±Ÿæ¹–æ°”æ¯ã€‚",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-amber-600">
      <rect x="10" y="30" width="44" height="4" rx="2" fill="#8B4513"/>
      <rect x="8" y="31" width="4" height="2" rx="1" fill="#CD853F"/>
      <circle cx="60" cy="32" r="2" fill="#FF4500" class="animate-pulse"/>
      <path d="M 56 28 Q 58 26 60 28 Q 58 30 56 32" fill="#666" opacity="0.5" class="smoke"/>
    </svg>`
  },
  {
    name: "å·§å…‹åŠ›é›ªç³•",
    description: "æ„å¤–çš„é“å…·ï¼Œåœ¨ç´§å¼ çš„æ°›å›´ä¸­å¸¦æ¥ä¸€ä¸ç”œèœœã€‚",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-amber-700">
      <rect x="24" y="45" width="16" height="15" fill="#DEB887"/>
      <rect x="26" y="20" width="12" height="25" fill="#8B4513"/>
      <circle cx="32" cy="15" r="8" fill="#F4A460"/>
      <circle cx="28" cy="12" r="2" fill="#8B4513"/>
      <circle cx="36" cy="18" r="2" fill="#8B4513"/>
    </svg>`
  },
  {
    name: "æ‰‹æª",
    description: "æœ€åçš„ä¾é ï¼Œå…³é”®æ—¶åˆ»å¯èƒ½å†³å®šç”Ÿæ­»ã€‚",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-gray-600">
      <rect x="10" y="28" width="20" height="8" fill="#2F4F4F"/>
      <rect x="30" y="30" width="12" height="4" fill="#2F4F4F"/>
      <rect x="42" y="31" width="8" height="2" fill="#2F4F4F"/>
      <rect x="8" y="32" width="4" height="2" fill="#1C1C1C"/>
      <circle cx="45" cy="32" r="1" fill="#FFD700"/>
    </svg>`
  },
  {
    name: "åŠ³åŠ›å£«æ‰‹è¡¨",
    description: "å¥¢åçš„è±¡å¾ï¼Œæ˜¾ç¤ºç€ä¸»äººçš„èº«ä»½å’Œåœ°ä½ã€‚",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-yellow-500">
      <circle cx="32" cy="32" r="16" fill="#FFD700" stroke="#B8860B" stroke-width="2"/>
      <circle cx="32" cy="32" r="12" fill="#1C1C1C"/>
      <rect x="31" y="20" width="2" height="8" fill="#FFD700"/>
      <rect x="31" y="36" width="2" height="8" fill="#FFD700"/>
      <rect x="44" y="31" width="8" height="2" fill="#FFD700"/>
      <rect x="20" y="31" width="8" height="2" fill="#FFD700"/>
      <circle cx="32" cy="32" r="2" fill="#FFD700"/>
    </svg>`
  }
])

// æ°›å›´å…ƒç´ 
const atmosphereItems = ref([
  {
    name: "éœ“è™¹ç¯",
    sound: "neon",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-pink-500 animate-pulse">
      <rect x="8" y="20" width="48" height="24" fill="none" stroke="#FF1493" stroke-width="3"/>
      <text x="32" y="36" text-anchor="middle" fill="#FF1493" font-size="12">NEON</text>
    </svg>`
  },
  {
    name: "é›¨å¤œ",
    sound: "rain",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-blue-400">
      <path d="M20 10 L22 20 L18 20 Z" fill="#4A90E2"/>
      <path d="M30 15 L32 25 L28 25 Z" fill="#4A90E2"/>
      <path d="M40 12 L42 22 L38 22 Z" fill="#4A90E2"/>
      <path d="M25 25 L27 35 L23 35 Z" fill="#4A90E2"/>
      <path d="M35 20 L37 30 L33 30 Z" fill="#4A90E2"/>
    </svg>`
  },
  {
    name: "é¦™çƒŸ",
    sound: "smoke",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-gray-400">
      <rect x="20" y="30" width="20" height="2" fill="#DDD"/>
      <circle cx="18" cy="31" r="1" fill="#FF4500"/>
      <path d="M 16 28 Q 14 26 12 28 Q 14 30 16 32" fill="#666" opacity="0.6"/>
    </svg>`
  },
  {
    name: "åŸå¸‚",
    sound: "city",
    icon: `<svg viewBox="0 0 64 64" fill="currentColor" class="text-gray-600">
      <rect x="10" y="30" width="8" height="20" fill="#2F4F4F"/>
      <rect x="20" y="25" width="8" height="25" fill="#2F4F4F"/>
      <rect x="30" y="35" width="8" height="15" fill="#2F4F4F"/>
      <rect x="40" y="20" width="8" height="30" fill="#2F4F4F"/>
      <rect x="12" y="35" width="2" height="2" fill="#FFD700"/>
      <rect x="22" y="30" width="2" height="2" fill="#FFD700"/>
      <rect x="42" y="25" width="2" height="2" fill="#FFD700"/>
    </svg>`
  }
])

// é›¨æ»´æ ·å¼ç”Ÿæˆ
const rainDropStyle = (index: number) => {
  const left = Math.random() * 100
  const animationDuration = 0.5 + Math.random() * 1
  const animationDelay = Math.random() * 2
  
  return {
    left: `${left}%`,
    animationDuration: `${animationDuration}s`,
    animationDelay: `${animationDelay}s`
  }
}

// åˆ›å»ºç®€å•çš„éŸ³é¢‘
const createTone = (frequency: number, duration: number, type: OscillatorType = 'sine') => {
  const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)()
  const oscillator = audioContext.createOscillator()
  const gainNode = audioContext.createGain()
  
  oscillator.connect(gainNode)
  gainNode.connect(audioContext.destination)
  
  oscillator.frequency.value = frequency
  oscillator.type = type
  
  gainNode.gain.setValueAtTime(0.1, audioContext.currentTime)
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration)
  
  oscillator.start(audioContext.currentTime)
  oscillator.stop(audioContext.currentTime + duration)
}

// éŸ³ä¹æ§åˆ¶
const toggleMusic = () => {
  if (isPlaying.value) {
    isPlaying.value = false
    // åœæ­¢æ’­æ”¾
  } else {
    isPlaying.value = true
    // å¼€å§‹æ’­æ”¾ç®€å•çš„èƒŒæ™¯éŸ³ä¹å¾ªç¯
    playBGM()
  }
}

// æ’­æ”¾èƒŒæ™¯éŸ³ä¹
const playBGM = () => {
  if (!isPlaying.value) return
  
  // æ’­æ”¾ç®€å•çš„å’Œå¼¦è¿›è¡Œ
  const notes = [220, 277, 330, 277] // A, C#, E, C#
  let index = 0
  
  const playNext = () => {
    if (!isPlaying.value) return
    
    createTone(notes[index], 2, 'sine')
    createTone(notes[index] * 1.5, 2, 'triangle')
    
    index = (index + 1) % notes.length
    setTimeout(playNext, 2000)
  }
  
  playNext()
}

// æ’­æ”¾éŸ³æ•ˆ
const playSound = (soundType: string) => {
  switch(soundType) {
    case 'neon':
      createTone(800, 0.3, 'square')
      break
    case 'rain':
      createTone(200, 0.5, 'sawtooth')
      break
    case 'smoke':
      createTone(150, 0.8, 'triangle')
      break
    case 'city':
      createTone(100, 1, 'square')
      break
  }
}

// å…¨å±æ§åˆ¶
const toggleFullscreen = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen()
  } else {
    document.exitFullscreen()
  }
}

onMounted(() => {
  // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
  console.log('å†è§é»æ˜å‰§æœ¬æ€é¡µé¢å·²åŠ è½½')
})

onUnmounted(() => {
  isPlaying.value = false
})
</script>

<style scoped>
/* åƒç´ é£æ ¼å­—ä½“ */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

.pixel-font {
  font-family: 'Orbitron', monospace;
  letter-spacing: 2px;
}

/* åƒç´ é£æ ¼èƒŒæ™¯ */
.pixel-bg {
  background-image: 
    radial-gradient(circle at 25% 25%, #ff0040 1px, transparent 1px),
    radial-gradient(circle at 75% 75%, #00ff88 1px, transparent 1px);
  background-size: 20px 20px;
  opacity: 0.1;
  animation: pixel-scroll 20s linear infinite;
}

@keyframes pixel-scroll {
  0% { background-position: 0 0, 10px 10px; }
  100% { background-position: 20px 20px, 30px 30px; }
}

/* åƒç´ é£æ ¼è¾¹æ¡† */
.pixel-border {
  border-style: solid;
  border-image: linear-gradient(45deg, #ff0040, #00ff88) 1;
}

.pixel-circle {
  border: 2px solid #ff0040;
  box-shadow: 
    inset 0 0 10px rgba(255, 0, 64, 0.3),
    0 0 10px rgba(255, 0, 64, 0.3);
}

.pixel-item {
  background: 
    linear-gradient(45deg, #1a1a1a 25%, transparent 25%),
    linear-gradient(-45deg, #1a1a1a 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #1a1a1a 75%),
    linear-gradient(-45deg, transparent 75%, #1a1a1a 75%);
  background-size: 4px 4px;
  background-position: 0 0, 0 2px, 2px -2px, -2px 0px;
}

.pixel-bullet {
  position: relative;
  padding-left: 20px;
}

.pixel-bullet::before {
  content: "â– ";
  position: absolute;
  left: 0;
  color: #ff0040;
  animation: blink 2s infinite;
}

/* éœ“è™¹ç¯æ•ˆæœ */
.neon-title {
  color: #ff0040;
  text-shadow: 
    0 0 5px #ff0040,
    0 0 10px #ff0040,
    0 0 15px #ff0040,
    0 0 20px #ff0040,
    0 0 35px #ff0040,
    0 0 40px #ff0040;
  animation: neon-flicker 2s infinite alternate;
}

.neon-subtitle {
  color: #00ff88;
  text-shadow: 
    0 0 5px #00ff88,
    0 0 10px #00ff88,
    0 0 15px #00ff88;
}

.neon-text {
  color: #ff6b35;
  text-shadow: 
    0 0 5px #ff6b35,
    0 0 10px #ff6b35,
    0 0 15px #ff6b35;
}

@keyframes neon-flicker {
  0%, 18%, 22%, 25%, 53%, 57%, 100% {
    text-shadow: 
      0 0 5px #ff0040,
      0 0 10px #ff0040,
      0 0 15px #ff0040,
      0 0 20px #ff0040,
      0 0 35px #ff0040,
      0 0 40px #ff0040;
  }
  20%, 24%, 55% {
    text-shadow: none;
  }
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* åƒç´ åŸå¸‚åŠ¨ç”» */
.pixel-city-animation .building-1 { animation: building-sway 3s ease-in-out infinite; }
.pixel-city-animation .building-2 { animation: building-sway 3.5s ease-in-out infinite; }
.pixel-city-animation .building-3 { animation: building-sway 4s ease-in-out infinite; }
.pixel-city-animation .building-4 { animation: building-sway 3.2s ease-in-out infinite; }
.pixel-city-animation .building-5 { animation: building-sway 3.8s ease-in-out infinite; }
.pixel-city-animation .building-6 { animation: building-sway 4.2s ease-in-out infinite; }

@keyframes building-sway {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

.window-light {
  animation: window-flicker 2s infinite;
}

.window-light.delay-1 { animation-delay: 0.5s; }
.window-light.delay-2 { animation-delay: 1s; }
.window-light.delay-3 { animation-delay: 1.5s; }

@keyframes window-flicker {
  0%, 80% { opacity: 1; }
  85%, 95% { opacity: 0.3; }
  100% { opacity: 1; }
}

.neon-sign {
  animation: neon-pulse 1.5s infinite;
}

.neon-sign.delay-1 { animation-delay: 0.8s; }

@keyframes neon-pulse {
  0%, 50% { opacity: 1; box-shadow: 0 0 10px currentColor; }
  51%, 100% { opacity: 0.5; box-shadow: none; }
}

/* é›¨æ»´åŠ¨ç”» */
.rain-drop {
  position: absolute;
  width: 2px;
  height: 50px;
  background: linear-gradient(to bottom, transparent, rgba(100, 200, 255, 0.5), transparent);
  animation: rain-fall linear infinite;
}

@keyframes rain-fall {
  to {
    transform: translateY(100vh);
  }
}

/* çƒŸé›¾åŠ¨ç”» */
.smoke {
  animation: smoke-drift 3s ease-in-out infinite;
}

@keyframes smoke-drift {
  0% { transform: translateY(0) scale(1); opacity: 0.5; }
  50% { transform: translateY(-10px) scale(1.2); opacity: 0.3; }
  100% { transform: translateY(-20px) scale(1.5); opacity: 0; }
}

/* å…¶ä»–åŠ¨ç”»ä¿æŒä¸å˜ */
.fade-in-up {
  animation: fadeInUp 1s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slide-in-left {
  animation: slideInLeft 0.8s ease-out forwards;
  opacity: 0;
}

.slide-in-left.delay-1 {
  animation-delay: 0.5s;
}

.slide-in-left.delay-2 {
  animation-delay: 1s;
}

.slide-in-right {
  animation: slideInRight 0.8s ease-out;
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.equipment-card {
  animation: slideInUp 0.6s ease-out forwards;
  opacity: 0;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid #ff0040;
  white-space: nowrap;
  margin: 0 auto;
  animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
}

.typewriter.delay-3 {
  animation-delay: 3s;
  animation-fill-mode: both;
}

.typewriter.delay-6 {
  animation-delay: 6s;
  animation-fill-mode: both;
}

@keyframes typing {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

@keyframes blink-caret {
  from, to {
    border-color: transparent;
  }
  50% {
    border-color: #ff0040;
  }
}

.rule-card {
  animation: zoomIn 0.6s ease-out;
}

@keyframes zoomIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.atmosphere-card {
  animation: float 3s ease-in-out infinite;
}

.atmosphere-card:nth-child(2) { animation-delay: 0.5s; }
.atmosphere-card:nth-child(3) { animation-delay: 1s; }
.atmosphere-card:nth-child(4) { animation-delay: 1.5s; }

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .neon-title {
    font-size: 3rem;
  }
  
  .neon-subtitle {
    font-size: 1.5rem;
  }
  
  .container {
    padding: 1rem;
    padding-bottom: 120px; /* ä¸ºæŒ‰é’®ç•™å‡ºç©ºé—´ */
  }
  
  .pixel-bg {
    background-size: 10px 10px;
  }
  
  /* ç§»åŠ¨ç«¯æŒ‰é’®æ ·å¼ */
  .control-btn {
    width: 56px;
    height: 56px;
    padding: 0;
    font-size: 12px;
    min-height: 56px;
    touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸å“åº” */
  }
  
  .control-btn .btn-text {
    display: none;
  }
  
  .control-btn span:first-child {
    font-size: 24px;
  }
  
  /* ç§»åŠ¨ç«¯æŒ‰é’®å®¹å™¨ */
  .fixed.bottom-4.right-4 {
    bottom: 20px;
    right: 16px;
  }
  
  /* ä¼˜åŒ–ç§»åŠ¨ç«¯å¡ç‰‡é—´è· */
  .equipment-card {
    margin-bottom: 1rem;
  }
  
  .atmosphere-card {
    padding: 12px;
  }
  
  /* ç§»åŠ¨ç«¯å­—ä½“è°ƒæ•´ */
  .pixel-font {
    letter-spacing: 1px;
  }
  
  /* ç§»åŠ¨ç«¯éœ“è™¹æ•ˆæœä¼˜åŒ– */
  .neon-title {
    text-shadow: 
      0 0 3px #ff0040,
      0 0 6px #ff0040,
      0 0 9px #ff0040;
  }
}

/* æ¡Œé¢ç«¯æŒ‰é’®æ ·å¼ */
@media (min-width: 769px) {
  .control-btn {
    padding: 12px 24px;
    width: auto;
    height: auto;
    min-height: auto;
  }
  
  .control-btn .btn-text {
    display: inline;
  }
}
</style>