<template>
  <div class=" relative flex flex-col   h-dvh ios-safe">
    <div class="px-14 pt-14 flex justify-center items-center w-full">
      <Title />
    </div>

    <!-- <div class=" flex mt-4 justify-center items-center">
      <svg width="80" height="13" viewBox="0 0 80 13" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M3.10831 9.33873C2.76118 10.3435 2.17108 11.4522 1.58097 12.1105L0.886719 11.7294C1.47683 11.1404 2.03222 10.0663 2.37935 9.13086L3.10831 9.33873ZM9.53009 4.17632V8.26468H2.2405V4.17632H9.53009ZM2.96946 7.43315H8.76642V5.0425H2.96946V7.43315ZM4.91334 9.37337C5.08691 10.2049 5.19105 11.279 5.19105 11.9026L4.42737 12.0412C4.42737 11.3829 4.32324 10.3089 4.18439 9.47733L4.91334 9.37337ZM6.19771 0.226562V4.66139H5.43403V0.226562H6.19771ZM10.3632 1.64712V2.5133H5.78115V1.64712H10.3632ZM7.13494 9.26945C7.48207 10.0317 7.82919 11.1057 7.96804 11.7294L7.23908 11.9719C7.13494 11.3136 6.78781 10.2396 6.4754 9.44269L7.13494 9.26945ZM9.35653 9.0269C9.91193 9.82378 10.5367 10.9325 10.8144 11.6601L10.0855 12.0065C9.84251 11.2789 9.21768 10.1703 8.66228 9.33873L9.35653 9.0269Z"
          fill="black" />
        <path
          d="M24.4218 5.25037V6.15123H14.9453V5.25037H24.4218ZM23.6581 2.27074V3.17155H15.7437V2.27074H23.6581ZM16.6462 7.19064V10.4821H23.2068V11.3829H15.8478V7.19064H16.6462ZM20.0827 0.226562V11.0711H19.2844V0.226562H20.0827ZM23.4845 7.19064V12.1451H22.7209V7.19064H23.4845Z"
          fill="black" />
        <path
          d="M37.9935 0.8125V12.142H37.2299V1.64404H29.6625V12.142H28.9336V0.8125H37.9935ZM37.6464 10.7562V11.5531H29.3154V10.7562H37.6464ZM35.5636 2.96059L35.6678 2.92596L36.0843 3.23779C34.9735 5.3859 32.4048 6.77178 30.218 7.39542C30.1485 7.18754 29.975 6.80643 29.8708 6.66785C31.9883 6.18279 34.4876 4.86619 35.4248 3.09919V2.96059H35.5636ZM33.1685 2.19838C32.5437 3.37638 31.537 4.5197 30.6345 5.24729C30.5304 5.1087 30.2527 4.83153 30.0791 4.69294C31.0163 4.03465 31.9536 2.99523 32.509 1.95582L33.1685 2.19838ZM31.3635 8.50411C32.8214 8.71199 34.7306 9.19707 35.7719 9.61284L35.4248 10.3058C34.3834 9.89001 32.509 9.33565 30.9816 9.12777L31.3635 8.50411ZM36.9869 6.56389C36.848 6.73712 36.6397 7.04894 36.5703 7.25683C34.557 6.73712 32.5437 5.55913 31.4676 3.96537L32.023 3.65353C32.9602 5.03941 34.9735 6.11348 36.9869 6.56389ZM35.6678 2.96059V3.68817H31.8147L32.2313 2.96059H35.6678ZM32.4048 6.91036C33.2726 7.11824 34.3834 7.53402 34.9736 7.88049L34.6611 8.50411C34.071 8.15764 32.9602 7.70723 32.0924 7.4647L32.4048 6.91036Z"
          fill="black" />
        <path
          d="M44.7637 0.365159V4.79999C44.7637 7.43316 44.5901 10.101 43.028 12.2144C42.8892 12.0066 42.6462 11.6947 42.4727 11.5215C43.8612 9.61592 44.0347 7.15598 44.0347 4.79999V0.365159H44.7637ZM50.1441 6.53233V12.1451H49.3457V7.43315H44.2083V6.53233H50.1441ZM49.7623 3.48339V4.3842H44.2777V3.48339H49.7623ZM49.7623 0.226562V4.00309H48.9639V0.226562H49.7623Z"
          fill="black" />
        <path
          d="M59.3423 5.97799L59.4465 6.80949C58.301 7.22525 57.0513 7.67567 56.1141 7.98749L55.8711 7.12132C56.7736 6.84414 58.0927 6.4284 59.3423 5.97799ZM59.6895 2.85977V3.72594H56.0447V2.85977H59.6895ZM58.301 0.226562V10.9671C58.301 11.4868 58.1968 11.7294 57.9191 11.868C57.6414 12.0066 57.1902 12.0412 56.4265 12.0412C56.3918 11.7987 56.2877 11.4522 56.1835 11.2097C56.7042 11.2443 57.1902 11.2097 57.329 11.2097C57.4679 11.2097 57.5373 11.1404 57.5373 10.9671V0.226562H58.301ZM64.5492 5.97799L64.688 5.94331L65.174 6.2205C64.2021 9.61591 61.7375 11.4175 59.0994 12.1798C59.0299 11.9372 58.8564 11.5562 58.7175 11.3483C61.1821 10.7246 63.5425 9.02689 64.3756 6.11655V5.97799H64.5492ZM61.4251 0.711628V2.16683C61.4251 3.34482 61.1127 4.7307 59.7936 5.63152C59.6895 5.45829 59.4465 5.11181 59.2729 4.97322C60.4879 4.14169 60.6961 3.06761 60.6961 2.13215V0.711628H61.4251ZM64.688 5.97799V6.84417H59.6547V5.97799H64.688ZM65.9724 11.3136C65.7988 11.5215 65.5906 11.9026 65.4864 12.1451C62.8483 11.4175 60.9391 9.58128 59.9324 6.84417L60.592 6.56697C61.4945 8.99226 63.4037 10.6899 65.9724 11.3136ZM63.7508 0.711628V1.54316H60.9044V0.711628H63.7508ZM64.1327 0.711628V3.72594C64.1327 4.10706 64.1674 4.21096 64.3409 4.21096C64.4798 4.21096 65.0699 4.21096 65.2087 4.21096C65.3823 4.21096 65.5906 4.17633 65.7294 4.14169C65.7294 4.38421 65.7641 4.7307 65.7988 4.93858C65.66 5.00788 65.417 5.00786 65.2087 5.00786C65.0352 5.00786 64.4103 5.00786 64.2715 5.00786C63.5425 5.00786 63.369 4.66137 63.369 3.69126V0.67699H64.1327V0.711628Z"
          fill="black" />
        <path
          d="M72.9846 9.48106C72.325 10.4165 71.2837 11.3174 70.3811 11.8717C70.2423 11.6985 69.9646 11.4213 69.791 11.248C70.7282 10.763 71.7002 10.0008 72.2903 9.16923L72.9846 9.48106ZM79.6493 8.06054V8.82276H69.8951V8.06054H79.6493ZM79.441 0.75V1.51226H69.9993V0.75H79.441ZM78.9204 2.55167V5.5313H70.6588V2.55167H78.9204ZM78.3302 6.39747V7.12505H71.2142V6.39747H78.3302ZM71.3531 4.80372H78.1567V3.24461H71.3531V4.80372ZM73.8176 1.06183V5.21947H73.1234V1.06183H73.8176ZM75.1367 8.26842V12.1489H74.3731V8.26842H75.1367ZM76.3169 1.06183V5.21947H75.588V1.06183H76.3169ZM76.907 9.23851C77.8096 9.8275 78.9551 10.6937 79.5799 11.2827L78.9898 11.837C78.4344 11.248 77.2889 10.3472 76.3516 9.72357L76.907 9.23851Z"
          fill="black" />
      </svg>

    </div> -->

    <div class="w-full p-4">
      <div class="grid grid-cols-2 gap-4 ">
        <div v-for="(src, i) in imageList" :key="src" class="relative cursor-pointer overflow-hidden "
          :class="selectedImage === src ? 'ring-4 ring-black/50' : ''" @click="selectImage(src, i)" style="
               width: 177.49px;
               height: 133.12px;
               background: rgb(244, 241, 233);
               filter: drop-shadow(0px 0px 32.3px rgba(0, 0, 0, 0.03));
               border-radius: 45px;
              
             ">
          <img :src="src" alt="shoe" class="w-full h-full object-contain transition-transform"
            :class="selectedImage === src ? 'scale-95' : ''" />
          <div v-if="selectedImage === src" class="pointer-events-none absolute inset-0"
            style="border-radius: 45px; background: rgba(0,0,0,0.04);"></div>
        </div>
      </div>
    </div>



    <div class=" mt-12 flex justify-center items-center">

      <svg width="120" height="29" viewBox="0 0 120 29" fill="none" xmlns="http://www.w3.org/2000/svg"
        @click="confirmSelection">
        <path
          d="M39.1947 14.4366C39.0425 17.2787 38.4824 18.7153 35.5156 19.4042C35.4186 19.1494 35.2756 18.9148 35.0938 18.7118C37.8427 18.1199 38.2749 16.929 38.4063 14.4262L39.1947 14.4366ZM45.4636 13.9589V14.7447H35.2286V13.9589H45.4636ZM45.1386 9.42407V12.1311H44.3399V10.2341H36.3143V12.1311H35.5433V9.42407H45.1386ZM43.5134 11.6361V12.4115H37.1719V11.6672L43.5134 11.6361ZM40.2458 7.85938C40.5759 8.41535 40.8515 9.00197 41.0688 9.61101L40.2597 9.89143C40.0529 9.27279 39.789 8.67473 39.4713 8.10514L40.2458 7.85938ZM42.0646 14.4366V17.9987C42.0646 18.3449 42.1476 18.4175 42.6421 18.4175H44.3468C44.7963 18.4175 44.8689 18.2029 44.9035 16.7386C45.1203 16.8946 45.3624 17.0117 45.6192 17.0848C45.5259 18.781 45.3011 19.2068 44.4056 19.2068H42.5729C41.5563 19.2068 41.2866 18.9507 41.2866 18.0126V14.4366H42.0646Z"
          fill="black" />
        <path
          d="M49.6091 10.1429V13.6322C49.6091 15.363 49.4362 17.8486 48.3747 19.479C48.1856 19.2672 47.9666 19.084 47.7246 18.9355C48.6997 17.3985 48.8034 15.2523 48.8034 13.6287V10.167L49.6091 10.1429ZM52.1471 12.6526V13.4315H49.2391V12.6526H52.1471ZM58.2604 10.1429V10.9736H49.3048V10.1566L58.2604 10.1429ZM52.5897 12.6526C52.5897 12.6526 52.5897 12.9087 52.5897 13.0229C52.5309 15.8615 52.4652 16.907 52.2439 17.2393C52.1625 17.3458 52.0579 17.4323 51.9381 17.4923C51.8183 17.5523 51.6863 17.5842 51.5524 17.5855C51.0918 17.6159 50.6298 17.6159 50.1693 17.5855C50.1507 17.313 50.0778 17.047 49.9549 16.8032C50.5012 16.8585 51.0233 16.862 51.2239 16.862C51.2903 16.8722 51.3581 16.8658 51.4215 16.8435C51.4848 16.8211 51.5416 16.7835 51.5869 16.7339C51.7598 16.5088 51.8186 15.5604 51.867 12.8187V12.6768L52.5897 12.6526ZM57.5378 12.1991C56.5454 15.4462 54.82 17.8312 52.4376 19.3371C52.2672 19.0916 52.0775 18.8601 51.8705 18.6447C54.2321 17.2947 55.8781 15.0099 56.7632 11.981L57.5378 12.1991ZM54.4258 8C54.4258 13.8572 55.5599 18.4612 57.1159 18.4612C57.4617 18.4612 57.6035 17.8139 57.6692 16.1385C57.8669 16.3337 58.1022 16.4868 58.3607 16.5885C58.219 18.6897 57.9181 19.3129 57.0744 19.3129C54.7508 19.3129 53.6893 14.0199 53.6409 8H54.4258ZM55.5115 8.06237C56.268 8.46242 56.9778 8.94537 57.6277 9.50241L57.1471 10.077C56.5042 9.50054 55.7991 8.99783 55.0447 8.57816L55.5115 8.06237Z"
          fill="black" />
        <path
          d="M64.0488 13.5222L64.156 14.2803C62.9285 14.6922 61.6353 15.111 60.6394 15.433L60.4043 14.6265C61.3414 14.3668 62.7141 13.9411 64.0488 13.5222ZM64.3946 10.5278V11.3205H60.5461V10.5347L64.3946 10.5278ZM62.9112 7.98696V18.3062C62.9112 18.7978 62.7971 19.0297 62.5101 19.1543C62.2231 19.2789 61.7494 19.3102 60.9576 19.3102C60.911 19.0426 60.8309 18.7821 60.719 18.5347C61.2826 18.5555 61.7874 18.5347 61.9292 18.5347C62.071 18.5347 62.1574 18.4724 62.1574 18.2993V7.97656L62.9112 7.98696ZM69.5639 13.5257L69.7127 13.4876L70.2175 13.7333C69.1801 16.9769 66.573 18.7009 63.7998 19.4486C63.7074 19.175 63.572 18.918 63.3987 18.687C66.0163 18.0812 68.5197 16.4473 69.4118 13.6606V13.5257H69.5639ZM66.2203 8.46463V9.84931C66.2203 10.9571 65.9091 12.2898 64.4914 13.1726C64.346 12.9496 64.1742 12.745 63.9796 12.5633C64.4615 12.2953 64.8577 11.8962 65.1227 11.4123C65.3876 10.9284 65.5104 10.3793 65.4769 9.82852V8.44384L66.2203 8.46463ZM69.6781 13.5257V14.3079H64.3462V13.5257H69.6781ZM71.0612 18.6697C70.863 18.9029 70.6946 19.1599 70.5598 19.4347C69.2401 19.1287 68.015 18.505 66.9907 17.6176C65.9663 16.7302 65.1737 15.606 64.6816 14.3426L65.3455 14.083C66.2929 16.3919 68.3191 18.05 71.0577 18.6524L71.0612 18.6697ZM68.7099 8.46463V9.24351H65.7051V8.46463H68.7099ZM69.0902 8.46463V11.3759C69.0902 11.7221 69.1214 11.8502 69.3115 11.8502H70.2555C70.4449 11.8504 70.6338 11.8307 70.8191 11.7914C70.8364 12.0025 70.8606 12.3313 70.8883 12.5217C70.6868 12.5696 70.4797 12.5894 70.2728 12.5806H69.2631C68.5128 12.5806 68.3468 12.2552 68.3468 11.3586V8.46463H69.0902Z"
          fill="black" />
        <path
          d="M76.6183 16.8583C75.8504 17.8046 74.9121 18.5983 73.8521 19.1985C73.6678 18.996 73.4678 18.8085 73.2539 18.6376C74.2797 18.1564 75.1883 17.4571 75.9164 16.5883L76.6183 16.8583ZM83.6722 15.536V16.2283H73.3507V15.536H83.6722ZM83.4474 8.51562V9.20796H73.4717V8.51562H83.4474ZM82.8907 10.2223V13.0505H74.1633V10.205L82.8907 10.2223ZM82.2614 13.9402V14.6152H74.7615V13.9402H82.2614ZM74.8894 12.41H82.13V10.88H74.8894V12.41ZM78.8935 15.6745V18.4992C78.8935 18.9527 78.8105 19.1915 78.4717 19.2919C78.1328 19.3923 77.6038 19.4269 76.7428 19.4269C76.6869 19.1667 76.6023 18.9137 76.4904 18.6723C77.1819 18.6965 77.7144 18.6965 77.9012 18.6723C78.0879 18.648 78.1052 18.6134 78.1052 18.468V15.6641L78.8935 15.6745ZM77.4758 8.77525V12.7527H76.7705V8.77525H77.4758ZM80.1556 8.77525V12.7527H79.4226V8.77525H80.1556ZM80.7711 16.6299C81.7688 17.2011 82.7152 17.8578 83.5996 18.5927L83.0048 19.0981C82.1396 18.3362 81.2067 17.6549 80.2179 17.0626L80.7711 16.6299Z"
          fill="black" />
        <path
          d="M112.845 28.9294L95.3076 28.9052L77.7697 28.8567L42.694 28.7113L7.61487 28.5659H7.06855L6.50493 28.5382C6.12828 28.501 5.75568 28.4303 5.39153 28.3271C4.29856 28.0098 3.31536 27.3943 2.552 26.5493C1.78864 25.7044 1.27525 24.6635 1.0693 23.543C1.0066 23.17 0.973075 22.7927 0.969025 22.4145V21.3172V19.1224C0.969025 17.6616 0.937911 16.1973 0.920622 14.733C0.903333 13.2687 0.882586 11.8078 0.84455 10.3435L0.796136 8.14885L0.775391 7.05143V6.50454C0.775391 6.32107 0.775391 6.11677 0.775391 5.92291C0.87003 4.32757 1.5687 2.82842 2.72903 1.73085C3.9012 0.626069 5.44831 0.00751667 7.05818 0L24.596 0.0311857H33.3649L42.1339 0.069217L77.2096 0.231907L94.7474 0.266557C100.595 0.266557 106.438 0.297713 112.285 0.266557H112.832L113.406 0.290813C113.786 0.325496 114.162 0.394971 114.529 0.498464C115.268 0.70401 115.961 1.04689 116.573 1.50925C117.82 2.43904 118.672 3.80463 118.959 5.33444C119.029 5.71361 119.067 6.09811 119.073 6.48375V7.58108L119.097 9.77583L119.149 14.1652L119.201 18.5546L119.225 20.7494V21.8467V22.4041C119.225 22.5876 119.225 22.7952 119.204 22.9926C119.081 24.6038 118.357 26.1096 117.175 27.2108C115.994 28.312 114.442 28.928 112.828 28.9363M112.828 27.8113C114.169 27.8126 115.462 27.3095 116.45 26.4016C117.438 25.4937 118.05 24.2474 118.163 22.9095L118.271 14.1722L118.323 9.78276L118.35 7.58801V6.49068C118.355 6.14297 118.329 5.79551 118.274 5.45217C118.105 4.41811 117.647 3.45316 116.952 2.66946C116.258 1.88576 115.355 1.31543 114.35 1.02465C114.011 0.926858 113.663 0.860778 113.312 0.827308L112.787 0.796207H112.282C106.435 0.751205 100.591 0.771975 94.7439 0.796207L77.2061 0.830773L42.1304 0.993463L33.3615 1.03504H24.5926L7.05472 1.06623C5.70285 1.07118 4.40063 1.57677 3.39894 2.48564C2.39724 3.39452 1.76695 4.64236 1.62946 5.98875C1.62946 6.16184 1.6018 6.33492 1.59488 6.50454V7.05143L1.57414 8.14885L1.52573 10.3435C1.49116 11.8067 1.4658 13.2699 1.44966 14.733C1.43237 16.1973 1.39779 17.6616 1.40125 19.1224V21.3172V22.4041C1.40384 22.7588 1.43274 23.1129 1.48769 23.4634C1.73557 24.8713 2.50177 26.1349 3.63497 27.0047C4.19815 27.4369 4.83912 27.7565 5.52292 27.9463C5.8622 28.0419 6.20937 28.1068 6.56026 28.1401L7.0893 28.1643H7.61487L42.6906 28.0189L77.7663 27.8736L95.3041 27.8251L112.828 27.8113Z"
          fill="black" />
      </svg>

    </div>
    <!-- 
  <teleport to="body">
    <div v-if="showConfirm" class="fixed inset-0 z-[100] flex items-center justify-center">
      <div class="absolute inset-0 bg-black/40 backdrop-blur-[1px]" @click="cancelConfirm"></div>
      <div class="relative z-10 w-[360px] max-w-[92vw] rounded-2xl bg-white shadow-2xl p-5">
        <button class="absolute right-3 top-3 text-gray-400 hover:text-gray-600" aria-label="Close" @click="cancelConfirm">×</button>
        <div class="text-[16px] font-semibold text-gray-900">确认选择</div>
        <div class="mt-2 text-[14px] text-gray-600 text-center">你确定要选择这张图片吗？</div>
        <div class="mt-3 flex justify-center">
          <img :src="selectedImage || ''" alt="preview" class="max-h-44 object-contain" />
        </div>
        <div class="mt-6 flex justify-end gap-3">
          <button class="h-9 rounded-lg px-4 border border-gray-300 text-gray-700 hover:bg-gray-50" @click="cancelConfirm">取消</button>
          <button class="h-9 rounded-lg px-4 bg-blue-600 text-white hover:bg-blue-700" @click="confirmSelection">确定</button>
        </div>
      </div>
    </div>
  </teleport> -->
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import Title from './title.vue'
import { ElMessage } from 'element-plus'
import { http } from '@/util/http'
import { useOpenIdStore } from '@/stores/openId'

const openIdStore = useOpenIdStore()
const router = useRouter()

const imageList = ref<string[]>([])
const modules = import.meta.glob('@/assets/images/*.{png,jpg,jpeg,gif,svg}', { eager: true, import: 'default' }) as Record<string, string>
imageList.value = Object.entries(modules)
  .sort(([a], [b]) => a.localeCompare(b))
  .map(([, v]) => v)

const selectedImage = ref<string | null>(null)
const selectedIndex = ref<number | null>(null)

function selectImage(src: string, index: number) {
  selectedImage.value = src;
  selectedIndex.value = index;
}
const showConfirm = ref(false)

const outputSelected = () => {

  showConfirm.value = true
}

function cancelConfirm() {
  showConfirm.value = false
}

const confirmSelection = async () => {
  if (selectedImage.value === null || selectedIndex.value === null) {
    // @ts-ignore
    ElMessage.warning('请先选择一张图片')
    return
  }
  console.log('当前选择的图片:', selectedImage.value, '索引:', selectedIndex.value)
  // await http.post('/save-vote', {
  //   openId: openIdStore.openId,
  //   vote_value: selectedIndex.value
  // })
  showConfirm.value = false
  await router.push({ path: '/vote_result', query: { openId: openIdStore.openId } })
}



// 生成噪点图片的工具函数
function generateNoise(opacity: number = 0.06, size: number = 100): string {
  const canvas = document.createElement('canvas');
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext('2d');
  if (!ctx) return '';

  const imageData = ctx.createImageData(size, size);
  const buffer = imageData.data;

  for (let i = 0; i < buffer.length; i += 4) {
    const value = Math.random() * 255;
    buffer[i] = value;     // R
    buffer[i + 1] = value; // G
    buffer[i + 2] = value; // B
    buffer[i + 3] = Math.floor(opacity * 255); // Alpha
  }

  ctx.putImageData(imageData, 0, 0);
  return canvas.toDataURL();
}

// 在 onMounted 生命周期钩子中设置噪点背景，避免 SSR/TS 报错
import { onMounted } from 'vue';

onMounted(() => {
  const targetDiv = document.querySelector('div.zaodian') as HTMLElement | null;
  if (targetDiv) {
    const noiseURL = generateNoise(0.08, 1000); // 不透明度 & 噪点尺寸
    targetDiv.style.backgroundImage = `url(${noiseURL})`;
    targetDiv.style.backgroundBlendMode = 'multiply';
    targetDiv.style.backgroundRepeat = 'repeat';
  }
});

</script>

<style scoped>
/* iOS bottom bar safe-area padding for full-bleed pages */
.ios-safe {
  padding-bottom: calc(constant(safe-area-inset-bottom) + 12px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 12px);
}

/* 颗粒消散 + 淡入淡出 */
.dissolve-enter-active,
.dissolve-leave-active {
  transition: opacity 360ms ease;
  /* 同步粒子遮罩动画时长 */
}

.dissolve-enter-from,
.dissolve-leave-to {
  opacity: 0;
}

/* 粒子遮罩实现：使用子层遮罩在切换时制造"砂化"效果 */
.dissolve-wrap {
  position: relative;
}

.dissolve-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.12), transparent 40%),
    radial-gradient(circle at 70% 40%, rgba(0, 0, 0, 0.10), transparent 42%),
    radial-gradient(circle at 40% 70%, rgba(0, 0, 0, 0.08), transparent 45%),
    radial-gradient(circle at 85% 75%, rgba(0, 0, 0, 0.06), transparent 46%),
    radial-gradient(circle at 10% 80%, rgba(0, 0, 0, 0.06), transparent 44%);
  opacity: 0;
  mask-image: radial-gradient(120px 120px at 30% 30%, #000 20%, transparent 60%),
    radial-gradient(100px 100px at 70% 20%, #000 18%, transparent 55%),
    radial-gradient(140px 140px at 50% 70%, #000 22%, transparent 60%),
    radial-gradient(120px 120px at 80% 80%, #000 18%, transparent 58%);
  -webkit-mask-image: radial-gradient(120px 120px at 30% 30%, #000 20%, transparent 60%),
    radial-gradient(100px 100px at 70% 20%, #000 18%, transparent 55%),
    radial-gradient(140px 140px at 50% 70%, #000 22%, transparent 60%),
    radial-gradient(120px 120px at 80% 80%, #000 18%, transparent 58%);
  mix-blend-mode: multiply;
}

.dissolve-leave-active .dissolve-wrap::before,
.dissolve-enter-active .dissolve-wrap::before {
  animation: particle-dissolve 360ms ease forwards;
}

@keyframes particle-dissolve {
  0% {
    opacity: 0;
    filter: blur(0px);
  }

  50% {
    opacity: 0.35;
    filter: blur(0.8px);
  }

  100% {
    opacity: 0;
    filter: blur(0px);
  }
}
</style>