<template>
  <div class=" relative flex flex-col  h-dvh ios-safe">
    <div class="py-10 px-14">
      <Title />
    </div>

    <div class=" relative  w-full flex-1 "
      @click="handleClick">

      <div class=" zaodian relative  z-30 pb-[52rem]   -left-[1.25rem] w-[95%] h-full bg-cover bg-center  rounded-lg "
        :style="{ backgroundColor: layerColors[0] }"
        style="transform: rotate(-2deg);  ">
        <transition name="dissolve" mode="out-in">
          <div :key="`stage-${stage}`" class="dissolve-wrap">
            <div class=" mt-6  ml-2 absolute left-[16%] top-[6.1%] bg-cover bg-center p-4" style="transform: rotate(2deg)">
              <a_one_title v-if="stage === 0"  />
              <b_one_title v-else-if="stage === 1" />
              <c_one_title v-else />
            </div>

            <div class=" absolute left-[6rem] top-[14rem]" style="transform: rotate(2deg)">
              <a_one_q v-if="stage === 0" />
              <b_one_q v-else-if="stage === 1" />
              <c_one_q v-else />
            </div>

            <div class=" absolute left-[2.5rem] top-[18rem]" style="transform: rotate(2deg)">
              <a_tow_q v-if="stage === 0" />
              <b_tow_q v-else-if="stage === 1" />
              <c_tow_q v-else />
            </div>

            <div class=" absolute left-[6rem] top-[22rem]" style="transform: rotate(2deg)">
              <a_three_q v-if="stage === 0" />
              <b_three_q v-else-if="stage === 1" />
              <c_three_q v-else />
            </div>

            <div class="absolute left-[2.5rem] top-[26rem]" style=" transform: rotate(2deg)">
              <a_four_q v-if="stage === 0" />
              <b_four_q v-else-if="stage === 1" />
              <c_four_q v-else />
            </div>

            <div class=" absolute left-[6rem] top-[30rem]" style="transform: rotate(2deg)">
              <a_five_q v-if="stage === 0" />
              <b_five_q v-else-if="stage === 1" />
              <c_five_q v-else />
            </div>
          </div>
        </transition>
      </div>






      <div class=" z-20 absolute left-5   pb-[52rem]  -top-[1.25rem] w-[88%] h-full bg-cover bg-center  rounded-lg "
      :style="{ backgroundColor: layerColors[1] }">
        <div class=" absolute -right-[27px] top-[7.5rem]">
          <svg width="27" height="116" viewBox="0 0 27 116" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M0.214844 115.901V0.960938L17.3419 3.66448C22.5987 3.66448 26.858 11.2088 26.858 17.1856V99.673C26.858 105.65 22.5987 113.194 17.3419 113.194L0.214844 115.901Z"
              fill="#CCAE8F" />
            <path
              d="M8.3063 38.5139C8.3063 38.5139 7.39509 39.6119 6.77725 40.2921C6.61502 40.2507 6.53906 40.1022 6.53906 39.8985V27.6514L6.96706 27.5409V32.986H11.3783V29.2535L11.8028 29.143V32.986H15.5651V30.569C14.1685 29.8257 12.9424 28.7991 11.965 27.5547L12.0962 27.4062C13.7737 28.4421 16.4349 29.4572 19.0927 29.9302L18.3609 32.2125C18.1814 32.1711 18.0503 31.995 18.0503 31.6843C17.3396 31.4345 16.6475 31.1345 15.9793 30.7865V32.9722H19.5345L19.2998 35.2268C19.0789 35.1854 18.9339 35.0922 18.8752 34.7262H15.9793V36.8704L17.2288 37.8061C17.2288 37.8061 16.4039 38.8419 15.7998 39.5325C15.6411 39.491 15.5651 39.3426 15.5651 39.125V34.74H11.8132V36.4353L13.0937 37.3848C13.0937 37.3848 12.2239 38.4725 11.6233 39.1112C11.5475 39.0863 11.4828 39.0358 11.44 38.9685C11.3972 38.9011 11.379 38.821 11.3886 38.7418V34.74H6.98088V37.5229L8.3063 38.5139Z"
              fill="white" />
            <path
              d="M16.4762 48.4138C14.8021 47.8544 11.6439 46.8496 10.9225 46.6597C10.4721 46.5325 10.0091 46.4549 9.54183 46.4284C8.77902 46.456 8.27853 47.0154 7.00143 46.9739C6.84292 46.9845 6.68393 46.962 6.53458 46.9078C6.38523 46.8536 6.24878 46.769 6.13388 46.6592C6.01898 46.5495 5.92813 46.4171 5.86713 46.2703C5.80613 46.1236 5.77631 45.9658 5.77953 45.8069C5.77953 45.4616 6.00041 45.1819 6.52851 45.0576C8.0714 45.3166 9.37957 45.2613 9.63499 44.9368C9.78334 44.7253 9.86947 44.4765 9.88354 44.2186H10.1493V44.8539C10.1493 45.0576 10.1493 45.1267 10.4565 45.289C11.0018 45.6032 11.0019 45.6032 16.5728 48.21L16.4762 48.4138ZM16.0205 55.4333C16.0205 55.4333 15.1542 56.3966 14.5674 56.9663C14.4897 56.9411 14.4234 56.889 14.3804 56.8195C14.3374 56.7499 14.3205 56.6674 14.3327 56.5865V53.0612H11.5092V54.2041L12.3929 54.9499L11.1123 56.4829C10.9509 56.337 10.8428 56.1414 10.8051 55.927H6.40771C6.29036 55.927 5.92447 55.1536 5.92447 54.6115V54.3388H7.12914V50.2196H6.38012C6.21789 50.2196 5.84855 49.529 5.84855 48.873V48.6693H12.2134L11.5231 50.299V51.4384H14.3465V48.0063L14.771 47.8958V51.4384H17.2701C17.1527 50.3404 17.0664 49.1872 17.0353 48.1272L17.2562 48.0996C17.7655 50.4074 18.514 52.6558 19.4894 54.8083L17.843 56.3828C17.7118 56.2205 17.6981 55.9063 17.8741 55.4851C17.7257 54.7945 17.5807 53.9659 17.4599 53.0681H14.771V54.577L16.0205 55.4333ZM11.0812 50.2196H7.55368V54.3319H11.0812V50.2196ZM16.1241 44.1496C15.9481 47.8164 12.9486 46.7702 13.8909 45.3442C14.7012 45.1085 15.4324 44.6575 16.0067 44.0391L16.1241 44.1496ZM19.3445 45.1681C19.1684 48.9662 16.1103 47.9925 16.9905 46.4836C17.8327 46.1806 18.5968 45.6934 19.2271 45.0576L19.3445 45.1681Z"
              fill="white" />
            <path
              d="M17.8012 71.7012C17.8012 71.7012 16.9313 72.737 16.3307 73.3689C16.253 73.3437 16.1867 73.2916 16.1438 73.2221C16.1008 73.1525 16.0839 73.0699 16.0961 72.9891V66.4288C15.2262 66.3735 14.3909 66.3045 13.5798 66.1974V69.4293L14.4772 70.2856L13.1242 71.7357C12.9656 71.5818 12.8717 71.3731 12.8619 71.1522C9.15826 70.9623 7.12867 70.6101 6.45215 69.8367C6.00318 69.309 5.7811 68.6251 5.83434 67.9342C6.34863 67.9342 6.77663 67.8824 6.99754 67.6511C7.33541 67.2362 7.55804 66.7396 7.64299 66.2112H7.81903C7.77416 66.85 7.70165 67.8686 7.70165 68.1655C7.69042 68.2566 7.69748 68.349 7.72238 68.4374C7.74727 68.5257 7.7895 68.6082 7.84663 68.68C8.24702 69.1012 10.1696 69.3706 13.1553 69.5363V66.0835C9.96594 65.5276 7.28748 64.2121 5.74805 60.8456L5.89299 60.7489C8.45066 63.8565 12.068 64.547 16.0961 64.5919V60.818L16.5206 60.7109V70.7828L17.8012 71.7012ZM19.6374 65.5621C19.1232 69.7055 15.7716 68.3865 16.9313 66.8259C17.9016 66.5926 18.8007 66.1269 19.5512 65.4689L19.6374 65.5621Z"
              fill="white" />
            <path
              d="M7.77452 89.4845C6.89435 89.961 6.39386 90.0266 6.17295 89.7987C5.48262 89.16 6.12808 88.0447 6.73212 87.4336C8.89284 85.2341 12.096 84.4607 15.8445 84.219V77.4412L16.2725 77.3203V84.1914C17.308 84.1361 18.4021 84.1085 19.5204 84.1085L19.2857 86.2527C19.0924 86.2251 18.9164 86.1042 18.8577 85.7658C17.9914 85.7658 17.1319 85.7659 16.2725 85.7935V87.3403L17.094 87.9791C17.1107 87.8576 17.1506 87.7404 17.2113 87.6338C17.8925 87.3368 18.4961 86.8866 18.9751 86.3183L19.0924 86.4115C19.2408 88.9528 17.7566 89.1738 17.2423 88.5592C16.9628 88.9044 16.4623 89.5087 16.0791 89.9403C16.0014 89.9107 15.936 89.8557 15.8934 89.7843C15.8508 89.7129 15.8336 89.6291 15.8445 89.5467V85.8073C12.7587 85.9834 9.97665 86.6083 8.45103 88.3865C8.24738 88.5764 8.24738 88.6835 8.4959 88.8078C9.082 89.1223 9.6859 89.4025 10.3046 89.6468L10.2735 89.7987L7.77452 89.4845ZM8.83415 81.7744C9.02399 82.6825 9.23111 83.6596 9.45201 84.6506L9.2587 84.692C8.56837 83.4283 7.6882 81.5845 6.49739 78.8016C6.41212 78.7756 6.33359 78.7313 6.26738 78.6716C6.20116 78.6119 6.14889 78.5384 6.11426 78.4563L7.98161 77.4204C8.07135 78.0074 8.26119 78.9846 8.4959 80.1654H12.876V77.9211L13.2902 77.8141V81.9574L14.4776 82.8137C14.4776 82.8137 13.6699 83.7632 13.0969 84.3467C13.0218 84.3219 12.9575 84.272 12.9147 84.2054C12.872 84.1387 12.8535 84.0594 12.8622 83.9808V81.7813L8.83415 81.7744Z"
              fill="white" />
          </svg>

        </div>

        <div class=" absolute -right-[27px] top-[14.5rem]">
          <svg width="27" height="116" viewBox="0 0 27 116" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M0.214844 115.65V0.726562L17.3419 3.43011C22.5987 3.43011 26.858 10.9745 26.858 16.9513V99.4248C26.858 105.402 22.5987 112.946 17.3419 112.946L0.214844 115.65Z"
              fill="#746C61" />
            <path
              d="M13.0515 30.8257C12.199 34.3303 9.4653 33.1218 10.525 31.8028C11.2904 31.6151 12.0131 31.2836 12.6546 30.8257H6.37953C6.27598 30.8257 5.86523 30.3388 5.86523 29.5654V29.2926H11.4948C10.9119 28.6735 10.3948 27.9954 9.95197 27.2693L10.0831 27.1484C11.7762 28.7692 13.7955 30.0099 16.0062 30.7877V27.5282L16.4342 27.4039V30.7324L17.3281 31.6026L15.8301 33.0113C15.6962 32.838 15.6288 32.6224 15.6403 32.4036C14.75 31.9646 13.9069 31.4359 13.124 30.8257H13.0515ZM8.37804 38.5945C8.37804 38.5945 7.4668 39.5854 6.86276 40.1551C6.70054 40.1137 6.62803 39.979 6.62803 39.7753V31.7924L7.05603 31.682V35.0622H13.9352V32.6177L14.3459 32.5106V35.0622H19.4889L19.2714 37.2202C19.0505 37.1822 18.9021 37.0856 18.8434 36.7196H14.3563V37.5897L15.5919 38.4149C15.5919 38.4149 14.7532 39.3403 14.1802 39.8824C14.018 39.8409 13.9455 39.7063 13.9455 39.5026V36.7196H7.0664V37.7554L8.37804 38.5945ZM19.6097 28.792C18.8434 32.4278 16.0372 30.9223 17.228 29.5654C18.0508 29.4306 18.8363 29.1248 19.5337 28.6677L19.6097 28.792Z"
              fill="white" />
            <path
              d="M12.7724 53.9339C12.6102 53.8683 12.5239 53.7164 12.5515 53.3918C11.4094 52.8766 10.3598 52.1766 9.44506 51.3202C8.46808 53.0033 7.81589 54.855 7.52247 56.779L7.34302 56.7514C7.19805 56.0194 6.65268 55.5429 5.81738 55.315C6.33785 53.4773 7.28385 51.7881 8.5787 50.3844C7.25672 48.7823 6.28681 46.6934 5.81738 43.9622L6.00724 43.8828C6.65118 46.0356 7.85966 47.9765 9.50717 49.504C10.6228 48.6368 11.894 47.991 13.2522 47.6015L13.4006 47.7776C12.1742 48.2873 11.0971 49.0999 10.27 50.1393C11.305 50.937 12.4738 51.5438 13.7217 51.9313L12.7724 53.9339ZM11.7887 44.4042C13.0357 45.7566 14.5886 46.7903 16.3173 47.4185L15.2266 49.4004C15.0816 49.3451 14.9781 49.2105 15.0229 48.8859C13.4984 47.7741 12.3207 46.2523 11.6265 44.4974L11.7887 44.4042ZM16.0377 51.5998C15.0954 57.0587 11.1847 56.2439 12.1995 54.4795C13.5214 53.9616 15.0229 52.6322 15.9203 51.4928L16.0377 51.5998ZM16.4174 44.1728L16.8316 44.0658V54.0444L18.2571 54.9525C18.2571 54.9525 17.2872 55.9883 16.6521 56.5822C16.5743 56.557 16.5081 56.5049 16.4651 56.4354C16.4221 56.3658 16.4052 56.2833 16.4174 56.2024V44.1728ZM19.6101 48.5061C19.2995 52.5217 16.0066 51.3547 17.0663 49.7802C17.9914 49.5436 18.8379 49.0672 19.5204 48.3991L19.6101 48.5061Z"
              fill="white" />
            <path
              d="M11.934 67.5344C9.67316 68.5703 8.21658 70.7525 7.71609 73.2074H7.54005C7.35021 72.5548 6.74617 72.0645 5.84874 71.8746C6.88423 69.43 8.76196 68.0765 11.8339 67.3135C9.52477 66.9337 7.09826 65.5076 5.83496 60.4424L5.99718 60.3906C7.723 64.0679 9.79397 65.2763 11.934 65.6043V60.6288L12.362 60.5356V65.625C12.7184 65.6641 13.0769 65.6826 13.4354 65.6803H15.61V61.499L16.0207 61.3884V67.569C17.1834 68.0101 18.3776 68.3633 19.5932 68.6255L18.8752 70.8526C18.6957 70.7973 18.5784 70.6351 18.5957 70.3381C17.6603 69.6187 16.7979 68.8092 16.0207 67.9212V69.6855L17.2564 70.6074C17.2564 70.6074 16.435 71.6433 15.8447 72.2786C15.6825 72.251 15.61 72.0887 15.61 71.8988V67.4101H13.4631C13.0954 67.4115 12.7279 67.3942 12.362 67.3583V70.4106L13.6426 71.3498C13.6426 71.3498 12.7728 72.434 12.1722 73.0762C12.0099 73.0348 11.934 72.8863 11.934 72.6826V67.5344ZM19.4896 63.1218C18.6095 67.2651 15.3477 65.9047 16.5523 64.3579C17.5994 64.1521 18.5791 63.6894 19.4033 63.0113L19.4896 63.1218Z"
              fill="white" />
            <path
              d="M13.8322 85.3301C13.0832 90.2607 9.45203 89.5011 10.3805 87.8576C10.9592 87.6282 11.4993 87.3115 11.9821 86.9184C11.8233 86.145 11.6369 85.2369 11.4402 84.1562H7.61921C6.51469 84.1562 5.83819 83.8972 5.70703 82.119C6.0843 82.1344 6.45902 82.0511 6.79426 81.8773C6.9471 81.7416 7.07134 81.5767 7.15965 81.3923C7.24796 81.2079 7.29857 81.0077 7.30856 80.8035H7.50187C7.50187 80.8035 7.41212 81.9705 7.41212 82.2433C7.41212 82.447 7.50185 82.4988 7.66063 82.4988H11.1606C10.9846 81.463 10.7947 80.327 10.6153 79.0909C10.4671 79.0244 10.3456 78.9102 10.2701 78.7664L12.1202 77.9653C12.1426 78.1911 12.1866 78.4142 12.2513 78.6317C12.8667 80.366 13.7131 82.0094 14.7676 83.5174C14.488 82.4609 14.1635 81.1004 13.8564 79.6226C13.743 79.5597 13.6506 79.4648 13.5906 79.3499L15.4441 78.5627C15.4588 78.7248 15.4924 78.8848 15.5442 79.0391C15.8411 79.961 16.7212 81.1419 17.4426 81.9153C17.3529 80.4237 17.2942 78.8768 17.2942 77.4508L17.5289 77.4232C17.9707 80.7206 18.9095 84.9848 19.6758 87.1705L17.9845 88.7173C17.8395 88.555 17.8223 88.2305 18.0294 87.7816C17.8533 86.5593 17.6842 85.0194 17.5461 83.3828L16.9697 84.3323C16.8247 84.2667 16.735 84.0768 16.8109 83.7764C16.1553 82.5612 15.6367 81.277 15.2646 79.9472C15.2646 81.0349 15.2957 82.6646 15.3544 84.3737C15.7848 84.9935 16.2725 85.5715 16.8109 86.1001L15.4303 87.7575C15.3453 87.6773 15.2882 87.5722 15.267 87.4573C15.2459 87.3424 15.262 87.2238 15.3129 87.1187C14.312 85.5994 12.8968 82.3952 12.0339 79.6917C12.0787 81.3767 12.1823 83.9283 12.3134 86.6456C12.8349 86.2133 13.3083 85.726 13.7252 85.192L13.8322 85.3301ZM9.34503 81.8773C9.19661 81.7841 9.12414 81.6736 9.18282 81.349C7.91103 80.1797 6.90773 78.7484 6.24201 77.1539L6.40423 77.0469C7.57144 78.2852 8.95687 79.2977 10.491 80.0336L9.34503 81.8773ZM10.346 84.9849C9.33123 90.1986 5.51372 89.3008 6.59754 87.5917C7.87465 87.1428 9.33124 85.9205 10.2252 84.8743L10.346 84.9849Z"
              fill="white" />
          </svg>


        </div>

        <div class=" absolute -right-[27px] top-[21.5rem]">
          <svg width="27" height="116" viewBox="0 0 27 116" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M0.214844 115.235V0.3125L17.3419 3.01603C22.5987 3.01603 26.858 10.5604 26.858 16.5372V99.0107C26.858 104.988 22.5987 112.532 17.3419 112.532L0.214844 115.235Z"
              fill="#50744E" />
            <path
              d="M11.657 39.3512C11.5224 39.2718 11.4361 39.1475 11.5086 38.8506C10.9489 37.913 10.4763 36.9259 10.0969 35.9019C9.14194 36.968 8.51405 38.2865 8.2882 39.7L8.08452 39.6724C7.9048 39.3203 7.63971 39.0189 7.3135 38.7957C6.9873 38.5725 6.6104 38.4347 6.21721 38.3949C7.31829 35.9779 9.52388 34.5104 13.155 33.8061C12.4035 33.2676 11.7428 32.6125 11.1979 31.8656H7.9223C8.17082 32.7046 8.4642 33.7232 8.77485 34.7418L8.61263 34.797C8.03966 34.0098 7.01107 32.5838 5.93761 30.8747C5.82113 30.7888 5.71665 30.6878 5.62695 30.5743L7.35277 29.5384C7.7221 30.1634 7.88089 30.26 8.14667 30.26H10.1762C9.59516 29.1865 9.13223 28.0531 8.79558 26.8797L8.98544 26.7969C9.97037 28.7054 11.4153 30.3383 13.1895 31.5479V27.187L13.6175 27.08V32.4284H15.3433V28.5336L15.7541 28.4266V32.4319H17.3867V27.8845L17.8113 27.7602V32.4319H19.651L19.4577 34.576C19.2541 34.5484 19.1125 34.4276 19.0469 34.0754H17.8113V36.6822L19.0159 37.5075C19.0159 37.5075 18.1944 38.4466 17.6352 39.0025C17.5601 38.9777 17.4958 38.9278 17.453 38.8611C17.4103 38.7945 17.3918 38.7152 17.4005 38.6365V34.0581H15.7679V36.2023L16.9587 37.0034C16.9587 37.0034 16.151 37.9253 15.5781 38.4708C15.4996 38.4455 15.4329 38.3929 15.3898 38.3226C15.3468 38.2523 15.3303 38.1689 15.3433 38.0876V34.0581H13.6175V37.1242L14.8498 37.9805C14.8498 37.9805 14.011 38.93 13.4242 39.4997C13.262 39.4618 13.1895 39.3098 13.1895 39.1199V34.0581C12.158 34.359 11.2048 34.8822 10.3971 35.5911C11.1737 36.3193 12.0199 36.9693 12.9237 37.5317L11.657 39.3512Z"
              fill="white" />
            <path
              d="M9.21674 46.903C8.02592 47.9872 7.71528 49.3994 7.71528 52.1444C7.71528 53.5807 7.7153 54.7892 7.81885 56.2567H7.64281C7.48059 55.6455 6.89377 55.2933 6.18619 55.2208V51.6679C6.18619 48.9678 6.92139 47.7869 8.73005 46.6855C8.8474 46.6164 8.91992 46.5508 8.93718 46.4818L8.89231 46.3195C8.84501 46.267 8.79034 46.2216 8.73005 46.1848C8.24682 45.8982 7.09745 45.111 6.26216 44.6207C6.19484 44.6341 6.12498 44.6256 6.06286 44.5964C6.00074 44.5672 5.94962 44.5188 5.91699 44.4584L7.71183 43.3984C8.05699 43.9716 8.56438 44.745 8.96132 45.3561H13.8419V43.6297L14.2527 43.5503V45.1386L15.3848 45.9259L13.9282 47.5936C13.7391 47.4113 13.6247 47.1651 13.6072 46.903H9.21674ZM15.8163 47.4589V50.6493C16.9173 50.7184 18.122 50.7045 19.4888 50.7184L19.299 52.904C19.0781 52.8763 18.9158 52.7279 18.8744 52.4137C17.7561 52.3861 16.7551 52.3757 15.8163 52.3066V53.9502L17.0796 54.7788C17.0796 54.7788 16.227 55.7284 15.6402 56.2981C15.5625 56.2728 15.4962 56.2208 15.4532 56.1512C15.4103 56.0817 15.3934 55.9991 15.4056 55.9183V52.2929C14.8266 52.2464 14.2505 52.1692 13.6797 52.0615C11.6087 57.289 7.93275 56.2843 9.15118 54.5337C10.4455 54.0296 11.9884 52.9592 13.193 51.9544C11.1945 51.4227 9.74139 50.2557 8.78528 47.5556L8.98892 47.4175C10.5491 49.7826 12.5476 50.4456 15.4159 50.6355V47.5694L15.8163 47.4589ZM19.3301 44.2685C18.1669 48.4637 14.8429 47.1758 16.0959 45.6255C17.2263 45.3247 18.2921 44.8191 19.2403 44.1339L19.3301 44.2685Z"
              fill="white" />
            <path
              d="M17.8012 71.0611C17.8012 71.0611 16.9313 72.0969 16.3307 72.7288C16.1685 72.6908 16.0961 72.5389 16.0961 72.349V65.7887C15.2262 65.7334 14.3909 65.6644 13.5798 65.5573V68.7892L14.4772 69.6455L13.1242 71.0956C12.9656 70.9417 12.8717 70.733 12.8619 70.5121C9.15826 70.3222 7.12867 69.97 6.45215 69.1966C6.00318 68.6689 5.7811 67.985 5.83434 67.2941C6.34863 67.2941 6.77663 67.2423 6.99754 67.011C7.33541 66.5961 7.55804 66.0995 7.64299 65.5712H7.81903C7.77416 66.2099 7.70165 67.2285 7.70165 67.5255C7.68995 67.6171 7.69676 67.7101 7.72166 67.7991C7.74656 67.8881 7.78906 67.9711 7.84663 68.0434C8.24702 68.4612 10.1696 68.7339 13.1553 68.8962V65.4434C9.96594 64.8875 7.28748 63.572 5.74805 60.2055L5.89299 60.1088C8.45066 63.2163 12.068 63.9069 16.0961 63.9518V60.1226L16.5206 60.0156V70.0874L17.8012 71.0611ZM19.6374 64.922C19.1232 69.0654 15.7716 67.7464 16.9313 66.1858C17.9016 65.9525 18.8007 65.4868 19.5512 64.8288L19.6374 64.922Z"
              fill="white" />
            <path
              d="M7.77452 88.8283C6.89435 89.3048 6.39386 89.3738 6.17295 89.1425C5.48262 88.5037 6.12808 87.3884 6.73212 86.7807C8.89284 84.5813 12.096 83.8044 15.8445 83.5627V76.7849L16.2725 76.6641V83.5351C17.308 83.4799 18.4021 83.4523 19.5204 83.4523L19.2857 85.5965C19.0924 85.5723 18.9164 85.448 18.8577 85.1096C17.9914 85.1096 17.1319 85.1096 16.2725 85.1372V86.6841L17.094 87.3229C17.1107 87.2013 17.1506 87.0841 17.2113 86.9776C17.8925 86.6806 18.4961 86.2304 18.9751 85.662L19.0924 85.7587C19.2408 88.2965 17.7566 88.5209 17.2423 87.9029C16.9628 88.2482 16.4623 88.8524 16.0791 89.284C16.0014 89.2544 15.936 89.1995 15.8934 89.128C15.8508 89.0566 15.8336 88.9729 15.8445 88.8904V85.1579C12.7587 85.334 9.97665 85.959 8.45103 87.7372C8.24738 87.9271 8.24738 88.0341 8.4959 88.1584C9.082 88.4729 9.6859 88.7531 10.3046 88.9974L10.2735 89.1494L7.77452 88.8283ZM8.83415 81.1182C9.02399 82.0263 9.23111 83.0034 9.45201 83.9943L9.2587 84.0358C8.56837 82.7721 7.6882 80.9282 6.49739 78.1453C6.41212 78.1194 6.33359 78.075 6.26738 78.0153C6.20116 77.9557 6.14889 77.8821 6.11426 77.8L7.98161 76.7642C8.07135 77.3511 8.26119 78.3283 8.4959 79.5264H12.876V77.2579L13.2902 77.1509V81.2943L14.4776 82.1506C14.4776 82.1506 13.6699 83.1001 13.0969 83.6836C13.0218 83.6587 12.9575 83.6088 12.9147 83.5422C12.872 83.4755 12.8535 83.3963 12.8622 83.3176V81.1182H8.83415Z"
              fill="white" />
          </svg>


        </div>


      </div>

      <div class=" z-10  absolute   pb-[52rem]   -bottom-2 left-[0.4rem]  w-[94%] h-full bg-cover bg-center  rounded-lg "
      :style="{ backgroundColor: layerColors[2] }">

      </div>

    </div>

  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import Title from './title.vue'
import a_one_title from './one/title.vue'
import a_one_q from './one/one.vue'
import a_tow_q from './one/two.vue'
import a_three_q from './one/three.vue'
import a_four_q from './one/four.vue'
import a_five_q from './one/five.vue'


import b_one_title from './tow/title.vue'
import b_one_q from './tow/one.vue'
import b_tow_q from './tow/two.vue'
import b_three_q from './tow/three.vue'
import b_four_q from './tow/four.vue'
import b_five_q from './tow/five.vue'


import c_one_title from './three/title.vue'
import c_one_q from './three/one.vue'
import c_tow_q from './three/two.vue'
import c_three_q from './three/three.vue'
import c_four_q from './three/four.vue'
import c_five_q from './three/five.vue'

const aTextureNames = ['A1.png', 'A2.png', 'A3.png', 'A4.png', 'A5.png', 'A6.png']
const bTextureNames = ['B2.png', 'B1.png', 'B3.png', 'B4.png', 'B5.png', 'B6.png']

const randomIndex = Math.floor(Math.random() * Math.min(aTextureNames.length, bTextureNames.length))
const selectedATexture = ref(aTextureNames[randomIndex])
const selectedBTexture = ref(bTextureNames[randomIndex])


const colors = ref(['#ead1bc', '#a48260', '#b884af'])
// 三层颜色栈，随阶段循环（出栈入栈）
const layerColors = ref<string[]>([...colors.value])

// 0: A, 1: B, 2: C
const stage = ref(0)
const router = useRouter()

function handleClick() {
  if (stage.value < 2) {
    stage.value += 1
    // 颜色栈旋转：仅在阶段推进时旋转
    const first = layerColors.value.shift()
    if (first) layerColors.value.push(first)
    return
  }
  // 最后一阶段直接跳转，不再变更颜色
  router.push({ path: `/wait/${selectedATexture.value}/${selectedBTexture.value}` })
}



// 生成噪点图片的工具函数
function generateNoise(opacity: number = 0.06, size: number = 100): string {
  const canvas = document.createElement('canvas');
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext('2d');
  if (!ctx) return '';

  const imageData = ctx.createImageData(size, size);
  const buffer = imageData.data;

  for (let i = 0; i < buffer.length; i += 4) {
    const value = Math.random() * 255;
    buffer[i] = value;     // R
    buffer[i + 1] = value; // G
    buffer[i + 2] = value; // B
    buffer[i + 3] = Math.floor(opacity * 255); // Alpha
  }

  ctx.putImageData(imageData, 0, 0);
  return canvas.toDataURL();
}

// 在 onMounted 生命周期钩子中设置噪点背景，避免 SSR/TS 报错
import { onMounted } from 'vue';

onMounted(() => {
  const targetDiv = document.querySelector('div.zaodian') as HTMLElement | null;
  if (targetDiv) {
    const noiseURL = generateNoise(0.08, 1000); // 不透明度 & 噪点尺寸
    targetDiv.style.backgroundImage = `url(${noiseURL})`;
    targetDiv.style.backgroundBlendMode = 'multiply';
    targetDiv.style.backgroundRepeat = 'repeat';
  }
});

</script>

<style scoped>
/* iOS bottom bar safe-area padding for full-bleed pages */
.ios-safe {
  padding-bottom: calc(constant(safe-area-inset-bottom) + 12px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 12px);
}

/* 颗粒消散 + 淡入淡出 */
.dissolve-enter-active,
.dissolve-leave-active {
  transition: opacity 360ms ease;
  /* 同步粒子遮罩动画时长 */
}
.dissolve-enter-from,
.dissolve-leave-to {
  opacity: 0;
}

/* 粒子遮罩实现：使用子层遮罩在切换时制造"砂化"效果 */
.dissolve-wrap {
  position: relative;
}
.dissolve-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at 20% 30%, rgba(0,0,0,0.12), transparent 40%),
              radial-gradient(circle at 70% 40%, rgba(0,0,0,0.10), transparent 42%),
              radial-gradient(circle at 40% 70%, rgba(0,0,0,0.08), transparent 45%),
              radial-gradient(circle at 85% 75%, rgba(0,0,0,0.06), transparent 46%),
              radial-gradient(circle at 10% 80%, rgba(0,0,0,0.06), transparent 44%);
  opacity: 0;
  mask-image: radial-gradient(120px 120px at 30% 30%, #000 20%, transparent 60%),
              radial-gradient(100px 100px at 70% 20%, #000 18%, transparent 55%),
              radial-gradient(140px 140px at 50% 70%, #000 22%, transparent 60%),
              radial-gradient(120px 120px at 80% 80%, #000 18%, transparent 58%);
  -webkit-mask-image: radial-gradient(120px 120px at 30% 30%, #000 20%, transparent 60%),
                       radial-gradient(100px 100px at 70% 20%, #000 18%, transparent 55%),
                       radial-gradient(140px 140px at 50% 70%, #000 22%, transparent 60%),
                       radial-gradient(120px 120px at 80% 80%, #000 18%, transparent 58%);
  mix-blend-mode: multiply;
}
.dissolve-leave-active .dissolve-wrap::before,
.dissolve-enter-active .dissolve-wrap::before {
  animation: particle-dissolve 360ms ease forwards;
}

@keyframes particle-dissolve {
  0% { opacity: 0; filter: blur(0px); }
  50% { opacity: 0.35; filter: blur(0.8px); }
  100% { opacity: 0; filter: blur(0px); }
}
</style>
